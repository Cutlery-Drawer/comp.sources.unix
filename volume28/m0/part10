Newsgroups: comp.sources.unix
From: tschudin@cui.unige.ch (Christian Tschudin)
Subject: v28i060: m0 - a messenger execution environment, Part10/12
References: <1.770917478.19277@gw.home.vix.com>
Sender: unix-sources-moderator@gw.home.vix.com
Approved: vixie@gw.home.vix.com

Submitted-By: tschudin@cui.unige.ch (Christian Tschudin)
Posting-Number: Volume 28, Issue 60
Archive-Name: m0/part10

#! /bin/sh
# This is a shell archive.  Remove anything before this line, then unpack
# it by saving it into a file and typing "sh file".  To overwrite existing
# files, type "sh file -c".  You can also feed this as standard input via
# unshar, or by typing "sh <file", e.g..  If this archive is complete, you
# will see the following message at the end:
#		"End of archive 10 (of 12)."
# Contents:  M0-5.ps
# Wrapped by tschudin@cuisunf on Mon Jun  6 13:26:03 1994
PATH=/bin:/usr/bin:/usr/ucb ; export PATH
if test -f 'M0-5.ps' -a "${1}" != "-c" ; then 
  echo shar: Will not clobber existing file \"'M0-5.ps'\"
else
echo shar: Extracting \"'M0-5.ps'\" \(43988 characters\)
sed "s/^X//" >'M0-5.ps' <<'END_OF_FILE'
X%!PS-Adobe-2.0
X%%Creator: dvipsk 5.516a Copyright 1986, 1993 Radical Eye Software
X%%Title: m0.dvi
X%%Pages: 6 0
X%%PageOrder: Ascend
X%%BoundingBox: 0 0 596 842
X%%DocumentFonts: Times-Roman Courier Times-Italic Times-Bold
X%%EndComments
X%%BeginProcSet: tex.pro
X/TeXDict 250 dict def TeXDict begin /N{def}def /B{bind def}N /S{exch}N
X/X{S N}B /TR{translate}N /isls false N /vsize 11 72 mul N /hsize 8.5 72
Xmul N /fixcurrentmatrix{statusdict /product known{statusdict /product
Xget(LaserJet 4)eq{/version where{/version get(2011.110)eq{matrix
Xcurrentmatrix dup dup 0 get 32768 mul round 32768 div 0 exch put dup dup
X3 get 32768 mul round 32768 div 3 exch put systemdict /setmatrix get
Xexec}if}if}if}if}B /setmatrix{systemdict /setmatrix get exec
Xfixcurrentmatrix}B /landplus90{false}def /@rigin{isls{[0 landplus90{1 -1
X}{-1 1}ifelse 0 0 0]concat}if 72 Resolution div 72 VResolution div neg
Xscale isls{landplus90{VResolution 72 div vsize mul 0 exch}{Resolution
X-72 div hsize mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1
Xadd mul TR matrix currentmatrix dup dup 4 get round 4 exch put dup dup 5
Xget round 5 exch put setmatrix}N /@landscape{/isls true N}B /@manualfeed
X{statusdict /manualfeed true put}B /@copies{/#copies X}B /FMat[1 0 0 -1
X0 0]N /FBB[0 0 0 0]N /nn 0 N /IE 0 N /ctr 0 N /df-tail{/nn 8 dict N nn
Xbegin /FontType 3 N /FontMatrix fntrx N /FontBBox FBB N string /base X
Xarray /BitMaps X /BuildChar{CharBuilder}N /Encoding IE N end dup{/foo
Xsetfont}2 array copy cvx N load 0 nn put /ctr 0 N[}B /df{/sf 1 N /fntrx
XFMat N df-tail}B /dfs{div /sf X /fntrx[sf 0 0 sf neg 0 0]N df-tail}B /E{
Xpop nn dup definefont setfont}B /ch-width{ch-data dup length 5 sub get}
XB /ch-height{ch-data dup length 4 sub get}B /ch-xoff{128 ch-data dup
Xlength 3 sub get sub}B /ch-yoff{ch-data dup length 2 sub get 127 sub}B
X/ch-dx{ch-data dup length 1 sub get}B /ch-image{ch-data dup type
X/stringtype ne{ctr get /ctr ctr 1 add N}if}B /id 0 N /rw 0 N /rc 0 N /gp
X0 N /cp 0 N /G 0 N /sf 0 N /CharBuilder{save 3 1 roll S dup /base get 2
Xindex get S /BitMaps get S get /ch-data X pop /ctr 0 N ch-dx 0 ch-xoff
Xch-yoff ch-height sub ch-xoff ch-width add ch-yoff setcachedevice
Xch-width ch-height true[1 0 0 -1 -.1 ch-xoff sub ch-yoff .1 add]{
Xch-image}imagemask restore}B /D{/cc X dup type /stringtype ne{]}if nn
X/base get cc ctr put nn /BitMaps get S ctr S sf 1 ne{dup dup length 1
Xsub dup 2 index S get sf div put}if put /ctr ctr 1 add N}B /I{cc 1 add D
X}B /bop{userdict /bop-hook known{bop-hook}if /SI save N @rigin 0 0
Xmoveto /V matrix currentmatrix dup 1 get dup mul exch 0 get dup mul add
X.99 lt{/QV}{/RV}ifelse load def pop pop}N /eop{SI restore showpage
Xuserdict /eop-hook known{eop-hook}if}N /@start{userdict /start-hook
Xknown{start-hook}if pop /VResolution X /Resolution X 1000 div /DVImag X
X/IE 256 array N 0 1 255{IE S 1 string dup 0 3 index put cvn put}for
X65781.76 div /vsize X 65781.76 div /hsize X}N /p{show}N /RMat[1 0 0 -1 0
X0]N /BDot 260 string N /rulex 0 N /ruley 0 N /v{/ruley X /rulex X V}B /V
X{}B /RV statusdict begin /product where{pop product dup length 7 ge{0 7
Xgetinterval dup(Display)eq exch 0 4 getinterval(NeXT)eq or}{pop false}
Xifelse}{false}ifelse end{{gsave TR -.1 -.1 TR 1 1 scale rulex ruley
Xfalse RMat{BDot}imagemask grestore}}{{gsave TR -.1 -.1 TR rulex ruley
Xscale 1 1 false RMat{BDot}imagemask grestore}}ifelse B /QV{gsave
Xtransform round exch round exch itransform moveto rulex 0 rlineto 0
Xruley neg rlineto rulex neg 0 rlineto fill grestore}B /a{moveto}B /delta
X0 N /tail{dup /delta X 0 rmoveto}B /M{S p delta add tail}B /b{S p tail}
XB /c{-4 M}B /d{-3 M}B /e{-2 M}B /f{-1 M}B /g{0 M}B /h{1 M}B /i{2 M}B /j{
X3 M}B /k{4 M}B /w{0 rmoveto}B /l{p -4 w}B /m{p -3 w}B /n{p -2 w}B /o{p
X-1 w}B /q{p 1 w}B /r{p 2 w}B /s{p 3 w}B /t{p 4 w}B /x{0 S rmoveto}B /y{
X3 2 roll p a}B /bos{/SS save N}B /eos{SS restore}B end
X%%EndProcSet
X%%BeginProcSet: texps.pro
XTeXDict begin /rf{findfont dup length 1 add dict begin{1 index /FID ne 2
Xindex /UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
Xexec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
Xexch def dict begin Encoding{exch dup type /integertype ne{pop pop 1 sub
Xdup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
Xifelse}forall Metrics /Metrics currentdict end def[2 index currentdict
Xend definefont 3 -1 roll makefont /setfont load]cvx def}def
X/ObliqueSlant{dup sin S cos div neg}B /SlantFont{4 index mul add}def
X/ExtendFont{3 -1 roll mul exch}def /ReEncodeFont{/Encoding exch def}def
Xend
X%%EndProcSet
X%%BeginProcSet: special.pro
XTeXDict begin /SDict 200 dict N SDict begin /@SpecialDefaults{/hs 612 N
X/vs 792 N /ho 0 N /vo 0 N /hsc 1 N /vsc 1 N /ang 0 N /CLIP 0 N /rwiSeen
Xfalse N /rhiSeen false N /letter{}N /note{}N /a4{}N /legal{}N}B
X/@scaleunit 100 N /@hscale{@scaleunit div /hsc X}B /@vscale{@scaleunit
Xdiv /vsc X}B /@hsize{/hs X /CLIP 1 N}B /@vsize{/vs X /CLIP 1 N}B /@clip{
X/CLIP 2 N}B /@hoffset{/ho X}B /@voffset{/vo X}B /@angle{/ang X}B /@rwi{
X10 div /rwi X /rwiSeen true N}B /@rhi{10 div /rhi X /rhiSeen true N}B
X/@llx{/llx X}B /@lly{/lly X}B /@urx{/urx X}B /@ury{/ury X}B /magscale
Xtrue def end /@MacSetUp{userdict /md known{userdict /md get type
X/dicttype eq{userdict begin md length 10 add md maxlength ge{/md md dup
Xlength 20 add dict copy def}if end md begin /letter{}N /note{}N /legal{}
XN /od{txpose 1 0 mtx defaultmatrix dtransform S atan/pa X newpath
Xclippath mark{transform{itransform moveto}}{transform{itransform lineto}
X}{6 -2 roll transform 6 -2 roll transform 6 -2 roll transform{
Xitransform 6 2 roll itransform 6 2 roll itransform 6 2 roll curveto}}{{
Xclosepath}}pathforall newpath counttomark array astore /gc xdf pop ct 39
X0 put 10 fz 0 fs 2 F/|______Courier fnt invertflag{PaintBlack}if}N
X/txpose{pxs pys scale ppr aload pop por{noflips{pop S neg S TR pop 1 -1
Xscale}if xflip yflip and{pop S neg S TR 180 rotate 1 -1 scale ppr 3 get
Xppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg TR}if xflip yflip
Xnot and{pop S neg S TR pop 180 rotate ppr 3 get ppr 1 get neg sub neg 0
XTR}if yflip xflip not and{ppr 1 get neg ppr 0 get neg TR}if}{noflips{TR
Xpop pop 270 rotate 1 -1 scale}if xflip yflip and{TR pop pop 90 rotate 1
X-1 scale ppr 3 get ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg
XTR}if xflip yflip not and{TR pop pop 90 rotate ppr 3 get ppr 1 get neg
Xsub neg 0 TR}if yflip xflip not and{TR pop pop 270 rotate ppr 2 get ppr
X0 get neg sub neg 0 S TR}if}ifelse scaleby96{ppr aload pop 4 -1 roll add
X2 div 3 1 roll add 2 div 2 copy TR .96 dup scale neg S neg S TR}if}N /cp
X{pop pop showpage pm restore}N end}if}if}N /normalscale{Resolution 72
Xdiv VResolution 72 div neg scale magscale{DVImag dup scale}if 0 setgray}
XN /psfts{S 65781.76 div N}N /startTexFig{/psf$SavedState save N userdict
Xmaxlength dict begin /magscale false def normalscale currentpoint TR
X/psf$ury psfts /psf$urx psfts /psf$lly psfts /psf$llx psfts /psf$y psfts
X/psf$x psfts currentpoint /psf$cy X /psf$cx X /psf$sx psf$x psf$urx
Xpsf$llx sub div N /psf$sy psf$y psf$ury psf$lly sub div N psf$sx psf$sy
Xscale psf$cx psf$sx div psf$llx sub psf$cy psf$sy div psf$ury sub TR
X/showpage{}N /erasepage{}N /copypage{}N /p 3 def @MacSetUp}N /doclip{
Xpsf$llx psf$lly psf$urx psf$ury currentpoint 6 2 roll newpath 4 copy 4 2
Xroll moveto 6 -1 roll S lineto S lineto S lineto closepath clip newpath
Xmoveto}N /endTexFig{end psf$SavedState restore}N /@beginspecial{SDict
Xbegin /SpecialSave save N gsave normalscale currentpoint TR
X@SpecialDefaults count /ocount X /dcount countdictstack N}N /@setspecial
X{CLIP 1 eq{newpath 0 0 moveto hs 0 rlineto 0 vs rlineto hs neg 0 rlineto
Xclosepath clip}if ho vo TR hsc vsc scale ang rotate rwiSeen{rwi urx llx
Xsub div rhiSeen{rhi ury lly sub div}{dup}ifelse scale llx neg lly neg TR
X}{rhiSeen{rhi ury lly sub div dup scale llx neg lly neg TR}if}ifelse
XCLIP 2 eq{newpath llx lly moveto urx lly lineto urx ury lineto llx ury
Xlineto closepath clip}if /showpage{}N /erasepage{}N /copypage{}N newpath
X}N /@endspecial{count ocount sub{pop}repeat countdictstack dcount sub{
Xend}repeat grestore SpecialSave restore end}N /@defspecial{SDict begin}
XN /@fedspecial{end}B /li{lineto}B /rl{rlineto}B /rc{rcurveto}B /np{
X/SaveX currentpoint /SaveY X N 1 setlinecap newpath}N /st{stroke SaveX
XSaveY moveto}N /fil{fill SaveX SaveY moveto}N /ellipse{/endangle X
X/startangle X /yrad X /xrad X /savematrix matrix currentmatrix N TR xrad
Xyrad scale 0 0 1 startangle endangle arc savematrix setmatrix}N end
X%%EndProcSet
XTeXDict begin 39158280 55380996 1000 300 300 (m0.dvi)
X@start /Fa 1 59 df<60F0F06004047D830B>58 D E /Fb 1 25
Xdf<0F8000801FE000803FF0008070780180E01C0380C00F07008007FE008003FC008000
XF80019097E8D1E>24 D E /Fc 134[22 1[33 22 25 14 19 19
X1[25 25 25 36 14 22 1[14 25 25 1[22 25 22 25 25 13[25
X1[36 30 36 1[41 6[30 1[36 33 1[30 65[{}30 50.000000 /Times-Italic
Xrf /Fd 22[20 107[20 1[20 1[20 20 20 20 20 20 20 20 20
X20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20 20
X1[20 20 20 2[20 2[20 3[20 20 2[20 20 1[20 20 1[20 1[20
X20 4[20 1[20 1[20 20 2[20 1[20 1[20 20 20 20 20 20 1[20
X20 1[20 20 20 2[20 20 20 20 33[{}65 33.333332 /Courier
Xrf /Fe 3 102 df<07800C4010E031C0600060006000C000C0004020404021801E000B0D
X7E8C0F>99 D<007C000C0018001800180018003007B00C7010703060606060606060C0C0
XC0C8C0C841C862D03C700E147E9311>I<07800C401020304060407F8060004000C00040
X20604021801E000B0D7E8C10>I E /Ff 7 117 df<60F0F06004047C830C>58
XD<01F007080C0818043808300870307FC0E000E000E000E000E000E0046008601030600F
X800E127E9113>101 D<007180018B800307800607800E07000C07001C07001C0700380E
X00380E00380E00380E00381C00381C00381C00183C0008F8000738000038000038000070
X00607000F06000F0E000E180007E0000111A7F9114>103 D<0FC00001C00001C0000380
X000380000380000380000700000700000700000700000E3E000EC3000F03800E03801E03
X801C03801C03801C0380380700380700380700380E00700E20700E20701C20701C40E00C
X80600700131D7E9C18>I<1F800380038007000700070007000E000E000E000E001C001C
X001C001C0038003800380038007000700070007000E400E400E400E40064003800091D7E
X9C0C>108 D<381F004E61804681C04701C08F01C08E01C00E01C00E01C01C03801C0380
X1C03801C0700380710380710380E10380E2070064030038014127E9119>110
XD<00C001C001C001C00380038003800380FFF00700070007000E000E000E000E001C001C
X001C001C00382038203840384018800F000C1A80990F>116 D E
X/Fg 205[12 12 49[{}2 25.000000 /Times-Roman rf /Fh 78[21
X1[23 23 52[21 21 30 21 23 14 16 18 23 23 21 23 35 12
X23 1[12 23 21 1[18 23 18 23 21 9[42 2[28 23 30 3[30 39
X28 2[16 32 1[25 2[30 1[30 6[14 21 21 21 21 21 21 21 21
X21 21 1[10 14 3[14 14 40[{}53 41.666668 /Times-Bold rf
X/Fi 22[30 116[30 4[30 30 30 30 2[30 1[30 2[30 30 21[30
X28[30 1[30 46[{}13 50.000000 /Courier rf /Fj 204[15 15
X15 49[{}3 29.166668 /Times-Roman rf /Fk 5 104 df<FFFFFF80FFFFFF8019027D
X8A20>0 D<03C00FF01FF83FFC7FFE7FFEFFFFFFFFFFFFFFFF7FFE7FFE3FFC1FF80FF003
XC010107E9115>15 D<07C000201FE000203FF80020783C0060E01F00E0C00783C08003FF
X808000FF0080007C001B097E8E20>24 D<003C00E001C001800380038003800380038003
X800380038003800380038003800380030007001C00F0001C000700030003800380038003
X80038003800380038003800380038003800380018001C000E0003C0E297D9E15>102
XD<F0001C0007000300038003800380038003800380038003800380038003800380038001
X8001C000E0003C00E001C001800380038003800380038003800380038003800380038003
X800380030007001C00F0000E297D9E15>I E /Fl 22[35 155[35
X77[{}2 58.333336 /Courier rf /Fm 69[15 10[18 18 3[15
X48[17 17 24 17 17 9 13 11 17 17 17 17 26 9 1[9 9 17 17
X11 15 17 15 17 15 8[24 2[24 20 18 22 1[18 24 24 30 20
X2[11 24 1[18 20 24 22 22 24 6[9 17 17 1[17 17 2[17 17
X17 1[8 4[11 11 40[{}57 33.333332 /Times-Roman rf /Fn
X22[25 37[25 1[25 68[25 1[25 25 25 25 25 25 25 25 25 25
X25 25 25 25 25 25 1[25 25 25 25 25 25 25 25 25 3[25 25
X25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25
X25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25
X25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25 25
X25 25 25 25 25 33[{}90 41.666668 /Courier rf /Fo 81[28
X52[25 25 36 25 28 17 19 22 1[28 25 28 41 14 2[14 28 25
X17 22 28 22 28 25 9[50 36 36 33 28 36 1[30 39 36 47 33
X2[19 1[39 30 33 36 36 1[36 7[25 25 25 25 25 25 25 25
X25 25 1[12 17 12 2[17 17 40[{}56 50.000000 /Times-Bold
Xrf /Fp 81[21 52[18 18 28 18 21 12 16 16 21 21 21 21 30
X12 18 12 12 21 21 12 18 21 18 21 21 13[21 25 1[25 30
X28 35 23 5[25 2[28 8[14 7[21 21 1[12 10 14 3[14 14 40[{}43
X41.666668 /Times-Italic rf /Fq 135[29 1[29 32 19 23 26
X1[32 29 32 48 16 2[16 32 29 19 26 32 26 1[29 12[39 1[42
X1[36 45 2[39 2[23 2[36 39 3[42 11[29 29 29 29 29 49[{}33
X58.333336 /Times-Bold rf /Fr 167[22 4[17 3[22 22 27 3[10
X4[22 68[{}7 29.999987 /Times-Roman rf /Fs 80[21 21 52[19
X19 27 19 19 10 15 12 19 19 19 19 29 10 19 1[10 19 19
X12 17 19 17 19 17 12 3[10 1[23 4[27 23 21 5[33 6[21 11[10
X10[10 9 12 9 2[12 12 12 4[15 34[{}43 37.500000 /Times-Roman
Xrf /Ft 139[12 15 17 14[17 21 19 31[27 65[{}7 37.500000
X/Times-Bold rf /Fu 22[22 37[22 69[22 22 22 1[22 22 22
X22 22 22 22 22 22 22 22 22 22 22 22 1[22 22 22 22 22
X22 22 22 22 22 22 1[22 22 22 22 22 22 22 22 22 22 22
X22 22 22 22 22 22 22 22 22 22 22 22 22 22 22 22 22 22
X22 22 22 22 22 22 22 1[22 22 22 22 22 22 22 22 22 22
X22 22 22 22 22 22 22 22 22 22 22 1[22 22 33[{}90 37.500000
X/Courier rf /Fv 60[14 14 14 6[18 8[21 1[23 23 3[18 47[18
X21 21 30 21 21 12 16 14 21 21 21 21 32 12 21 12 12 21
X21 14 18 21 18 21 18 14 2[14 1[14 1[30 1[39 30 30 25
X23 28 30 23 30 30 37 25 30 16 14 30 30 23 25 30 28 28
X30 5[12 12 21 21 21 21 21 21 21 21 21 21 12 10 14 10
X23 1[14 14 14 4[17 14 33[{}83 41.666668 /Times-Roman
Xrf /Fw 134[25 3[25 14 19 17 3[25 4[14 25 3[25 22 1[22
X12[30 6[44 6[28 2[33 9[25 4[25 25 1[25 2[12 1[12 44[{}21
X50.000000 /Times-Roman rf /Fx 134[17 1[25 17 19 10 15
X15 19 1[19 19 27 3[10 19 1[10 17 19 2[19 11[27 6[25 2[25
X1[12 5[25 10[19 1[19 12[12 12 12 39[{}27 37.500000 /Times-Italic
Xrf /Fy 22[42 155[42 77[{}2 70.833336 /Courier rf /Fz
X138[35 20 27 23 2[35 35 4[20 35 35 1[31 35 31 1[31 19[63
X43 2[23 7[51 65[{}17 70.833336 /Times-Roman rf end
X%%EndProlog
X%%BeginSetup
X%%Feature: *Resolution 300dpi
XTeXDict begin
X%%PaperSize: a4
X
X%%EndSetup
X%%Page: 27 1
X27 26 bop 112 7 a Fq(3)58 b(Examples)112 108 y Fo(3.1)50
Xb(Simple)12 b(Pr)o(ograms)i(\(fr)o(om)e Fi(longdict.m0)p
XFo(\))112 186 y Fv(In)e(order)g(to)g(show)h(some)g(simple)g
X(programming)e(examples,)k(we)e(comment)g(on)f(a)i(few)f(de\256nitions)
Xe(taken)112 236 y(from)h(the)g Fn(longdict.m0)g Fv(\256le.)16
Xb(This)11 b(\256le)f(is)h(automatically)f(included)f(by)h(the)h
XFn(M\351)f Fv(platform)g(at)h(startup)112 285 y(time)f(and)g(\256lls)g
X(in)f(the)h Fn(longdict)g Fv(dictionary)m(.)112 396 y
XFh(Logical)i(not)i(\()p Fn(lnot)p Fh(\):)40 b Fv(Booleans)14
Xb(are)h(not)e(part)g(of)h Fn(M\351)p Fv(')n(s)f(data)i(types.)25
Xb(Instead,)16 b(0)d(stands)h(for)g Fp(false)p Fv(,)112
X445 y(other)d(values)h(mean)h Fp(true)p Fv(.)20 b(In)12
Xb(order)g(to)f(obtain)g(a)h(correct)g(logical)g Fp(not)f
XFv(operation,)g(the)h(bit-wise)f(not)g(\()p Fn(\303)p
XFv(\))112 495 y(cannot)f(be)g(used.)16 b(Use)11 b(instead)197
X545 y Fn(0=)112 595 y Fv(which)e(returns)h(either)g(0)g(or)g(1.)112
X705 y Fh(Clear)g(operand)g(stack)g(\()p Fn(clear)p Fh(\):)41
Xb Fv(The)10 b(operand)g(stack)g(is)g(cleared)h(by)e(issueing)g(the)h
X(right)e(number)i(of)112 755 y(pops)e(\()p Fn(P)p Fv(\).)h(The)h(size)g
X(of)f(the)g(operand)g(stack)h(is)f(obtained)f(from)h(the)g(stack)g
X(count)g(operator)g Fn(O)p Fv(,)g(the)g(returned)112
X805 y(number)h(is)g(used)g(to)g(control)f(a)i(loop.)197
X855 y Fn(1O)p Fk(f)p Fn(PP)p Fk(g)p Fn(L)112 904 y Fv(Do)f(not)f(for)o
X(get)h(to)f(also)i(pop)e(the)h(loop')n(s)f(counter)h(which)g(is)g
X(pushed)g(for)g(each)h(iteration.)112 1015 y Fh(Absolute)e(value)h(\()p
XFn(abs)p Fh(\):)41 b Fv(This)10 b(example)g(shows)g(the)g(use)g(of)g
X(the)g Fn(ifelse)f Fv(\()p Fn(?)p Fv(\))15 b(operator)n(.)f(A)c(compar)
Xo(-)112 1064 y(ison)e(with)g(0)h(is)g(used)g(for)g(deciding)f(if)g(the)
Xh(negation)f(operator)h(must)g(be)g(called)g(or)g(not.)14
Xb(The)c(value,)g(before)112 1114 y(being)f(compared,)j(is)e(duplicated)
Xf(with)g(the)h(code)h(sequence)h Fn(0I)p Fv(.)197 1164
Xy Fn(0I0<)p Fk(f)p Fn(N)p Fk(gfg)p Fn(?)112 1274 y Fh(Sleep)g(\()p
XFn(sleep)p Fh(\):)40 b Fv(A)12 b(process)g(can)g(be)g(temporarily)e
X(suspended)h(by)g(blocking)f(it)h(conditionally)d(inside)112
X1324 y(a)i(process)g(queue.)15 b(W)m(e)c(assume)g(that)e(the)g(number)h
X(of)g(micro-seconds)f(to)h(sleep)g(is)f(on)h(the)f(operand)h(stack.)112
X1374 y(First,)i(a)i(random)e(key)h(is)f(generated.)23
Xb(The)14 b(process)f(queue)g(associated)g(with)f(this)g(key)g(is)h
X(then)f(put)g(into)112 1424 y(the)d(stopped)g(state,)h(and)f(the)h
X(queue)f(is)g(entered)h(with)f(the)g(given)g(micro-second)g(ar)o
X(gument.)15 b(After)10 b(having)112 1474 y(been)g(reactivated,)g(we)g
X(drop)e(the)i(returned)f(boolean)g(value)g(and)h(simply)f(unstop)f(the)
Xh(process)h(queue:)15 b(this)112 1523 y(releases)c(all)f(resources)h
X(associated)g(with)e(the)i(dynamically)e(created)i(process)g(queue.)197
X1573 y Fn(;0I1Q)24 b(X1IXE)h(P0Q)112 1692 y Fo(3.2)50
Xb(A)12 b(Messenger)h(Which)f(Discovers)h(All)f(Neighboring)f
XFi(M\351)p Fo(-Platforms)112 1770 y Fv(The)d(goal)g(of)g(this)f
X(section)h(is)g(to)g(introduce)f(a)h(messenger)i(which)e(assembles)h
X(the)f(list)f(of)h(host)g(identi\256ers)f(of)112 1819
Xy(all)j(direct)h Fn(M\351)f Fv(neighbors.)16 b(Already)11
Xb(the)g(problem)f(setup)g(is)h(interesting)e(because,)k(without)c
X(recurring)h(to)112 1869 y(messengers,)f(one)e(would)g(have)g(to)f
X(inst)o(all)g(on)g(all)g(potent)o(ial)g(nodes)h(a)g(speci\256c)g("i-)o
X(am-the-host-x)o(")g(pr)o(oto)o(col.)112 1919 y(W)n(ith)i(messengers,)j
X(such)e(an)g(exploration)e(task)i(can)h(be)f(performed)g(although)e
X(the)i Fn(M\351)g Fv(platforms)f(remain)112 1969 y(generic.)27
Xb(It)13 b(is)h(easy)h(to)f(change)h(the)f(pro\256le)g(of)f(the)h(task)h
X(and)f(to)f(write)h(another)g(messenger)h(that,)g(for)112
X2019 y(instance,)10 b(collects)h(the)f(various)f Fm(IP)i
XFv(addresses)h(of)d(neighboring)f(hosts.)174 2068 y(The)k(following)d
X(exploration)h(messenger)k(relies)d(on)h(a)g(broadcast)g(facility)e
X(for)i(reaching)f(neighbors.)112 2118 y(W)m(e)i(thus)f(assume)j(that)d
X(the)h(execution)g(platforms)f(of)o(fer)h(a)h(channel)f(which)g(maps)g
X(messengers)i(e.g.,)g(to)112 2168 y Fm(ETHERNET)d Fv(frames.)17
Xb(T)m(wo)11 b(design)g(goals)f(have)h(been)g(respected:)17
Xb(\(a\))10 b(we)i(want)e(a)h(state-less)g(exploration)112
X2218 y(\(which)c(leaves)i(no)e(traces)i(on)f(the)f(remote)i(hosts\),)f
X(and)g(\(b\))f(the)h(number)g(of)g(messenger)h(exchanges)g(should)112
X2268 y(be)h(minimized)g(and)g(take)h(into)e(account)h(all)g
X(informations)f(already)h(gathered.)174 2317 y(The)18
Xb(following)d(algorithm)h(is)h(used:)30 b(the)17 b(initiating)e(host)h
X(broadcasts)i(3)g(times)f(an)h Fp(exploration)112 2367
Xy Fv(messenger)n(.)24 b(This)12 b(messenger)j(contains)d(the)h(list)e
X(of)i(all)f(already)i(discovered)e(hosts.)23 b(The)13
Xb(exploration)112 2417 y(messenger)8 b(checks)h(on)d(the)i(remote)f
X(system)h(if)f(its)g(hostid)e(already)j(\256gures)f(in)g(the)g(list)g
X(of)g(discovered)g(hosts.)112 2467 y(Only)k(if)g(we)h(are)h(on)f(a)g
X(new)g(hosts)g(we)g(send)g(back)h(an)f Fp(update)f Fv(messenger)i
X(which)f(reports)f(the)h(new)g(host)112 2517 y(identi\256er)n(.)h(All)7
Xb(participating)f(messengers)j(coordinate)e(their)h(actions)f(via)h(a)g
X(common)h Fp(session)f(key)h Fv(which)112 2567 y(is)h(randomly)h
X(chosen)g(by)g(the)g(initiating)d(host:)15 b(at)c(the)g(initiating)d
X(site)j(there)g(will)f(be)i(a)f(global)f(dictionary)112
X2616 y(associated)h(to)e(this)h(key)g(where)h(returning)d(messengers)k
X(can)f(deposit)e(the)h(found)g(host)f(identi\256er)n(.)878
X2790 y(27)p eop
X%%Page: 28 2
X28 27 bop 174 7 a Fv(The)12 b(code)g(is)g(presented)g(piece-wise)g(and)
Xg(in)f(reverse)i(order)n(,)f(starting)f(with)f(the)i(update)f
X(messenger)n(.)112 57 y(The)h(update)f(messenger)i(carries)f(the)f
X(discovered)h(host)f(identi\256er)f(in)h(the)g(data)h(\256eld.)19
Xb(Furthermore)11 b(it)g(is)112 107 y(assumed)e(that)f(the)h(session)f
X(key)h(is)f(used)h(as)g(key)g(for)f(the)g(process)i(queue)e(in)g(which)
Xh(the)f(update)g(messenger)112 157 y(starts.)17 b(This)11
Xb(key)g(can)h(then)f(be)g(used)g(to)g(\256nd)g(the)g(session')n(s)f
X(global)g(data)i(structure)e(inside)h(the)g(initiating)112
X206 y(host.)151 287 y Fd(_)20 b(,)g(G)g(\()179 b(#)20
Xb(push)g(the)f(dictionary)h(associated)f(with)g(the)h(session)f(key)151
X327 y(.)h(_dat)g(_ctk)f(1)h(:)g(#)g(define)g(a)f(new)h(entry,)g(use)f
X(the)h(carried)f(hostid)h(as)g(key)174 418 y Fv(That')n(s)12
Xb(all)f(we)i(need)f(to)g(do)f(for)h(an)g(update!)20 b(Next)11
Xb(we)i(examine)g(the)e(exploration)g(messenger:)19 b(it)11
Xb(is)112 468 y(broadcasted)g(to)f(neighboring)f(hosts)h(where)h(it)f
X(checks)i(if)f(the)f(host)g(already)i(\256gures)e(in)h(the)f(list)g(of)
Xh(found)112 518 y(hosts.)j(Only)8 b(for)g(a)i(new)f(host)f(must)h(the)f
X(update)h(messenger)h(be)g(sent)e(back.)16 b(The)9 b(list)f(of)h(known)
Xf(hosts)g(can)112 568 y(be)h(found)g(in)g(the)g(exploration)f
X(messenger)r(')n(s)i(data)f(\256eld)h(together)e(with)h(the)g
X(procedure)g(to)g(use)h(in)f(order)g(to)112 617 y(create,)i(on)f(the)g
X(remote)h(system,)g(a)g(channel)f(back)h(to)f(the)g(initiating)d(host.)
X151 698 y Fd(_dat!)219 b(#)20 b(recreate)f(\(a\))h(the)g(procedure)f
X(for)h(finding)f(the)h(back)f(channel)470 738 y(#)h(and)g(\(b\))f(the)h
X(array)g(of)f(known)h(host)g(identifiers)151 777 y(0)g(X)g({)219
Xb(#)20 b(push)g(a)g(`found')f(flag,)g(and)h(loop)g(over)f(the)h(array)
X191 817 y(_hid=)179 b(#)20 b(compare)f(the)h(host)g(id)191
X856 y({P1J}{}?)119 b(#)20 b(if)g(equal)f(then)h(toggle)f(the)h(flag)g
X(and)f(jump)h(out)g(of)g(the)f(loop)151 896 y(})h(L)151
X935 y({}{)g([,)199 b(#)20 b(if)g(hostid)f(not)h(found)g(then)f(start)h
X(building)f(an)h(update)f(messenger)191 974 y("_,G\(._dat)g(_ctk1:")40
Xb(#)20 b(see)f(the)h(update)f(messenger)h(above)191 1014
Xy(_hid)g(_cts)99 b(#)20 b(convert)f(the)h(hostid)g(key)f(into)h(a)g
X(string)f(for)h(the)g(data)f(field)191 1053 y(])h(_ctm)g(X!X)f($)40
Xb(#)20 b(convert)f(all)h(this)g(to)g(a)f(messenger)h(and)f(send)h(it)g
X(back)151 1093 y(}?)174 1184 y Fv(On)12 b(the)g(initiating)e(host)h(we)
Xi(make)h(the)e(`host)f(dicovery)h(service')h(available)f(via)g(a)h
X(procedure.)22 b(The)112 1234 y Fn(neighbors)6 b Fv(procedure)h
X(expects)h(two)f(ar)o(guments)h(on)f(the)g(operand)g(stack:)13
Xb(a)8 b(procedure)f(for)g(generating)112 1284 y(the)k(key)h(of)f(a)h
X(broadcast)g(channel,)g(and)g(a)g(procedure)g(that,)f(on)h(the)f
X(remote)h(hosts,)g(generates)g(a)g(channel)112 1333 y(key)c(for)f
X(sending)h(back)g(a)h(messenger)n(.)15 b(The)9 b(procedure)f(returns)g
X(an)g(array)h(with)e(all)h(found)f(host)g(identi\256ers.)151
X1414 y Fd(.)20 b('neighbors)f({)40 b(#)20 b(usage:)g(brcast_proc)f
X(back_proc)39 b(neighbors)g(array)191 1454 y(;)20 b(_)g(1I)g(D)g(:)79
Xb(#)20 b(get)g(a)g(random)f(key,)h(link)f(in)h(globaldict)f(a)h(new)g
X(dict)f(to)h(it)191 1493 y(3)g({)g(P)179 b(#)20 b(send)g(three)f(times)
Xh(the)f(discover)h(messenger)231 1533 y(2I!)179 b(#)20
Xb(get)g(the)f(broadcast)h(channel)231 1572 y([2I)179
Xb(#)20 b(use)g(the)f(random)h(key)g(for)f(the)h(process)f(queue)h
X(field)271 1612 y(...)139 b(#)20 b(\(fill)g(in)f(here)h(the)g(string)f
X(of)h(the)g(discovery)f(messenger\))231 1651 y(5I)h(_cte)99
Xb(#)20 b(get)g(an)g(external)f(representation)g(of)g(the)h(back)g
X(procedure)231 1690 y([)g(_)g(7I)g(G)79 b(#)20 b(create)g(an)f(array)h
X(with)f(all)h(known)g(host)f(ids)231 1730 y({P}L)h(])g(_cte)f(#)h(and)g
X(convert)f(it)h(to)g(an)f(external)h(representation)231
X1769 y(+)219 b(#)20 b(concat)g(back)f(procedure)g(and)h(array)g(with)f
X(hostids)231 1809 y(])h(_ctm)g($)79 b(#)20 b(assemble)f(the)h(discover)
Xf(messenger)h(and)f(broadcast)h(it!)231 1848 y(333333)119
Xb(#)20 b(sleep)g(for)f(1/3)h(second)231 1888 y(;0I1QX1IXEP0Q)f(#)h
X(sleep)f(\(see)h(the)g(code)f(example)h(above\))191 1927
Xy(})g(L)191 1967 y([)g(_)g(2I)g(G)119 b(#)20 b(build)g(again)f(the)h
X(array)f(of)h(found)g(hosts)191 2006 y({P}L)g(])191 2045
Xy(X)g(_)g(X)g(U)139 b(#)20 b(undefine)f(the)h(session)f(dictionary)191
X2085 y(XPXP)199 b(#)20 b(pop)g(the)f(two)h(initial)g(arguments)f(and)g
X(return)h(the)g(array)151 2124 y(})g(:)259 b(#)20 b(put)g(the)f
X(procedure's)h(definition)f(in)g(the)h(current)g(dictionary)112
X2216 y Fv(Finally)9 b(we)h(show)g(how)g(this)g(exploration)e(procedure)
Xi(is)g(used)h(in)f(the)g(case)h(of)f(an)h Fm(ETHERNET)h
XFv(network.)151 2297 y Fd({\\ffffffffffff\\)19 b(0)h({})119
Xb(#)20 b(the)g(three)g(args)f(for)h(creating)f(a)h(local)g(channel)171
X2336 y(_cha)g('ether)f(G)h('_key)g(G)g(!})f(#)h(find)g(the)g(operator)f
X(for)h(creating)f(the)h(key,)151 2375 y({)g(_ori2G)g(_ori1G)f({})159
Xb(#)20 b(dito)g(for)g(remote)f(host,)h(but)f(we)h(obtain)g(the)171
X2415 y(_cha)g(_ori0G)f(G)h('_key)g(G)g(!})f(#)h(address)g(of)f(the)h
X(source)g(from)f(the)h(_ori)g(field,)151 2454 y(neighbors)338
Xb(#)20 b(now)g(call)g(the)f(main)h(procedure,)151 2494
Xy(ptop)438 b(#)20 b(print)g(the)g(array)f(with)h(the)f(found)h
X(identifiers)174 2585 y Fv(On)10 b(each)i Fn(M\351)f
XFv(system)g(having)f(an)h Fm(ETHERNET)i Fv(interface)e(this)f
X(procedure)g(call)h(returns)f(an)i(array)f(with)112 2635
Xy(the)e(host)g(identi\256ers)g(of)g(all)h(\()p Fm(ETHERNET)p
XFv(\))h(neighbors.)i(Note)d(that,)f(by)h(replacing)f(the)h(two)f(key)g
X(generating)878 2790 y(28)p eop
X%%Page: 29 3
X29 28 bop 112 7 a Fv(procedures,)20 b(the)e(exploration)e(algorithm)h
X(would)g(also)h(work)f(for)h(any)g(channel)g(infrastructure)f(that)112
X57 y(supports)9 b(broadcasting)g(\(not)g(only)h Fm(ETHERNET)p
XFv(\).)174 107 y(It)h(was)h(not)f(our)f(goal)i(to)e(show)i(a)g
X(complete)f(and)h(robust)e(example)j(of)e(messenger)i(coding,)e(and)g
X(thus)112 157 y(it)j(should)h(be)g(noted)g(that)g(the)g(presented)h
XFn(neighbors)f Fv(procedure)g(is)h(not)e(perfect)i(although)e(it)h
X(will)112 206 y(work)e(for)g(many)h(environments.)24
Xb(T)m(wo)14 b(limitations)e(are)i(obvious:)20 b(First,)14
Xb(we)g(assume)h(that)e(the)g(list)g(of)112 256 y(neighboring)e(hosts)j
X(is)g(small)g(enough)f(such)h(that)g(it)f(\256ts,)i(together)e(with)g
X(the)h(code)h(of)f(the)f(exploration)112 306 y(messenger)n(,)g(inside)d
X(a)h(single)g Fm(ETHERNET)h Fv(frame.)18 b(And)11 b(second,)h(the)f
X(usage)g(example)h(assumes)g(that)f(it)f(is)112 356 y(always)h(the)h
X(\256rst)f Fm(ETHERNET)i Fv(interface)f(that)f(should)g(be)h(used)f(to)
Xg(return)g(the)h(update)f(messengers.)21 b(This)112 406
Xy(has)10 b(to)g(be)g(changed)h(for)f(hosts)g(with)f(more)i(than)e(one)i
XFm(ETHERNET)h Fv(address.)k(Enjoy)9 b(hacking!)174 456
Xy(When)14 b(the)f Fn(neighbors)g Fv(procedure)h(is)g(written)e(as)i(an)
Xg(executable)h(string)d(it)h(occupies)h(less)g(than)112
X505 y(200)d(bytes!)21 b(The)13 b(small)f(size)h(of)f(such)g(a)h
X(utility)d(procedure)i(and)g(the)h(spirit)d(of)i(code)h(sharing)f(and)g
X(reuse)112 555 y(suggest)i(that)g Fn(M\351)h Fv(platforms)g(should)e
X(collect)i(such)g(procedures)g(and)g(make)h(them)g(globally)d
X(available)112 605 y(under)c(well-known)g(names.)112
X743 y Fq(4)58 b(A)14 b(First)g(Implementation)j(of)58
Xb Fl(M\351)112 835 y Fn(M\351)7 b Fv(has)i(been)f(implemented)g(and)f
X(is)h(available)g(for)f(several)i(U)p Fm(NIX)f Fv(platforms)f(as)h
X(well)g(as)g(for)f Fm(MS)p Fv(/)p Fm(DOS)p Fv(.)15 b(The)112
X885 y(supported)8 b(network)g(interfaces)i(currently)e(include)g
XFm(UDP)i Fv(for)f(U)p Fm(NIX)g Fv(and)h Fm(ETHERNET)g
XFv(for)f(S)p Fm(UN)p Fv(OS4.)15 b(In)9 b(all)112 935
Xy(environments)h(it)g(is)h(possible)f(to)h(use)g(the)g(console)g
X(\(stdout\))e(as)j(output)d(channel.)18 b(The)12 b(list)e(of)h
X(supported)112 985 y(environments:)p 461 1021 876 2 v
X460 1070 2 50 v 513 1055 a(Hardware)p 701 1070 V 50 w(Operating)f
X(System)p 1049 1070 V 50 w(Compiler)p 1336 1070 V 461
X1072 876 2 v 461 1082 V 460 1132 2 50 v 514 1117 a(Sun)g(sparc)p
X701 1132 V 50 w(SunOS)g(4.1.3)p 1049 1132 V 138 w(acc)p
X1336 1132 V 460 1182 V 701 1182 V 1049 1182 V 1075 1167
Xa(gcc)h(2.5.8)p 1336 1182 V 460 1231 V 701 1231 V 726
X1216 a(Solaris)f(2.1)p 1049 1231 V 171 w(SP)l(ARCworks)p
X1336 1231 V 461 1233 876 2 v 460 1283 2 50 v 539 1268
Xa(Dec)i(risc)p 701 1283 V 49 w(Ultrix)d(V4.3)p 1049 1283
XV 157 w(c89)p 1336 1283 V 461 1285 876 2 v 460 1334 2
X50 v 510 1319 a(Dec)i(alpha)p 701 1334 V 49 w(OSF/1)f(V1.3)p
X1049 1334 V 148 w(gcc)h(2.5.8)p 1336 1334 V 461 1336
X876 2 v 460 1386 2 50 v 486 1371 a(Intel)f(80x86)p 701
X1386 V 48 w(MS/DOS)g(5.0)p 1049 1386 V 132 w(T)o(urboC++)g(1.0)p
X1336 1386 V 461 1387 876 2 v 112 1449 a(V)-5 b(ersion)6
Xb Fn(0.1)g Fv(\(May)g(1994\))g(of)g(this)g(implementation)f(can)h(be)g
X(fetched)g(by)g(anonymous)g Fm(FTP)g Fv(\()p Fn(cui.unige.ch,)112
X1499 y(129.194.70.1)p Fv(\))j(in)h(the)h(directory)e
XFn(/pub/m0)p Fv(.)16 b(It)10 b(contains)g(the)h(C-sources)g(for)f(the)g
X(following)e(four)112 1549 y(programs:)112 1622 y Fn(m0strip)232
X1672 y Fv(This)17 b(is)g(a)g(\256lter)g(that)f(removes)i(comments)f
X(and)g(all)g(super\257uous)f(white)h(spaces)h(from)f
XFm(ASCII)215 1722 y Fn(M\351)10 b Fv(source)h(code.)16
Xb(Moreover)n(,)11 b(this)e(pre-processor)h(understands)g(two)g(include)
Xf(directives:)215 1800 y Fn(#include)h Fv(\256lespec)307
X1850 y(The)g(given)f(\256le)i(is)e(inserted)h(into)e(the)i(stream)h(of)
Xe Fn(M\351)h Fv(commands.)16 b(The)11 b(included)e(\256le)h(is)g(also)
X307 1900 y(stripped.)215 1961 y Fn(#includestring)f Fv(\256lespec)307
X2011 y(This)e(directive)g(behaves)h(like)f(the)h(previous)e
XFn(#include)h Fv(with)g(the)g(exception)g(that)g(the)h(\256le')n(s)307
X2061 y(content)j(is)h(included)f Fp(as)i(string)p Fv(:)k(critical)11
Xb(characters)j(\(like)d(double)h(quote)f(and)h(backslash\))307
X2111 y(are)17 b(correctly)g(escaped.)37 b(The)17 b Fn(#includestring)f
XFv(directive)g(is)h(useful)g(for)f(parts)h(of)307 2161
Xy(programs)10 b(that)f(have)i(to)e(be)i(available)f(as)h(strings,)e
X(but)h(that)f(one)h(would)g(like)f(to)h(write)f(down)307
X2210 y(in)g(the)h(ordinary)f(way)i(\(with)e(comments)i(etc\).)215
X2289 y(Both)g(directives)g(can)i(be)f(nested)g(arbitrarily)m(.)18
Xb(Note)12 b(that)f(they)g(must)h(start)f(at)h(the)g(beginning)e(of)h(a)
X215 2338 y(line)f(and)g(that)g(there)g(may)h(be)g(no)f(white)f(spaces)j
X(after)e(the)g(number)h(sign.)112 2417 y Fn(m0)20 b Fv(\(U)p
XFm(NIX)10 b Fv(only\))215 2466 y(This)j(is)f(a)h(full)f
XFn(M\351)g Fv(platform)g(that)g(runs)g(as)i(an)e(U)p
XFm(NIX)h Fv(process)g(in)f(user)h(space.)24 b(Currently)11
Xb(it)h(can,)215 2516 y(depending)k(on)g(the)g(supported)g(interfaces,)i
X(intercept)e(and)h(submit)e(messengers)j(via)f Fm(UDP)g
XFv(and)215 2566 y Fm(ETHERNET)p Fv(.)g(It)9 b(is)g(a)h(stand-alone)e
X(program)h(where)h(the)f(only)f(interaction)g(possible)h(is)g(via)g
X(received)215 2616 y(and)g(submitted)f(messengers.)16
Xb(Note)9 b(that)f(this)h(program)f(reads)i(in)e(the)h
XFn(startup.m0)f Fv(\256le)h(\(which)215 2666 y(itself)h(includes)f(the)
Xi Fn(longdict.m0)e Fv(\256le\).)15 b(For)10 b(this,)g(it)f(calls)i(the)
Xf Fn(m0strip)g Fv(program.)878 2790 y(29)p eop
X%%Page: 30 4
X30 29 bop 112 7 a Fn(m0uc)20 b Fv(\(U)p Fm(NIX)10 b Fv(only\))215
X57 y Fn(m0uc)d Fv(is)g(a)h Fp(console)f Fv(\(or)f(front-end\))g
X(program)h(that)f(can)i(inject)f(messengers)h(via)f Fm(UDP)h
XFv(into)e(a)h(running)215 107 y Fn(M\351)j Fv(platform.)15
Xb(See)c(also)f(section)g(4.1.)112 187 y Fn(m0c)215 237
Xy Fv(This)d(is)g(a)g(similar)g(console)f(program,)i(but)e(the)h
X(front-end)f(resides)h Fp(together)f Fv(with)g(the)h
XFn(M\351)g Fv(interpreter)215 287 y(in)j(the)h(same)h(process)f
X(address)g(space.)17 b(Thus,)12 b(even)f(if)f(no)g(network)g
X(interfaces)h(are)g(available)g(one)215 337 y(can)g(interactively)e
X(play)h(with)f(the)h Fn(M\351)h Fv(language.)174 415
Xy(The)f(programs)g(in)g(this)f(\256rst)h(implementation)f(are)h
X(prototypes.)k(The)d(complete)f(package)h(comprises)112
X465 y(about)e(7500)h(lines)f(of)h Fm(ANSI)p Fv(-C,)h(the)f(U)p
XFm(NIX)h Fv(binary)e(of)h(the)g(platform)g Fn(m0)g Fv(has)h(a)f(size)h
X(of)f(about)g(100)g(kbytes.)112 514 y(The)f(code)h(has)g(currently)e
X(not)g(been)i(tuned)e(or)h(optimized.)14 b(Nevertheless)c(we)f(can)h
X(report)f(on)f(a)i(promising)112 564 y(\256gure)i(where)h(a)g(sliding)d
X(window)i(protocol)f(on)h(top)f(of)h(ethernet)h(was)g(used)f(to)g
X(transfer)h(data)f(from)h(one)112 614 y Fn(M\351)7 b
XFv(platform)g(to)g(another)h(\(on)f(two)g Fm(SP)m(ARC)p
XFv(-)p Fm(ELC)j Fv(workstations)c(via)h(a)i(common)f
XFm(ETHERNET)h Fv(segment)g(using)112 664 y(1500)h(byte)h(messengers\):)
X18 b(although)10 b(the)h(protocol)f(was)i(fully)e(interpreted,)h(we)h
X(obtained)e(a)i(throughput)112 714 y(of)f(about)g(50)g(kbytes/s.)18
Xb(This)11 b(is)g(not)g(outstanding)e(if)i(compared)i(with)d(the)h
X(widely)g(available)g(optimized)112 764 y Fm(TCPIP)h
XFv(software.)17 b(If)11 b(the)g(same)h(protocol)e(is)g(operated)h(over)
Xg(an)h Fm(UDP)f Fv(channel)g(with)f(8)h(kbyte)f(messengers)112
X813 y(\(but)k(still)g(interpreted)h(in)g Fn(M\351)p Fv(\),)i(we)f
X(obtained)f(a)h(throughput)d(of)i(up)g(to)g(230)g(kbytes/s)g(which)g
X(already)112 863 y(comes)f(closer)g(to)f(what)g(can)i(be)f(obtained)e
X(when)i(implementing)e(a)i(sliding)e(window)g(protocol)g(in)h(user)112
X913 y(space.)j(Although)8 b(these)i(\256gures)f(are)i(modest,)f(they)f
X(are)i(suf)o(\256cient)e(for)h(most)f(non-local)g(data)h(exchanges)112
X963 y(\(due)h(to)f(the)h(limitations)e(of)i(wide-area)h(network)e
X(infrastructures\).)17 b(It)11 b(is)g(especially)g(this)f
X(con\256guration)112 1013 y(where)k(messengers)i(make)g(sense:)23
Xb(in)14 b(a)h(local)f(environment)g(it)f(is)h(easier)i(to)d(control)h
X(\(install\))e(the)i(set)112 1062 y(of)e(supported)f(protocols,)h
X(however)n(,)i(this)e(chance)i(becomes)g(smaller)e(the)h(farer)g(away)g
X(the)f(remote)h(host)112 1112 y(is,)h(and)g(therefore)f(it)g(is)g(more)
Xh(likely)e(that)h(we)h(would)e(like)h(to)g(use)h(a)g(protocol)e(which)h
X(is)g(not)g(remotely)112 1162 y(installed.)24 b(Furthermore,)15
Xb(we)f(expect)h(that)e(the)h(current)f(prototype)f(has)i(a)h
X(considerable)f(optimization)112 1212 y(potential.)112
X1329 y Fo(4.1)50 b(Exploring)11 b(an)h Fi(M\351)g Fo(Platform)h(W)o
X(ith)e(The)i(Console)f(Messenger)112 1407 y Fv(The)e(two)f(programs)h
XFn(m0c)g Fv(and)g Fn(m0uc)f Fv(are)i(\252)p Fn(M\351)f
XFv(front-ends\272)f(for)g(generic)h Fn(M\351)g Fv(platforms.)k(They)d
X(are)f(able)112 1457 y(to)g(send)i(and)f(receive)i(messenger)f(to)f
X(and)g(from)h(a)f(platform,)g(but)g(they)g(are)h(not)f(capable)h(of)f
X(interpreting)112 1507 y Fn(M\351)17 b Fv(code.)39 b(The)19
Xb(two)e(front-end)f(program)i(work)g(by)f(downloading)f(a)i(\252server)
Xh(messenger)r(\272)g(to)f(the)112 1556 y Fn(M\351)10
Xb Fv(platform.)k(This)d(downloaded)e(server)i(will)e(then)h(execute)h
X(arbitrary)e(commands)j(that)d(were)j(typed)d(in)112
X1606 y(by)f(the)h(user)n(.)15 b(Note)9 b(that)g(the)g(platform)f(has)i
X(no)f(notion)e(of)i(a)h(\252console\272:)15 b(it)8 b(is)h(the)g
X(front-end)f(program)h(that)112 1656 y(knows)g(about)h(`its')f(console)
Xh(protocol)f(and)h(that)g(instructs)f(the)h(platform)g(how)f(to)h
X(perform)g(it.)174 1706 y(The)15 b(front-end)d(program)i(goes)h
X(through)d(the)i(following)e(steps.)27 b(First,)15 b(the)f(front-end)f
X(downloads)112 1756 y(a)h(\252server)h(messenger)r(\272)g(into)d(the)i
X(platform.)25 b(Then,)16 b(it)d(enters)h(a)g(loop)f(where)h(it)f(waits)
Xh(for)f(the)h(user)g(to)112 1806 y(type)c Fn(M\351)h
XFv(commands.)19 b(The)11 b(lines)g(typed)f(in)h(by)f(the)h(user)g(are)h
X(encapsulated)g(inside)e(a)h(vector)g(messenger)112 1855
Xy(that)j(passes)i(them)e(to)g(the)h(previously)e(installed)h
X(\252server)r(\272)h(process.)30 b(It)14 b(is)g(the)h(server)g(process)
Xg(inside)112 1905 y(the)d(messenger)h(platform)e(that)h(executes)h(the)
Xf Fn(M\351)g Fv(commands.)22 b(Some)13 b(commands)g(may)g(have)g(the)f
X(side)112 1955 y(ef)o(fect)g(that)f(they)g(return)g(a)h(result)f(to)g
X(the)g(front-end)f(program)i(for)f(displaying)e(it.)19
Xb(The)12 b(net)f(ef)o(fect)i(is)e(that)112 2005 y(the)h(console)h
X(looks)f(very)g(like)g(the)h Fn(executive)f Fv(mode)h(of)g(a)g(P)p
XFm(OST)p Fv(S)p Fm(CRIPT)i Fv(printer:)j(the)13 b(user)g(has)g(the)112
X2055 y(impression)c(of)h(\252talking\272)g(to)f(the)h(interpreter)n(.)
X174 2104 y(Note)h(that)f(both)h(programs,)g Fn(m0c)g
XFv(and)h Fn(m0uc)p Fv(,)f(get)g(the)g(code)h(for)f(the)g(\252command)h
X(server)r(\272)g(from)f(the)112 2154 y(\256le)h Fn(cons)p
X279 2154 13 2 v 15 w(ini.m0)p Fv(.)20 b(Thus,)14 b(they)d(of)o(fer)i
X(identical)e(console)h(interfaces.)22 b(The)13 b(console)f(of)o(fers)h
X(\(beside)112 2204 y(the)d Fn(M\351)g Fv(instructions\))e(\256ve)i
X(additional)f(commands:)215 2282 y Fn(print)21 b Fv(Send)10
Xb(to)g(the)g(front-end)f(program)h(a)g(string)f(to)h(display)m(.)215
X2346 y Fn(input)21 b Fv(W)m(ait)9 b(for)h(a)h(line)f(from)g(the)g
X(console)g(and)g(return)g(the)g(string)f(\(or)h Fn(null)g
XFv(if)f(empty\).)215 2410 y Fn(ptop)21 b Fv(Print)9 b
X(\(non-destructively\))e(the)j(top-most)f(operand.)215
X2474 y Fn(stack)21 b Fv(Print)9 b(\(non-destructively\))e(the)j
X(content)g(of)g(the)g(operand)g(stack.)215 2538 y Fn(quit)21
Xb Fv(T)m(erminate)11 b(the)f(console)g(server)n(.)112
X2616 y(Moreover)n(,)f(all)g(de\256nitions)e(from)i Fn(longdict)f
XFv(are)i(directly)d(available)i(without)e(explicit)g(loading)h(of)h
X(this)112 2666 y(dictionary)f(onto)h(the)i(dict)e(stack.)878
X2790 y(30)p eop
X%%Page: 31 5
X31 30 bop 174 7 a Fv(The)16 b(example)h(session)f(in)f(\256gure)h(3)g
X(shows)g(some)g(of)g(the)g(possibilities)d(of)o(fered)j(by)g(the)g
X(console)112 57 y(program)10 b(and)h(the)f Fn(M\351)h
XFv(interpreter)n(.)16 b(The)11 b(\256rst)f(group)g(of)h(commands)g
X(shows)g(a)g(simple)g(integer)f(addition.)112 203 y Fu(***)23
Xb(Console)j(server)e(process)i(OK)d(\(use)h(`quit')h(to)e(shut)h(down)g
X(the)g(server)h(process\))112 294 y(M0>)e(123)112 340
Xy(M0<1>)h(5678)112 386 y(M0<2>)g(stack)112 431 y(---)f(top)112
X477 y(int)90 b(5678)112 523 y(int)g(123)112 568 y(---)23
Xb(bottom)112 614 y(M0<2>)h(+)112 660 y(M0<1>)g(stack)112
X705 y(---)f(top)112 751 y(int)90 b(5801)112 797 y(---)23
Xb(bottom)112 842 y(M0<1>)h(clear)112 888 y(M0>)112 934
Xy(M0>)f(5)g({)g(_cte)h(")f("+)g(print)i(500000)f(sleep)h(})e(L)g
X(\\0a\\)h(print)112 979 y(0)e(1)h(2)g(3)g(4)112 1025
Xy(M0>)112 1071 y(M0>)g(quit)112 1162 y(***)g(server)i(process)g(exits)g
X(...)269 1340 y Fv(Figure)10 b(3:)k(An)d(example)g(of)f(an)g
X(interactive)g Fn(M\351)g Fv(session)g(via)g(the)g(console)h(program.)
X112 1440 y(Note)f(that)f(the)i(prompt)e(displays)g(the)i(number)f(of)g
X(items)g(on)g(the)g(operand)h(stack:)k(the)10 b Fn(stack)g
XFv(command)112 1490 y(is)k(used)h(from)f(time)h(to)f(time)g(to)g(show)h
X(the)f(state)h(of)f(the)h(stack.)29 b(The)15 b Fn(clear)f
XFv(command,)j(de\256ned)e(in)112 1540 y Fn(longdict)p
XFv(,)10 b(removes)h(all)e(items)i(from)f(the)g(operand)g(stack.)174
X1589 y(The)g(second)h(group)e(of)g(commands)i(demonstrates)f(an)g
X(integer)g(loop.)k(The)c(loop)f(counter)h(is,)g(on)f(each)112
X1639 y(iteration,)h(converted)g(to)h(an)g(integer)n(.)17
Xb(A)11 b(space)h(character)h(is)d(appended)i(and)f(this)f(string)g
X(printed.)16 b(Then,)112 1689 y(we)9 b(sleep)g(for)f(half)g(a)h(second)
Xg(before)g(the)g(loop)e(restarts.)15 b(At)8 b(the)h(end)f(we)i(send)e
X(a)i(newline)e(character)i(to)e(the)112 1739 y(console.)15
Xb(The)10 b(last)g Fn(quit)f Fv(instruction)f(terminates)i(the)f
X(session)h(\(and)g(the)g(console)f(front-end)g(program\).)112
X1849 y Fh(Messenger)g(download:)40 b Fv(Beside)8 b(interactively)e
X(entering)h Fn(M\351)g Fv(commands)h(it)f(is)g(also)g(possible)g(to)g
X(inject,)112 1899 y(via)i(the)g(console)h(program,)g(an)g
XFn(M\351)f Fv(program)g(stored)h(in)f(a)h(\256le.)15
Xb(The)10 b Fn(m0uc)f Fv(as)i(well)e(as)h(the)f Fn(m0c)h
XFv(program)112 1949 y(accept)16 b(as)f(ar)o(gument)g(a)h(\256lename:)24
Xb(the)15 b(console)g(sends)g(the)g(\256le)g(to)f(the)h(server)g
X(process)g(after)h(having)112 1999 y(received)d(the)f(con\256rmation)g
X(that)f(the)i(server)g(completed)f(its)g(installation.)19
Xb(After)12 b(having)g(downloaded)112 2048 y(the)c(\256le,)i(the)f
X(console)g(enters)g(its)f(ordinary)g(main)h(loop)f(waiting)g(for)g(the)
Xh(user)g(to)g(type)f(in)h(a)g(command)h(line.)112 2098
Xy(The)f(server)h(executes)g(the)f(received)g(string)f(and)h(executes)h
X(it)e(as)i(it)e(were)i(an)f(ordinary)f(command)i(line.)k(By)112
X2148 y(including)8 b(a)j(submit)e(operation)g(in)h(the)g(\256le)g(it)g
X(is)g(possible)f(to)h(spawn)g(a)h(new)g(messenger)n(.)174
X2198 y(Note)c(that)g(the)h(program)f(to)g(download)g(must)g(\256t)h
X(into)e(a)i(single)f(datagram)i(\(used)e(to)g(inject)g(the)h(program)
X112 2248 y(into)g(the)j(platform\).)j Fm(UDP)d Fv(datagrams,)g(for)f
X(example,)h(must)f(be)h(smaller)f(than)g(8)g(kbytes.)112
X2387 y Fq(5)58 b(Open)15 b(Points)112 2480 y Fn(M\351)c
XFv(is)g(a)g(\256rst)g(step:)16 b(it)11 b(is)g(designed)f(to)h(meet)h
X(requirements)f(which)g(are)h(recognized)f Fp(today)g
XFv(when)g(we)g(try)112 2530 y(to)f(imagine)i(a)g(completely)f
X(messenger)o(-based)i(communication)e(environment.)17
Xb(And)11 b(one)h(can)g(also)f(say)112 2580 y(that,)f(after)g(this)f
X(\256rst)h(design,)g(we)h(already)g(know)e(about)h(weak)h(and)f
X(incomplete)g(points)f(of)h Fn(M\351)p Fv(.)15 b(Some)c(of)112
X2629 y(them)f(are)h(brie\257y)f(mentioned)f(in)h(the)g(following)e
X(list.)878 2790 y(31)p eop
X%%Page: 32 6
X32 31 bop 112 7 a Fh(Fragmentation)9 b(support:)21 b
XFv(The)d(current)g(external)f(representation)g(of)g(messengers)i(is)f
X(not)f(speci\256c)215 57 y(about)d(size)i(limitations;)e(however)n(,)i
X(the)f Fn(M\351)f Fv(environment)g(does)h(not)f(hide)g(the)g(aspect)i
X(that)e(the)215 107 y(underlying)d(datagram)i(transport)e
X(infrastructure)h(imposes)g(such)h(limits.)21 b(One)13
Xb(should)e(envisage)215 157 y(to)j(modify)f(the)i(external)f
X(representation)f(in)h(order)g(to)g(include)f(a)i(fragmentation)e
X(protocol)g(that)215 206 y(permits)d(completely)g(transparent)g
X(submission)f(of)h(arbitrary)f(lar)o(ge)i(messengers.)112
X289 y Fh(Concurr)o(ency)h(transpar)o(ency:)22 b Fv(The)15
Xb(mentioned)g(prototype)e(implementation)g(of)i Fn(M\351)f
XFv(adopts)g(a)i(rude)215 339 y(run-to-termination)11
Xb(scheduling.)27 b(This)14 b(is)g(not)g(a)h(suitable)e(policy)m(,)i(of)
Xf(course.)28 b(However)n(,)17 b(this)215 389 y(is)f(simple)f(to)g
X(change)h(in)f(order)g(to)g(better)g(match)h(the)f(semantics)i(of)e
XFn(M\351)g Fv(which)g(promises)h(the)215 439 y(independent)10
Xb(execution)f(of)h(messengers.)112 522 y Fh(Hardwar)o(e)h(parallelism:)
X19 b Fv(No)11 b(thorough)e(study)h(has)i(been)f(made)i(today)d(if)h
X(the)f Fn(M\351)h Fv(instruction)e(set)j(and)215 572
Xy(the)j(concept)h(of)f(local)g(and)g(global)f(virtual)g(memory)h(are)h
X(suf)o(\256ciently)f(adapted)g(for)g(ef)o(\256ciently)215
X622 y(exploiting)8 b(the)i(inherent)g(parallelism)f(of)h(messenger)o
X(-based)i(applications.)112 705 y Fh(Resour)o(ce)g(contr)o(ol:)20
Xb Fv(The)15 b(most)e(interesting)f(point)h(is)g(the)h(problem)f(of)g
X(controlling,)f(via)i(messengers,)215 754 y(the)f(resource)g
X(consumption)f(of)g(messengers.)24 b(W)m(e)13 b(envisage)g(to)f
X(introduce)g(into)f Fn(M\351)i Fv(a)g(char)o(ging)215
X804 y(mechanism)f(for)f(memory)g(allocation,)f Fm(CPU)i
XFv(utilization)c(and)j(submission)f(requests.)17 b(It)11
Xb(would)e(be)215 854 y(the)j(task)g(of)g(an)h(execution)e(platform)h
X(to)f(\252cash\272)j(for)e(provided)e(local)i(services,)i(and)e(to)g
X(\252handle\272)215 904 y(dif)o(ferent)e(currencies.)112
X995 y(This)d(list)f(of)h(open)g(points)f(should)g(not)g(make)i(for)o
X(gotten)e(that)h(at)g(the)g(base)h(of)f(messengers)i(is)e(the)g
X(insight)e(that)112 1045 y(a)10 b(single)g(execution)g(environment)f
X(can)i(provide)f(the)g(framework)g(for)g(every)h(imaginable)f
X(protocol.)k(The)112 1095 y(problem)d(is)g(not)g Fp(whether)g
XFv(the)h(messenger)g(mechanism)h(should)e(be)g(used)h(but)f
XFp(how)g Fv(it)g(can)h(be)g(supported)112 1145 y(in)d(an)i(optimal)e
X(way)m(.)112 1284 y Fq(Refer)o(ences)112 1377 y Fv([1])20
Xb(Adobe)11 b(Systems)i(Incorporated,)f(editor)n(.)18
Xb Fp(PostScript)11 b(Language:)18 b(Refer)n(ence)c(Manual)p
XFv(.)k(Addison-)181 1427 y(W)m(esley)m(,)11 b(\256fteenth)f(edition,)f
X(1990.)112 1510 y([2])20 b(Andrew)10 b(S.)h(T)m(anenbaum.)16
Xb Fp(Modern)10 b(Operating)f(Systems)p Fv(.)16 b(Prentice-Hall,)10
Xb(1992.)112 1593 y([3])20 b(Christian)15 b(F)m(.)i(T)m(schudin.)33
Xb Fp(On)17 b(the)g(Structuring)e(of)h(Computer)g(Communications)p
XFv(.)31 b(PhD)17 b(thesis,)181 1643 y(Universite)-16
Xb(\302)11 b(de)g(Gene)-16 b(\301)r(ve,)11 b(1993.)j(The)-16
Xb(\301)r(se)12 b(No)e(2632.)878 2790 y(32)p eop
X%%Trailer
Xend
Xuserdict /end-hook known{end-hook}if
X%%EOF
END_OF_FILE
if test 43988 -ne `wc -c <'M0-5.ps'`; then
    echo shar: \"'M0-5.ps'\" unpacked with wrong size!
fi
# end of 'M0-5.ps'
fi
echo shar: End of archive 10 \(of 12\).
cp /dev/null ark10isdone
MISSING=""
for I in 1 2 3 4 5 6 7 8 9 10 11 12 ; do
    if test ! -f ark${I}isdone ; then
	MISSING="${MISSING} ${I}"
    fi
done
if test "${MISSING}" = "" ; then
    echo You have unpacked all 12 archives.
    rm -f ark[1-9]isdone ark[1-9][0-9]isdone
else
    echo You still need to unpack the following archives:
    echo "        " ${MISSING}
fi
##  End of shell archive.
exit 0
