Newsgroups: comp.sources.unix
From: garrett@athena.sdsu.edu (Garrett D'Amore)
Subject: v28i073: vtprint-2.0 - utility for printing through VT100/clone "aux" port, Part03/03
References: <1.772124471.27041@gw.home.vix.com>
Sender: unix-sources-moderator@gw.home.vix.com
Approved: vixie@gw.home.vix.com

Submitted-By: garrett@athena.sdsu.edu (Garrett D'Amore)
Posting-Number: Volume 28, Issue 73
Archive-Name: vtprint-2.0/part03

#! /bin/sh
# This is a shell archive.  Remove anything before this line, then unpack
# it by saving it into a file and typing "sh file".  To overwrite existing
# files, type "sh file -c".  You can also feed this as standard input via
# unshar, or by typing "sh <file", e.g..  If this archive is complete, you
# will see the following message at the end:
#		"End of archive 3 (of 3)."
# Contents:  FAQ.ps vtprint.c vtprint.ps
# Wrapped by vixie@gw.home.vix.com on Mon Jun 20 07:59:58 1994
PATH=/bin:/usr/bin:/usr/ucb ; export PATH
if test -f 'FAQ.ps' -a "${1}" != "-c" ; then 
  echo shar: Will not clobber existing file \"'FAQ.ps'\"
else
echo shar: Extracting \"'FAQ.ps'\" \(28511 characters\)
sed "s/^X//" >'FAQ.ps' <<'END_OF_FILE'
X%!PS-Adobe-3.0
X%%Creator: groff version 1.09
X%%CreationDate: Sun Jun 19 21:52:15 1994
X%%DocumentNeededResources: font Times-Bold
X%%+ font Times-Italic
X%%+ font Times-Roman
X%%DocumentSuppliedResources: procset grops 1.09 0
X%%Pages: 6
X%%PageOrder: Ascend
X%%Orientation: Portrait
X%%EndComments
X%%BeginProlog
X%%BeginResource: procset grops 1.09 0
X/setpacking where{
Xpop
Xcurrentpacking
Xtrue setpacking
X}if
X/grops 120 dict dup begin
X/SC 32 def
X/A/show load def
X/B{0 SC 3 -1 roll widthshow}bind def
X/C{0 exch ashow}bind def
X/D{0 exch 0 SC 5 2 roll awidthshow}bind def
X/E{0 rmoveto show}bind def
X/F{0 rmoveto 0 SC 3 -1 roll widthshow}bind def
X/G{0 rmoveto 0 exch ashow}bind def
X/H{0 rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
X/I{0 exch rmoveto show}bind def
X/J{0 exch rmoveto 0 SC 3 -1 roll widthshow}bind def
X/K{0 exch rmoveto 0 exch ashow}bind def
X/L{0 exch rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
X/M{rmoveto show}bind def
X/N{rmoveto 0 SC 3 -1 roll widthshow}bind def
X/O{rmoveto 0 exch ashow}bind def
X/P{rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
X/Q{moveto show}bind def
X/R{moveto 0 SC 3 -1 roll widthshow}bind def
X/S{moveto 0 exch ashow}bind def
X/T{moveto 0 exch 0 SC 5 2 roll awidthshow}bind def
X/SF{
Xfindfont exch
X[exch dup 0 exch 0 exch neg 0 0]makefont
Xdup setfont
X[exch/setfont cvx]cvx bind def
X}bind def
X/MF{
Xfindfont
X[5 2 roll
X0 3 1 roll 
Xneg 0 0]makefont
Xdup setfont
X[exch/setfont cvx]cvx bind def
X}bind def
X/level0 0 def
X/RES 0 def
X/PL 0 def
X/LS 0 def
X/PLG{
Xgsave newpath clippath pathbbox grestore
Xexch pop add exch pop
X}bind def
X/BP{
X/level0 save def
X1 setlinecap
X1 setlinejoin
X72 RES div dup scale
XLS{
X90 rotate
X}{
X0 PL translate
X}ifelse
X1 -1 scale
X}bind def
X/EP{
Xlevel0 restore
Xshowpage
X}bind def
X/DA{
Xnewpath arcn stroke
X}bind def
X/SN{
Xtransform
X.25 sub exch .25 sub exch
Xround .25 add exch round .25 add exch
Xitransform
X}bind def
X/DL{
XSN
Xmoveto
XSN
Xlineto stroke
X}bind def
X/DC{
Xnewpath 0 360 arc closepath
X}bind def
X/TM matrix def
X/DE{
XTM currentmatrix pop
Xtranslate scale newpath 0 0 .5 0 360 arc closepath
XTM setmatrix
X}bind def
X/RC/rcurveto load def
X/RL/rlineto load def
X/ST/stroke load def
X/MT/moveto load def
X/CL/closepath load def
X/FL{
Xcurrentgray exch setgray fill setgray
X}bind def
X/BL/fill load def
X/LW/setlinewidth load def
X/RE{
Xfindfont
Xdup maxlength 1 index/FontName known not{1 add}if dict begin
X{
X1 index/FID ne{def}{pop pop}ifelse
X}forall
X/Encoding exch def
Xdup/FontName exch def
Xcurrentdict end definefont pop
X}bind def
X/DEFS 0 def
X/EBEGIN{
Xmoveto
XDEFS begin
X}bind def
X/EEND/end load def
X/CNT 0 def
X/level1 0 def
X/PBEGIN{
X/level1 save def
Xtranslate
Xdiv 3 1 roll div exch scale
Xneg exch neg exch translate
X0 setgray
X0 setlinecap
X1 setlinewidth
X0 setlinejoin
X10 setmiterlimit
X[]0 setdash
X/setstrokeadjust where{
Xpop
Xfalse setstrokeadjust
X}if
X/setoverprint where{
Xpop
Xfalse setoverprint
X}if
Xnewpath
X/CNT countdictstack def
Xuserdict begin
X/showpage{}def
X}bind def
X/PEND{
Xclear
Xcountdictstack CNT sub{end}repeat
Xlevel1 restore
X}bind def
Xend def
X/setpacking where{
Xpop
Xsetpacking
X}if
X%%EndResource
X%%IncludeResource: font Times-Bold
X%%IncludeResource: font Times-Italic
X%%IncludeResource: font Times-Roman
Xgrops begin/DEFS 1 dict def DEFS begin/u{.001 mul}bind def end/RES 72
Xdef/PL 792 def/LS false def/ENC0[/asciicircum/asciitilde/Scaron/Zcaron
X/scaron/zcaron/Ydieresis/trademark/quotesingle/.notdef/.notdef/.notdef
X/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
X/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
X/.notdef/.notdef/space/exclam/quotedbl/numbersign/dollar/percent
X/ampersand/quoteright/parenleft/parenright/asterisk/plus/comma/hyphen
X/period/slash/zero/one/two/three/four/five/six/seven/eight/nine/colon
X/semicolon/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N/O
X/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright/circumflex
X/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/s/t/u/v/w/x/y
X/z/braceleft/bar/braceright/tilde/.notdef/quotesinglbase/guillemotleft
X/guillemotright/bullet/florin/fraction/perthousand/dagger/daggerdbl
X/endash/emdash/ff/fi/fl/ffi/ffl/dotlessi/dotlessj/grave/hungarumlaut
X/dotaccent/breve/caron/ring/ogonek/quotedblleft/quotedblright/oe/lslash
X/quotedblbase/OE/Lslash/.notdef/exclamdown/cent/sterling/currency/yen
X/brokenbar/section/dieresis/copyright/ordfeminine/guilsinglleft
X/logicalnot/minus/registered/macron/degree/plusminus/twosuperior
X/threesuperior/acute/mu/paragraph/periodcentered/cedilla/onesuperior
X/ordmasculine/guilsinglright/onequarter/onehalf/threequarters
X/questiondown/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE
X/Ccedilla/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
X/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
X/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute/Thorn
X/germandbls/agrave/aacute/acircumflex/atilde/adieresis/aring/ae/ccedilla
X/egrave/eacute/ecircumflex/edieresis/igrave/iacute/icircumflex/idieresis
X/eth/ntilde/ograve/oacute/ocircumflex/otilde/odieresis/divide/oslash
X/ugrave/uacute/ucircumflex/udieresis/yacute/thorn/ydieresis]def
X/Times-Roman@0 ENC0/Times-Roman RE/Times-Italic@0 ENC0/Times-Italic RE
X/Times-Bold@0 ENC0/Times-Bold RE
X%%EndProlog
X%%Page: 1 1
X%%BeginPageSetup
XBP
X%%EndPageSetup
X/F0 12/Times-Bold@0 SF(The vtprint F)245.142 123 Q -.54(AQ)-1.08 G/F1 10
X/Times-Italic@0 SF(Garr)253.515 147 Q(ett D'Amor)-.37 E(e)-.37 E(<garr)
X227.675 159 Q(ett@sciences.sdsu.edu>)-.37 E/F2 10/Times-Roman@0 SF
X(San Die)233.695 177 Q(go State Uni)-.15 E -.15(ve)-.25 G(rsity).15 E
X-1.11(Ve)265.225 189 S(rsion 0.9)1.11 E(June 19, 1994)260.085 201 Q F1
X(ABSTRA)264.535 237 Q(CT)-.3 E F2 .325(This document attempts to addres\
Xs some of the most common questions relating to)133 264.6 R 1.108
X(the vtprint program.)108 276.6 R(Ho)6.108 E(we)-.25 E -.15(ve)-.25 G
X1.908 -.4(r, t).15 H 1.108(his document is still v).4 F 1.109
X(ery much under de)-.15 F -.15(ve)-.25 G 1.109(lopment, so).15 F .016
X(there may be signi\214cant omissions or errors.)108 288.6 R .016
X(The author apologizes for an)5.016 F 2.515(ys)-.15 G .015
X(uch errors or)-2.515 F .05
X(omissions, and kindly requests that the reader pass on an)108 300.6 R
X2.55(yc)-.15 G .05(orrections or requests for clar)-2.55 F(-)-.2 E
X(i\214cation or more data to him.)108 312.6 Q(19 June 1994)261.335 768 Q
XEP
X%%Page: 2 2
X%%BeginPageSetup
XBP
X%%EndPageSetup
X/F0 10/Times-Roman@0 SF(-2-)282.17 48 Q/F1 10/Times-Bold@0 SF 15
X(1. About)72 84 R(vtprint)2.5 E F0 7.5(1.1. What)72 130.8 R(is)2.5 E F1
X(vtprint)2.5 E F0(?)A F1(vtprint)97 162 Q F0 .057(is a program that mak)
X2.557 F .057(es it possible to obtain seamless printing from a remote h\
Xost to a printer)-.1 F .649(at home without requiring a TCP/IP connecti\
Xon to the remote machine or root access on the remote)97 174 R 3.102
X(machine. It)97 186 R .602(will communicate o)3.102 F -.15(ve)-.15 G
X3.102(ra).15 G .601(serial line or a re)-.001 F .601(gular netw)-.15 F
X.601(ork connection.)-.1 F .601(Other methods of)5.601 F
X(connection may also be possible.)97 198 Q F1(vtprint)97 213.6 Q F0 .879
X(runs on the remote system \(currently only UNIX-lik)3.379 F 3.379(es)
X-.1 G .879(ystems are supported\).)-3.379 F(Softw)5.88 E .88(are on)-.1
XF(your local machine may v)97 225.6 Q(ary considerably)-.25 E(.)-.65 E
X7.5(1.2. Who)72 253.2 R(writes/supports)2.5 E F1(vtprint)2.5 E F0(?)A
X.04(The author of)97 284.4 R F1(vtprint)2.54 E F0 .04
X(is Garrett D'Amore.)2.54 F .04(He can be reached at <g)5.04 F 2.54
X(arrett@sciences.sdsu.edu>. He)-.05 F(is)2.54 E(acti)97 296.4 Q -.15(ve)
X-.25 G(ly supporting).15 E F1(vtprint)2.5 E F0(users, and is w)2.5 E
X(orking on ne)-.1 E 2.5(wd)-.25 G -2.15 -.25(ev e)-2.5 H(lopment with)
X.25 E F1(vtprint)2.5 E F0(.)A 7.5(1.3. Where)72 324 R(do I get)2.5 E F1
X(vtprint)2.5 E F0(?)A .181(The original source archi)97 355.2 R .481
X-.15(ve f)-.25 H(or).15 E F1(vtprint)2.682 E F0 .182(is a)2.682 F -.25
X(va)-.2 G .182(ilable via ftp.).25 F .182(The current v)5.182 F .182
X(ersion \(as of June 19, 1994\))-.15 F 1.837
X(is 2.0 and can be found at ftp.sdsu.edu in)97 367.2 R F1(/pub/vtprint/)
X4.337 E F0 1.837(as a GNU)4.337 F F1(gzip)4.337 E F0 1.836
X(compressed tar archi)4.337 F -.15(ve)-.25 G(\()97 379.2 Q F1
X(vtprint-2.0.tar)A(.gz)-1 E F0 2.885(\). Currently)B 2.885(,o)-.65 G
X.386(nly a source distrib)-2.885 F .386(ution is being made a)-.2 F -.25
X(va)-.2 G 2.886(ilable. Also,).25 F .386(users with-)2.886 F
X(out ftp capabability should contact the author to mak)97 391.2 Q 2.5
X(ea)-.1 G(uthor arrangements.)-2.5 E 7.5(1.4. What)72 418.8 R
X(do I need to use)2.5 E F1(vtprint)2.5 E F0(?)A -.8(We)97 450 S .796
X(ll, to compile and install it, you need an ANSI C compiler).8 F 5.795
X(.\()-.55 G .795(If your site has it installed already)-5.795 F(,)-.65 E
X(you don')97 462 Q 2.5(tn)-.18 G(eed to w)-2.5 E(orry about this.\))-.1
XE 2.18 -.8(To u)97 477.6 T .581(se it, you need a terminal \(or termina\
Xl emulator\) that supports printer control escape sequences.).8 F .062
X(If you ha)97 489.6 R .362 -.15(ve a t)-.2 H .061(erminal or emulator t\
Xhat supports escape sequences other than those already in listed in).15
XF(the)97 501.6 Q F1(vtprintcap)3.251 E F0 .752
X(\214le, then you will also need to kno)3.251 F 3.252(ww)-.25 G .752
X(hat those sequences are.)-3.252 F .752(\(Check your termi-)5.752 F
X(nal')97 513.6 Q 2.5(sd)-.55 G(ocumentation.\))-2.5 E -1.1(Yo)97 529.2 S
X2.5(ua)1.1 G(lso need \(ob)-2.5 E
X(viously\) a printer and some sort of connection to the remote host.)
X-.15 E F1 15(2. Installing)72 568.8 R(vtprint)2.5 E F0 7.5(2.1. Ho)72
X615.6 R 2.5(wd)-.25 G 2.5(oIi)-2.5 G(nstall)-2.5 E F1(vtprint?)2.5 E F0
X1.931(If you are ha)97 646.8 R 2.231 -.15(ve a)-.2 H(dministrati).15 E
X2.231 -.15(ve p)-.25 H -.25(ow).15 G 1.931
X(ers on your remote host, then please read the \214le).25 F F1(INST)4.43
XE(ALL)-.9 E F0(included in the original source archi)97 658.8 Q .3 -.15
X(ve a)-.25 H(nd follo).15 E 2.5(wt)-.25 G(he directions outlined there.)
X-2.5 E 7.5(2.2. What)72 686.4 R(if I don')2.5 E 2.5(th)-.18 G -2.25 -.2
X(av e)-2.5 H(root access on the remote host?)2.7 E .729(If you don')97
X717.6 R 3.229(th)-.18 G -2.25 -.2(av e)-3.229 H .729
X(root access on the remote host, you can still install)3.429 F F1
X(vtprint)3.23 E F0 8.23(.I)C .73(nstead of using the)-8.23 F("mak)97
X729.6 Q 5.554(ei)-.1 G 3.054(nstall" and "mak)-5.554 F 5.554(ei)-.1 G
X3.053(nstall.man" options, use the options "mak)-5.554 F 5.553(eu)-.1 G
X3.053(serinstall" and "mak)-5.553 F(e)-.1 E(19 June 1994)261.335 768 Q
XEP
X%%Page: 3 3
X%%BeginPageSetup
XBP
X%%EndPageSetup
X/F0 10/Times-Roman@0 SF(-3-)282.17 48 Q 3.162(userinstall.man". This)97
X84 R .662(will place the necessary \214les in a suitable location for a\
X user to use a pri)3.162 F -.25(va)-.25 G(te).25 E(cop)97 96 Q 2.5(yo)
X-.1 G(f)-2.5 E/F1 10/Times-Bold@0 SF(vtprint)2.5 E F0(.)A 7.5(2.3. Ho)72
X123.6 R 2.5(wd)-.25 G 2.5(oIs)-2.5 G(et up my account to use)-2.5 E F1
X(vtprint)2.5 E F0(?)A .469
X(If your system administrator installed a master cop)97 154.8 R 2.969
X(yo)-.1 G(f)-2.969 E F1(vtprint)2.969 E F0 2.969(,t)C .468
X(hen it should be immediately a)-2.969 F -.25(va)-.2 G(il-).25 E .5
X(able for use.)97 166.8 R(Ho)5.5 E(we)-.25 E -.15(ve)-.25 G 1.3 -.4
X(r, i).15 H 3(fy).4 G .5(ou installed a pri)-3 F -.25(va)-.25 G .501
X(te cop).25 F 1.801 -.65(y, o)-.1 H 3.001(ry).65 G .501
X(our system administrator did not install it)-3.001 F
X(in a general location, you will need to change a fe)97 178.8 Q 2.5(we)
X-.25 G -.4(nv)-2.5 G(ironmental v).4 E(ariables.)-.25 E -1.1(Yo)97 194.4
XS 3.009(us)1.1 G .509(hould v)-3.009 F .509(erify that)-.15 F F1
X(vtprint)3.009 E F0 .509(is on your P)3.009 F -1.11(AT)-.92 G 3.009(Ha)
X1.11 G .509(nd that the man pages are locatable some)-3.009 F .508
X(where on)-.25 F .533(your MANP)97 206.4 R -1.11(AT)-.92 G 3.033(H. If)
X1.11 F .534(you installed a personal cop)3.033 F 1.834 -.65(y, y)-.1 H
X.534(ou will also need to set the en).65 F .534(vironmental v)-.4 F
X(ari-)-.25 E 1.55(able VTPRINT to contain the string "-L)97 218.4 R/F2
X10/Times-Italic@0 SF 1.549(<full path to vtprintcap>)4.049 F F0 4.049
X(". Y)B 1.549(ou may wish to add other)-1.1 F .06
X(options to the VTPRINT v)97 230.4 R .06(ariable to set up a def)-.25 F
X.06(ault operating mode for)-.1 F F1(vtprint)2.56 E F0 5.06(.P)C .06
X(lease read the man)-5.06 F(page for details on what options are a)97
X242.4 Q -.25(va)-.2 G(ilable.).25 E F1 15(3. Using)72 282 R(vtprint)2.5
XE F0 7.5(3.1. What)72 328.8 R(help is a)2.5 E -.25(va)-.2 G
X(ilable for using).25 E F1(vtprint)2.5 E F0(?)A 1.122(Besides the)97 360
XR F1 -1.15 -.9(FA Q)3.622 H F0 1.121(that you are reading no)4.521 F
X2.421 -.65(w, t)-.25 H 1.121
X(here are a number of resources that can help you use).65 F F1(vtprint)
X97 372 Q F0 5.131(.F)C .132(irst, there are the pro)-5.131 F .132
X(vided man pages \(e.g.)-.15 F F1(vtprint.1)2.632 E F0 2.632(\). Also)B
X.132(there is a brief synopsis a)2.632 F -.25(va)-.2 G(il-).25 E .195
X(able by typing "vtprint -h".)97 384 R(Finally)5.195 E 2.695(,y)-.65 G
X.195(ou can subscribe to the)-2.695 F F1(vtprint)2.695 E F0 .195
X(mailing list \(where)2.695 F F1(vtprint)2.695 E F0(top-)2.695 E .067
X(ics are discussed, and of)97 396 R .067(\214cial announcements from th\
Xe author are posted\) by sending mail to "vtprint-)-.25 F
X(request@sdsu.edu" with a line "subscribe" in the body of the message.)
X97 408 Q 1.308(Of course, you can still contact the author directly if \
Xyou run into dif)97 423.6 R 1.307(\214culties that these resources)-.25
XF(can')97 435.6 Q 2.5(th)-.18 G(elp you solv)-2.5 E(e.)-.15 E 7.5
X(3.2. Ho)72 463.2 R 2.5(wd)-.25 G 2.5(oIp)-2.5 G(rint te)-2.5 E
X(xt \214les using)-.15 E F1(vtprint)2.5 E F0(?)A -.8(Ty)97 494.4 S .785
X(pe "vtprint).8 F F2(<\214lelist>)3.285 E F0 3.285(". There)B .785
X(are also se)3.285 F -.15(ve)-.25 G .785(ral options a).15 F -.25(va)-.2
XG 3.285(ilable. See).25 F .786(the man page for details on)3.285 F
X(the options.)97 506.4 Q(Alternati)5 E -.15(ve)-.25 G(ly).15 E 2.5(,y)
X-.65 G(ou can use)-2.5 E F1(vtprint)2.5 E F0(as the recei)2.5 E
X(ving end of a pipe.)-.25 E 7.5(3.3. Ho)72 534 R 2.5(wd)-.25 G 2.5(oIp)
X-2.5 G(rint binary \214les using)-2.5 E F1(vtprint)2.5 E F0(?)A F1
X(vtprint)97 565.2 Q F0 .582
X(does not support printing of binary \214les.)3.082 F .581
X(This is because)5.581 F F1(vtprint)3.081 E F0 .581
X(uses certain escape codes,)3.081 F 1.099
X(and binary \214les may contain escape codes which will confuse)97 577.2
XR F1(vtprint)3.599 E F0 1.1(\(and possibly your terminal)3.6 F
X(emulator\).)97 589.2 Q 7.5(3.4. What)72 616.8 R(about PostScript?)2.5 E
X.194(Because PostScript is just ASCII te)97 648 R(xt,)-.15 E F1(vtprint)
X2.694 E F0 .194(can print PostScript to your printer)2.694 F 2.693(.B)
X-.55 G .193(ut it DOES NO)-2.693 F(T)-.4 E(kno)97 660 Q 2.569(wh)-.25 G
X.569 -.25(ow t)-2.569 H 2.569(op).25 G .069(erform con)-2.569 F -.15(ve)
X-.4 G .069(rsion from re).15 F .069(gular te)-.15 F .07
X(xt to PostScript, which means that if your printer is a)-.15 F .528
X(PostScript only printer)97 672 R 3.028(,y)-.4 G .527(ou should set up \
Xsome sort of \214lter to perform ASCII to PostScript con)-3.028 F -.15
X(ve)-.4 G -.2(r-).15 G 2.139(sion before piping it to)97 684 R F1
X(vtprint)4.639 E F0 4.639(.F)C 2.139(or e)-4.789 F 2.139
X(xample, the follo)-.15 F 2.14(wing shell script might be used to send)
X-.25 F(PostScript to a printer from a te)97 696 Q(xt \214le:)-.15 E
X(#!/bin/sh)133 714 Q
X(while [ -n $1 ]; do { enscript $1 | vtprint; shift; })133 726 Q
X(19 June 1994)261.335 768 Q EP
X%%Page: 4 4
X%%BeginPageSetup
XBP
X%%EndPageSetup
X/F0 10/Times-Roman@0 SF(-4-)282.17 48 Q .579(Some time in the)97 84 R/F1
X10/Times-Italic@0 SF(far)3.079 E F0(future,)3.079 E/F2 10/Times-Bold@0
XSF(vtprint)3.079 E F0 .579(may ha)3.079 F .879 -.15(ve P)-.2 H .579
X(ostScript translation added to it if it is requested by).15 F(suf)97 96
XQ(\214ciently man)-.25 E 2.5(yp)-.15 G(eople.)-2.5 E F2 15(4. Using)72
X135.6 R(vtprint with other UNIX-based pr)2.5 E(ograms.)-.18 E F0 7.5
X(4.1. Ho)72 182.4 R 2.5(wd)-.25 G 2.5(oIu)-2.5 G(se)-2.5 E F2(vtprint)
X2.5 E F0(with)2.5 E F2(elm)2.5 E F0(?)A(In)97 213.6 Q F2(elm)5.441 E F0
X5.441(,p)C 2.941(ress "O" \(for)-5.441 F F1(Options)5.441 E F0 5.441
X(\). Then)B 2.941(press "P" \(for)5.441 F F1 2.942(Print mail using)
X5.441 F F0 5.442(\). No)B 5.442(we)-.25 G 2.942(nter "vtprint)-5.442 F
XF1([options])97 225.6 Q F0 2.858(". I')B .658 -.15(ve f)-.5 H .358
X(ound that the option string "-cdq" w).15 F .357(orks well for me.)-.1 F
X(Finally)5.357 E 2.857(,s)-.65 G -2.25 -.2(av e)-2.857 H .357
X(your change by)3.057 F .056(pressing ">".)97 237.6 R(No)5.056 E 2.556
X(wy)-.25 G .056(ou can press "I" to return to the main mail inde)-2.556
XF 2.557(x. Pressing)-.15 F .057("P" on the mail inde)2.557 F(x)-.15 E
X(screen will print the currently selected message using)97 249.6 Q F2
X(vtprint)2.5 E F0(.)A .411(This may not w)97 265.2 R .411(ork with v)-.1
XF .411(ery old v)-.15 F .411(ersions of)-.15 F F2(elm)2.911 E F0 5.411
X(.I)C 2.91(th)-5.411 G .41(as w)-2.91 F(ork)-.1 E .41
X(ed \214nd for me since about v)-.1 F .41(ersion 2.3)-.15 F
X(or so -- I ha)97 277.2 Q -.15(ve)-.2 G(n').15 E 2.5(tt)-.18 G
X(ried it with an)-2.5 E 2.5(yo)-.15 G(lder v)-2.5 E(ersions.)-.15 E 7.5
X(4.2. Ho)72 304.8 R 2.5(wd)-.25 G 2.5(oIu)-2.5 G(se)-2.5 E F2(vtprint)
X2.5 E F0(with)2.5 E F2(mail)2.5 E F0(?)A 2.678(Ia)97 336 S 2.678(mn)
X-2.678 G .178(ot sure if this w)-2.678 F .178(orks for all mailers, b)
X-.1 F .179(ut with the SunOS)-.2 F F2(mail)2.679 E F0 2.679(,i)C 2.679
X(fy)-2.679 G .179(ou use the command "|)-2.679 F F1([mes-)2.679 E(sa)97
X348 Q -.1(ge)-.1 G(-list]).1 E F0(vtprint)3.119 E F1([options])3.119 E
XF0 .619(", the message will be piped to)B F2(vtprint)3.118 E F0 5.618
X(.T)C .618(his strate)-5.618 F .618(gy \(using pipe\) w)-.15 F(orks)-.1
XE(for a great man)97 360 Q 2.5(yp)-.15 G(rograms besides plain old)-2.5
XE F2(mail)2.5 E F0(.)A 7.5(4.3. Ho)72 387.6 R 2.5(wd)-.25 G 2.5(oIu)-2.5
XG(se)-2.5 E F2(vtprint)2.5 E F0(with)2.5 E F2(pine)2.5 E F0(?)A -1.1(Yo)
X97 418.8 S 2.584(ud)1.1 G 2.584(on)-2.584 G .084(ot need to use)-2.584 F
XF2(vtprint)2.585 E F0(with)2.585 E F2(pine)2.585 E F0 5.085(.T)C .085
X(he code for)-5.085 F F2(vtprint)2.585 E F0 .085(is deri)2.585 F -.15
X(ve)-.25 G 2.585(df).15 G .085(rom code the author orig-)-2.585 F
X(inally sa)97 430.8 Q 2.5(wi)-.15 G(n)-2.5 E F2(pine)2.5 E F0 5(!T)C 2.5
X(ou)-5.8 G(se)-2.5 E F2(pine)2.5 E F0 2.5(,s)C
X(elect the "attached-to-ansi" printer option, and print a)-2.5 E -.1(wa)
X-.15 G(y!).1 E 7.5(4.4. Ho)72 458.4 R 2.5(wd)-.25 G 2.5(oIu)-2.5 G(se)
X-2.5 E F2(vtprint)2.5 E F0(with)2.5 E F2(tin)2.5 E F0(?)A -1.1(Yo)97
X489.6 S 2.5(un)1.1 G(eed to edit the "~/.tin/.tinrc" \214le.)-2.5 E
X(There is a line that looks lik)5 E(e:)-.1 E(def)133 507.6 Q
X(ault_printer=)-.1 E F1([something])A F0 -1.1(Yo)97 525.6 S 3.232(un)1.1
XG .732(eed merely change the v)-3.232 F .731(alue of)-.25 F F1
X(something)3.231 E F0 .731(to be "vtprint" along with an)3.231 F 3.231
X(yo)-.15 G .731(ptions you w)-3.231 F .731(ant to)-.1 F 2.775(use. I')97
X537.6 R .575 -.15(ve f)-.5 H .275(ound that).15 F F2(tin)2.775 E F0 .275
X(is much more \214nnick)2.775 F 2.775(ya)-.15 G .275
X(bout the options used by)-2.775 F F2(vtprint)2.775 E F0 2.776(,s)C
X2.776(oIu)-2.776 G .276(se the "-cdq")-2.776 F(options.)97 549.6 Q
X(Incidentally)97 565.2 Q(,)-.65 E F2(vtprint)3.36 E F0 .86(may not w)
X3.36 F .86(ork with v)-.1 F .86(ersions of)-.15 F F2(tin)3.36 E F0 .86
X(prior to 1.2pl2.)3.36 F .86(The problem w)5.86 F .86(as a b)-.1 F .86
X(ug in)-.2 F F2(tin)97 577.2 Q F0 2.5(,a)C(nd is \214x)-2.5 E
X(ed in more recent v)-.15 E(ersions.)-.15 E 7.5(4.5. Ho)72 604.8 R 2.5
X(wd)-.25 G 2.5(oIs)-2.5 G(et up program X to use)-2.5 E F2(vtprint)2.5 E
XF0(?)A 2.571(Ih)97 636 S -2.25 -.2(av e)-2.571 H .071(listed abo)2.771 F
X.371 -.15(ve s)-.15 H .072(ome of the more commonly used programs.).15 F
X.072(If your program isn')5.072 F 2.572(tl)-.18 G .072(isted, and you)
X-2.572 F(think it should be, tell me!)97 648 Q .997
X(The general solution is to check out your program')97 663.6 R 3.496(sd)
X-.55 G .996(ocumentation to see if the printer program it)-3.496 F .96
X(uses is con\214gurable.)97 675.6 R .96(If so, set it to "vtprint".)5.96
XF -1.1(Yo)5.961 G 3.461(um)1.1 G .961
X(ay need to use special options \255\255 the options)-3.461 F
X("-cd" will solv)97 687.6 Q 2.5(em)-.15 G(ost problems for man)-2.5 E
X2.5(yp)-.15 G(eople.)-2.5 E .17(If the printer program can')97 703.2 R
X2.67(tb)-.18 G 2.67(ec)-2.67 G .169
X(hanged, then see if you can use a pipe from your program.)-2.67 F .169
X(If so, just)5.169 F(pipe the output you wish to print to)97 715.2 Q F2
X(vtprint)2.5 E F0(.)A(19 June 1994)261.335 768 Q EP
X%%Page: 5 5
X%%BeginPageSetup
XBP
X%%EndPageSetup
X/F0 10/Times-Roman@0 SF(-5-)282.17 48 Q/F1 10/Times-Bold@0 SF 15(5. Pr)
X72 84 R(oblems)-.18 E F0 7.5(5.1. It)72 130.8 R .153(just doesn')2.653 F
X2.653(tw)-.18 G 2.653(ork! Nothing)-2.753 F .153
X(is output by the printer)2.653 F 2.653(,o)-.4 G 2.654(rt)-2.653 G .154
X(he te)-2.654 F .154(xt appears on my screen b)-.15 F .154
X(ut not on the)-.2 F(printer)97 142.8 Q(.)-.55 E .549
X(This is probably a problem with your communications package.)97 174 R
X.549(In all lik)5.549 F .549(elihood, your communica-)-.1 F 1.084
X(tions program may not support required printer escape codes.)97 186 R
X1.085(Most MS-DOS and W)6.085 F(indo)-.4 E 1.085(ws pack-)-.25 F .215
X(ages do support these codes, b)97 198 R .215(ut the author only kno)-.2
XF .215(ws of TW)-.25 F 2.715(OM)-.1 G .215
X(acintosh programs and ONE Unix)-2.715 F .69(program that support)97 210
XR F1(vtprint)3.19 E F0 5.69(.A)C .69
X(simple thing to do is try "vtprint <some\214le>" by itself.)-2.5 F .69
X(If you get)5.69 F(output, then your terminal emulator will probably w)
X97 222 Q(ork with)-.1 E F1(vtprint)2.5 E F0(.)A .84(Read the \214le)97
X237.6 R F1(COMP)3.34 E -.95(AT)-.74 G F0 .84
X(for details about compatibility with v)4.29 F .84
X(arious communications programs and)-.25 F(terminals.)97 249.6 Q .927
X(Also, mak)97 265.2 R 3.427(es)-.1 G .927
X(ure that your printer is set up correctly)-3.427 F 5.928(.T)-.65 G .928
X(ry printing from a local program, and mak)-6.278 F(e)-.1 E .314
X(sure that the def)97 277.2 R .314(ault is printing de)-.1 F .314
X(vice is set to your printer)-.25 F 5.313(.\()-.55 G .313
X(E.g. PRN: must be the same as the port)-5.313 F
X(your printer is on, under MS-DOS.)97 289.2 Q(5.2.)72 316.8 Q F1
X(vtprint)10 E F0 .186(prints a single line, b)2.686 F .186(ut additiona\
Xl lines are starting at the wrong horizontal location, or aren')-.2 F(t)
X-.18 E(sho)97 328.8 Q(wing up at all! or Wh)-.25 E 2.5(yc)-.05 G(an')
X-2.5 E 2.5(tIg)-.18 G(et an)-2.5 E(ything past the \214rst line or tw)
X-.15 E 2.5(ot)-.1 G 2.5(op)-2.5 G(rint correctly?)-2.5 E -1.1(Yo)97 360
XS 2.848(um)1.1 G .348(ay not ha)-2.848 F .648 -.15(ve C)-.2 H .348
X(R/LF mapping set up correctly on your printer).15 F 2.847(,c)-.4 G .347
X(omm package, host, or)-2.847 F F1(vtprint)2.847 E F0(.)A -1.1(Yo)97 372
XS 2.5(uc)1.1 G(an change the settings in an)-2.5 E 2.5(yo)-.15 G 2.5(ft)
X-2.5 G(hese locations to \214x it.)-2.5 E
X(Check out the "-c" and "-n" switches in the man pages.)97 387.6 Q 7.5
X(5.3. Wh)72 415.2 R 2.5(ya)-.05 G(ren')-2.5 E 2.5(tp)-.18 G
X(age breaks included between documents?)-2.5 E .29
X(Some terminal emulators don')97 446.4 R 2.79(th)-.18 G .29
X(andle formfeeds properly)-2.79 F(.)-.65 E F1 -.92(Te)5.29 G .29
X(lemate 4.12).92 F F0 .29(is kno)2.79 F .29(wn to eat them, and)-.25 F
XF1(Micr)97 458.4 Q(ophone II)-.18 E F0
X(requires a setting change to \214x this problem.)2.5 E 7.5(5.4. Wh)72
X486 R 2.5(yd)-.05 G(oes)-2.5 E F1(vtprint)2.5 E F0 -.1(fa)2.5 G
X(il on big documents?).1 E F1(vtprint)97 517.2 Q F0 .487(may chok)2.987
XF 2.987(eo)-.1 G 2.987(ns)-2.987 G .486(ome lar)-2.987 F .486
X(ge documents if you are not using proper \215o)-.18 F 2.986(wc)-.25 G
X.486(ontrol settings.)-2.986 F(Nor)5.486 E(-)-.2 E(mally)97 529.2 Q
X3.718(,y)-.65 G 1.218(ou should use "hardw)-3.718 F 1.218(are" \215o)-.1
XF 3.718(wc)-.25 G 1.219(ontrol, which is also sometimes kno)-3.718 F
X1.219(wn as CTS/R)-.25 F 1.219(TS \215o)-.6 F(w)-.25 E 2.728
X(control. The)97 541.2 R .228(reason for this is that the printer may f)
X2.728 F .228(all behind the serial line, and the local communi-)-.1 F
X.59(cations program needs to able to tell the host "w)97 553.2 R .591
X(ait for me to catch up with you before you gi)-.1 F .891 -.15(ve m)-.25
XH(e).15 E(an)97 565.2 Q 3.467(ym)-.15 G .966(ore data -- I')-3.467 F
X1.266 -.15(ve n)-.5 H .966(ot got an).15 F 3.466(yr)-.15 G .966
X(oom for it at the moment!"\))-3.466 F -1.1(Yo)5.966 G 3.466(uc)1.1 G
X.966(ould use "XON/XOFF" \215o)-3.466 F(w)-.25 E 1.565(control, b)97
X577.2 R 1.565
X(ut this is discouraged as it may interfere with some other softw)-.2 F
X1.566(are packages which use)-.1 F(CTRL-S and CTRL-Q for other function\
Xs \(such as binary transfer protocols\).)97 589.2 Q 7.5(5.5. Wh)72 616.8
XR 2.5(yd)-.05 G(oes)-2.5 E F1(vtprint)2.5 E F0(echo te)2.5 E
X(xt \(or some te)-.15 E(xt\) to the screen?)-.15 E .013
X(Some communications programs or terminals may send a cop)97 648 R 2.512
X(yo)-.1 G 2.512(ft)-2.512 G .012
X(he printed \214le to the screen as well)-2.512 F 1.442(as the program.)
X97 660 R 1.442(This is le)6.442 F -.05(ga)-.15 G 3.942(li).05 G 3.942
X(nm)-3.942 G(an)-3.942 E 3.942(yc)-.15 G 1.442(ases, since man)-3.942 F
X3.942(yt)-.15 G 1.442(erminal standards don')-3.942 F 3.942(td)-.18 G
X1.442(e\214ne whether)-3.942 F
X(screen echoing when printing should be done or not.)97 672 Q
X(19 June 1994)261.335 768 Q EP
X%%Page: 1 6
X%%BeginPageSetup
XBP
X%%EndPageSetup
X/F0 10/Times-Roman@0 SF(-i-)283.28 48 Q/F1 10/Times-Bold@0 SF -.92(Ta)
X262.905 84 S(ble of Contents).92 E F0(1.)72 117.6 Q F1(About vtprint)
X17.5 E F0 32.5(1.1. What)72 136.8 R(is)2.5 E F1(vtprint)2.5 E F0(?)A
X32.5(1.2. Who)72 156 R(writes/supports)2.5 E F1(vtprint)2.5 E F0(?)A
X32.5(1.3. Where)72 175.2 R(do I get)2.5 E F1(vtprint)2.5 E F0(?)A 32.5
X(1.4. What)72 194.4 R(do I need to use)2.5 E F1(vtprint)2.5 E F0(?)A(2.)
X72 225.6 Q F1(Installing vtprint)17.5 E F0 32.5(2.1. Ho)72 244.8 R 2.5
X(wd)-.25 G 2.5(oIi)-2.5 G(nstall)-2.5 E F1(vtprint?)2.5 E F0 32.5
X(2.2. What)72 264 R(if I don')2.5 E 2.5(th)-.18 G -2.25 -.2(av e)-2.5 H
X(root access on the remote host?)2.7 E 32.5(2.3. Ho)72 283.2 R 2.5(wd)
X-.25 G 2.5(oIs)-2.5 G(et up my account to use)-2.5 E F1(vtprint)2.5 E F0
X(?)A(3.)72 314.4 Q F1(Using vtprint)17.5 E F0 32.5(3.1. What)72 333.6 R
X(help is a)2.5 E -.25(va)-.2 G(ilable for using).25 E F1(vtprint)2.5 E
XF0(?)A 32.5(3.2. Ho)72 352.8 R 2.5(wd)-.25 G 2.5(oIp)-2.5 G(rint te)-2.5
XE(xt \214les using)-.15 E F1(vtprint)2.5 E F0(?)A 32.5(3.3. Ho)72 372 R
X2.5(wd)-.25 G 2.5(oIp)-2.5 G(rint binary \214les using)-2.5 E F1
X(vtprint)2.5 E F0(?)A 32.5(3.4. What)72 391.2 R(about PostScript?)2.5 E
X(4.)72 422.4 Q F1(Using vtprint with other UNIX-based pr)17.5 E(ograms.)
X-.18 E F0 32.5(4.1. Ho)72 441.6 R 2.5(wd)-.25 G 2.5(oIu)-2.5 G(se)-2.5 E
XF1(vtprint)2.5 E F0(with)2.5 E F1(elm)2.5 E F0(?)A 32.5(4.2. Ho)72 460.8
XR 2.5(wd)-.25 G 2.5(oIu)-2.5 G(se)-2.5 E F1(vtprint)2.5 E F0(with)2.5 E
XF1(mail)2.5 E F0(?)A 32.5(4.3. Ho)72 480 R 2.5(wd)-.25 G 2.5(oIu)-2.5 G
X(se)-2.5 E F1(vtprint)2.5 E F0(with)2.5 E F1(pine)2.5 E F0(?)A 32.5
X(4.4. Ho)72 499.2 R 2.5(wd)-.25 G 2.5(oIu)-2.5 G(se)-2.5 E F1(vtprint)
X2.5 E F0(with)2.5 E F1(tin)2.5 E F0(?)A 32.5(4.5. Ho)72 518.4 R 2.5(wd)
X-.25 G 2.5(oIs)-2.5 G(et up program X to use)-2.5 E F1(vtprint)2.5 E F0
X(?)A(5.)72 549.6 Q F1(Pr)17.5 E(oblems)-.18 E F0 32.5(5.1. It)72 568.8 R
X.294(just doesn')2.794 F 2.794(tw)-.18 G 2.794(ork! Nothing)-2.894 F
X.294(is output by the printer)2.794 F 2.794(,o)-.4 G 2.794(rt)-2.794 G
X.294(he te)-2.794 F .294(xt appears on my screen b)-.15 F .293(ut not)
X-.2 F(on the printer)122 580.8 Q(.)-.55 E(5.2.)72 600 Q F1(vtprint)35 E
XF0 .241(prints a single line, b)2.741 F .241
X(ut additional lines are starting at the wrong horizontal location, or)
X-.2 F(aren')122 612 Q 2.525(ts)-.18 G(ho)-2.525 E .025
X(wing up at all! or Wh)-.25 F 2.525(yc)-.05 G(an')-2.525 E 2.525(tIg)
X-.18 G .025(et an)-2.525 F .025(ything past the \214rst line or tw)-.15
XF 2.524(ot)-.1 G 2.524(op)-2.524 G .024(rint correctly?)-2.524 F 32.5
X(5.3. Wh)72 631.2 R 2.5(ya)-.05 G(ren')-2.5 E 2.5(tp)-.18 G
X(age breaks included between documents?)-2.5 E 32.5(5.4. Wh)72 650.4 R
X2.5(yd)-.05 G(oes)-2.5 E F1(vtprint)2.5 E F0 -.1(fa)2.5 G
X(il on big documents?).1 E 32.5(5.5. Wh)72 669.6 R 2.5(yd)-.05 G(oes)
X-2.5 E F1(vtprint)2.5 E F0(echo te)2.5 E(xt \(or some te)-.15 E
X(xt\) to the screen?)-.15 E(19 June 1994)261.335 768 Q EP
X%%Trailer
Xend
X%%EOF
END_OF_FILE
if test 28511 -ne `wc -c <'FAQ.ps'`; then
    echo shar: \"'FAQ.ps'\" unpacked with wrong size!
fi
# end of 'FAQ.ps'
fi
if test -f 'vtprint.c' -a "${1}" != "-c" ; then 
  echo shar: Will not clobber existing file \"'vtprint.c'\"
else
echo shar: Extracting \"'vtprint.c'\" \(20600 characters\)
sed "s/^X//" >'vtprint.c' <<'END_OF_FILE'
X/**************************************************************************
X **************************************************************************
X **                                                                      **
X ** vtprint.c       vtprint C source file                                **
X ** =========                                                            **
X **                                                                      **
X ** Purpose:        Provides printing services to a terminal printer     **
X **                 using terminal escape sequences.                     **
X **                                                                      **
X ** Author:         Garrett D'Amore <garrett@sciences.sdsu.edu>          **
X **                                                                      **
X ** Copyright:      1994, Garrett E. D'Amore                             **
X **                                                                      **
X ** NO WARRANTY:    This program is provided entirely without warranty.  **
X **                 The user assumes full responsibility for the use of  **
X **                 this program, and agrees to indemnify the author and **
X **                 the copyright holder from any damage or loss that    **
X **                 may result from the use of or inability to use this  **
X **                 program.  In simple language: YOU USE THIS PROGRAM   **
X **                 AT YOUR OWN RISK!                                    **
X **                                                                      **
X ** Warning:        None.                                                **
X **                                                                      **
X ** Usage:          vtprint [options] [files]                            **
X **                                                                      **
X ** Restrictions:   None.                                                **
X **                                                                      **
X ** Algorithm:      None.                                                **
X **                                                                      **
X ** References:     None.                                                **
X **                                                                      **
X ** File formats:   vtprintcap(5)                                        **
X **                                                                      **
X ** Rev. History:   June 4, 1994    Garrett D'Amore                      **
X **                 -- Initial coding.                                   **
X **                                                                      **
X ** Notes:          None.                                                **
X **                                                                      **
X **************************************************************************
X **************************************************************************/
X
X/* >>>>>>>>>> Headers <<<<<<<<<< */
X
X#include <stdio.h>
X#include <stdlib.h>
X#include <errno.h>
X#include <string.h>
X#include <signal.h>
X#include <memory.h>
X
X#include "arglist.h"
X#include "termstate.h"
X
X/* >>>>>>>>>> Defines <<<<<<<<<< */
X
X#define CR  '\xD'
X#define LF  '\xA'
X#define FF  '\xC'
X
X#ifndef MAN_SECT
X#define MAN_SECT "1"
X#endif
X
X#ifndef VERSION_NO
X#define VERSION_NO "2.0dev"
X#endif
X
X#ifndef VERSION_DT
X#define VERSION_DT "January 1, 1970"
X#endif
X
X#ifndef DEVTTY
X#define DEVTTY "/dev/tty"
X#endif
X
X#ifndef LIBFILE
X#define LIBFILE "/etc/vtprintcap"
X#endif
X
X/* >>>>>>>>>> Variables <<<<<<<<<< */
X
X/* stuff used by getopt() */
Xextern char *optarg;
Xextern int  optind;
X
X/* default printer control codes (ANSI/vt100/vt220) */
Xchar    *ptr_on  = "\033[5i";
Xchar    *ptr_off = "\033[4i";
X
X/* string operating parameters */
Xchar    *termname = "";
Xchar    *libtermname = LIBFILE;
Xchar    *devname = DEVTTY;
Xchar    *basename = "";
X
X/* modes of operation */
Xint     quiet   = 0;    /* minimal message reporting? */
Xint     binary  = 0;    /* binary newline translation? */
Xint     ffeed   = 1;    /* formfeed between files? */
Xint     device  = 0;    /* use tty device instead of stdout? */
Xint     stripcr = 0;    /* strip CRs from CR/LFs? */
Xint     addcr   = 0;    /* add LFs to bare CRs? */
Xint     builtin = 0;    /* use builtin escape codes by default? */
Xint     forcenv = 0;    /* force using the getenv(TERM) value */
Xint     dowork  = 1;    /* whether or not to actually do processing */
X
X/* terminal states */
Xint         state_saved = 0;
Xtermstate   oldstate;
Xtermstate   newstate;
X
X/* output file descriptor */
XFILE    *outfile;
X
X/* >>>>>>>>>> Prototypes <<<<<<<<<< */
X
Xvoid    sighandler (int);
Xint     process_opts (arglist *);
Xvoid    help (void);
Xvoid    license (void);
Xvoid    warranty (void);
Xvoid    intro (void);
X
X/* >>>>>>>>>> Functions <<<<<<<<<< */
X
X/***************************************
X *
X *  sighandler      Signal handler for terminal clean-up.
X *
X *  Purpose         Ensures that the terminal is restored to a "sane"
X *                  state when a signal is received, and then exits
X *                  from program.
X *
X *  Parameters      signum:     signal number that was caught
X *
X *  Returns         None.
X *
X */
X
Xvoid sighandler (int signum)
X{
X    char *signame;
X
X    fprintf (outfile, "%s", ptr_off);
X    fflush (outfile);
X    if (state_saved) restore_termstate(fileno(outfile), &oldstate);
X
X    if (!quiet)
X    {
X        switch (signum)
X        {
X            case SIGHUP     : { signame = "hangup"; break; }
X            case SIGINT     : { signame = "interrupt"; break; }
X            case SIGQUIT    : { signame = "quit"; break; }
X            case SIGTERM    : { signame = "terminate"; break; }
X            case SIGTSTP    : { signame = "keyboard stop"; break; }
X            default         : { signame = "unknown"; break; }
X        }
X        fprintf (outfile,"\nCaught %s signal!  Exiting vtprint.\n", signame);
X    }
X    exit (1);
X}
X
X/***************************************
X *
X *  process_opts    Process command-line and environment options.
X *
X *  Purpose         Process specific program options from an arglist.
X *                  Called once for environment, then again for argv[].
X *
X *  Parameters      arglist:    arglist of parameters to process
X *
X *  Returns         Pointer to "next" index in arglist to process (stuff
X *                  that getopt () can't process itself).
X *
X */
X
Xint process_opts (arglist *args)
X{
X    int c;
X
X    optind = 1; /* reset getopt index */
X
X    args -> argv [0] = basename;
X
X    do 
X    {
X        c = getopt (args->argc, args->argv, "hwlvdDbBcCeEfFnNqQT:tL:V:");
X        switch (c)
X        {
X            case 'h' : { help (); dowork = 0; break; }
X            case 'w' : { warranty (); dowork = 0; break; }
X            case 'l' : { license (); dowork = 0; break; }
X            case 'v' : { intro(); dowork = 0; break; }
X
X            case 'd' : { device = 1; break; }
X            case 'D' : { device = 0; break; }
X            case 'b' : { binary = 1; break; }
X            case 'B' : { binary = 0; break; }
X            case 'c' : { stripcr = 0; addcr = 1; break; }
X            case 'C' : { stripcr = 0; addcr = 0; break; }
X            case 'e' : { builtin = 1; forcenv = 0; break; }
X            case 'E' : { builtin = 0; forcenv = 0; break; }
X            case 'f' : { ffeed = 0; break; }
X            case 'F' : { ffeed = 1; break; }
X            case 'n' : { addcr = 0; stripcr = 1; break; }
X            case 'N' : { addcr = 0; stripcr = 0; break; }
X            case 'q' : { quiet = 1; break; }
X            case 'Q' : { quiet = 0; break; }
X            case 't' : {
X                           forcenv = 1;
X                           termname = getenv ("TERM");
X                           break;
X                       }
X            case 'T' : {
X                           termname = optarg;
X                           break;
X                       }
X            case 'L' : {
X                           libtermname = optarg;
X                           break;
X                       }
X            case 'V' : {
X                           devname = optarg;
X                           device = 1;
X                           break;
X                       }
X            case '?' : { help(); exit (1); }
X        }
X    } while (c != EOF) ;
X    return (optind);
X}
X                       
X/***************************************
X *
X *  help            Provide "basic" on-line user help.
X *
X *  Purpose         To assist users who might get lost. (RTFM).
X *
X *  Parameters      None.
X *
X *  Returns         None.
X *
X */
X
Xvoid help (void)
X{
X    if ((!strcmp (basename, "vtprton")) || (!strcmp (basename, "vtprtoff")))
X        fprintf (stderr, "Usage: %s [ -dDeEhlqQNtvw ] \
X[ -L vtprintcap ] [ -T termtype ] [ -V device ]\n", basename);
X
X    else fprintf (stderr, "Usage: %s [ -bBcCdDeEfFhlnNqQtvW ] \
X[ -L vtprintcap ] [ -T termtype ] [ -V device ] [ filename... ]\n",
X    basename);
X
X    fprintf (stderr, "\nPlease see the %s(%s) manual page for more\n",
X        basename,MAN_SECT);
X
X    fprintf (stderr, "information about the meaning of these options.\n");
X}
X
X/***************************************
X *
X *  intro           Provides a brief intro to vtprint.
X *
X *  Purpose         Displayed whenever user starts vtprint.
X *
X *  Parameters      None.
X *
X *  Returns         None.
X *
X */
X
Xvoid intro (void)
X{
X    fprintf (stderr, "\n*** %s (v%s) ***\n\n", basename, VERSION_NO);
X    fprintf (stderr, "Copyright 1993-1994, Garrett D'Amore\n");
X    fprintf (stderr, "Last revised %s.\n\n", VERSION_DT);
X    fprintf (stderr, "NO WARRANTY!  Use \"%s -w\" for info.\n",
X        basename);
X    fprintf (stderr, "Freely redistributable.  Use \"%s -l\" for info.\n\n",
X        basename);
X
X    return;
X}
X
Xvoid warranty (void)
X{
X    fprintf (stderr, "%s: This program is provided entirely without\n",
X        basename);
X    fprintf (stderr, "%s: warranty!  The user agrees to indemnify the\n",
X        basename);
X    fprintf (stderr, "%s: author from any claim of damage or loss that\n",
X        basename);
X    fprintf (stderr, "%s: may result from the use of or inability to\n",
X        basename);
X    fprintf (stderr, "%s: use this program.\n\n", basename);
X}
X
Xvoid license (void)
X{
X    fprintf (stderr, "%s: This program is copyrighted material.  The user\n",
X        basename);
X    fprintf (stderr, "%s: is given the non-exclusive right to use, modify\n",
X        basename);
X    fprintf (stderr, "%s: and redistribute this program or any derived\n",
X        basename);
X    fprintf (stderr, "%s: work, subject to the following limitation:\n\n",
X        basename);
X    fprintf (stderr, "%s: All copyright notices and warranty disclaimers\n",
X        basename);
X    fprintf (stderr, "%s: must be left intact!  The user may not claim \n",
X        basename);
X    fprintf (stderr, "%s: credit for code written by the author.\n\n",
X        basename);
X}
X
X/***************************************
X *
X *  vtprintcap      Loads a vtprintcap description for use.
X *
X *  Purpose         Allows use of user-defined printer control codes.
X *
X *  Parameters      None.
X *
X *  Returns         zero on successful lookup,
X *                  one on lookup failure,
X *                  negative one on file open failure,
X *                  negative two on file parse error.
X *
X */
X
Xint vtprintcap ()
X{
X    FILE *libfile;
X    char buffer [1025];
X    static char on [1025];
X    static char off [1025];
X    char *temp = NULL;
X
X    if ((!termname)||(!*termname)) termname = getenv ("TERM");
X
X    libfile = fopen (libtermname, "r");
X    if (!libfile) return (-1);
X
X    while (fgets (buffer, 1024, libfile))
X    {
X        if (buffer[0] == '#') buffer [0] = '\0';
X        temp = strchr (buffer,'\n');
X        if (temp)  *temp = '\0';
X
X        temp = strtok (buffer, ", \t");
X        while (temp)
X        {
X            if (!strcmp (temp, termname)) break;
X            temp = strtok (NULL, ", \t");
X        }
X        if (temp) break;
X    }
X    if (temp) 
X    {
X        if (!fgets (on, 1025, libfile))
X        {
X            fclose (libfile);
X            return (-2);
X        }
X        if (!fgets (off, 1025, libfile))
X        {
X            fclose (libfile);
X            return (-2);
X        }
X
X        fclose (libfile);
X
X        /* verify no illegal substitution formats are present */
X
X        if (on [strlen (on)-1] == '\n') on [strlen (on) - 1] = '\0';
X        if (off [strlen (off)-1] == '\n') off [strlen (off) -1 ] = '\0';
X
X        temp = on;
X        while (temp)
X        {
X            temp = strchr (temp, '%');
X            if (temp)
X            {
X                if (temp[1] != '%') return (-2);
X                temp += 2;
X            }
X        }
X        temp = off;
X        while (temp)
X        {
X            temp = strchr (temp, '%');
X            if (temp)
X            {
X                if (temp[1] != '%') return (-2);
X                temp += 2;
X            }
X        }
X
X        if (!escape (on)) return (-2);
X        if (!escape (off)) return (-2);
X
X        ptr_on = on;
X        ptr_off = off;
X        return 0;
X    };
X    fclose (libfile);
X    return 1;
X}
X
X/* >>>>>>>>>> Main <<<<<<<<<< */
X
Xint main (int argc, char *argv[])
X{
X    char *tmp;
X    char *env;
X    int  result;
X    int  cnt = 0;
X    int  total;
X
X    arglist args;
X    args.argv = NULL;
X
X    /* what are we called? */
X    basename = strrchr (argv[0],'/');
X    basename = (basename ? basename+1 : argv[0]);
X
X    /* set up the environment variable properly */
X    tmp = getenv (basename);
X    if (!tmp) tmp = getenv ("VTPRINT");
X    if (!tmp) tmp = "";
X
X    env = (char *) malloc (strlen (tmp) + 1);
X    if (!env)
X    {
X        fprintf (stderr,"%s: Out of memory!\n",  basename);
X        exit (1);
X    }
X
X    strcpy (env, tmp);
X
X    /* now we go through getopt (twice actually) */
X
X    /* first for the environment variable (if present) */
X
X    if (env)
X    {
X        string2arglist (env, &args);
X        process_opts (&args);
X    }
X
X    /* then command line parameters */
X    argv2arglist (argc, argv, &args);
X    process_opts (&args);
X
X    if (!dowork) exit(0);
X
X    /* display intro on screen */
X    if (!quiet) intro();
X
X    /* get library file settings if needed */
X    if (!builtin)
X    {
X        result = vtprintcap ();
X        switch (result)
X        {
X            case -2 : {
X                        if ((!quiet) && (!forcenv))
X                        {
X                            fprintf (stderr, 
X                            "%s: Parse error in %s, using builtin codes.\n",
X                            basename, libtermname);
X                        }
X                        else if (forcenv)
X                        {
X                            fprintf (stderr, "%s: Parse error in %s!\n", 
X                                basename, libtermname);
X                            exit(1);
X                        }
X                        break;
X                      }
X            case -1 : {
X                        if ((!quiet) && (!forcenv))
X                        {
X                            fprintf (stderr,
X                            "%s: Can't open %s, using builtin codes.\n",
X                            basename, libtermname);
X                        }
X                        else if (forcenv)
X                        {
X                            fprintf (stderr, "%s: Can't open %s!\n",
X                                basename, libtermname);
X                            exit (1);
X                        }
X                        break;
X                      }
X            case 0  : {
X                        if (!quiet)
X                        {
X                            fprintf (stderr, "%s: Using %s control codes.\n",
X                                basename, termname);
X                        }
X                        break;
X                      }
X            case 1  : {
X                        if ((!quiet) && (!forcenv))
X                        {
X                            fprintf (stderr,
X                            "%s: Terminal %s unknown, using builtin codes.\n",
X                            basename, termname);
X                        }
X                        else if (forcenv)
X                        {
X                            fprintf (stderr,
X                            "%s: Terminal %s unknown!\n", basename, termname);
X                            exit(1);
X                        }
X                        break;
X                      }
X            default : {
X                        fprintf (stderr, "%s: INTERNAL ERROR!!\n", basename);
X                        abort();
X                      }
X        }
X    }
X
X    /* set up the output file descriptor */
X    if (device) 
X    {
X        outfile = fopen (devname, "w");
X        if (!outfile)
X        {
X            fprintf (stderr, "%s: Failed to open %s for writing!\n",
X                basename, devname);
X            exit (1);
X        }
X        if (!quiet)
X            fprintf (stderr,"%s: Using %s for output.\n", basename, devname);
X    }
X    else
X    {
X        outfile = stdout;
X        if (!quiet)
X            fprintf (stderr, "%s: Using <stdout> for output.\n", basename);
X    }
X
X    /* special handling for vtprton and vtprtoff */
X    if (!strcmp (basename, "vtprton"))
X    {
X        fflush (outfile);
X        fprintf (outfile, ptr_on);
X        fflush (outfile);
X        exit (0);
X    }
X    if (!strcmp (basename, "vtprtoff"))
X    {
X        fflush (outfile);
X        fprintf (outfile, ptr_off);
X        fflush (outfile);
X        exit (0);
X    }
X
X
X    /* deal with terminal states */
X    if (isatty (outfile))
X    {
X        save_termstate(fileno (outfile), &oldstate);
X        state_saved = 1;
X        memcpy ((char *) &newstate, (char *) &oldstate, sizeof (termstate));
X        if (binary)
X        {
X            raw_termstate(&newstate);
X            restore_termstate (fileno (outfile), &newstate);
X        }
X    }
X    else
X    {
X        binary = 0; /* force this! */
X    }
X
X    if (!quiet)
X    {
X        fprintf (stderr, "%s: Output flags: ", basename);
X        if (builtin) fprintf (stderr, "builtin ");
X        if (binary) fprintf (stderr, "binary ");
X        if (ffeed)  fprintf (stderr, "formfeed ");
X        if (stripcr) fprintf (stderr, "noCR ");
X        if (addcr) fprintf (stderr, "addCR ");
X        fprintf (stderr, "\n");
X        fflush (stderr);
X    }
X
X    /* establish signal handlers */
X    signal (SIGHUP, sighandler);
X    signal (SIGQUIT, sighandler);
X    signal (SIGTSTP, sighandler);
X    signal (SIGINT, sighandler);
X    signal (SIGTERM, sighandler);
X
X    total = argc - optind;
X
X    /* the main processing loop */
X    do
X    {
X        int ch;
X        int lastch = 0;
X        FILE *infile;
X
X        if (optind == argc)
X            infile = stdin;
X        else infile = fopen (argv[optind], "r");
X
X        if (!infile)
X        {
X            fprintf (stderr, "%s: Couldn't open %s for reading.\n",
X                basename, argv[optind]);
X            optind++;
X            continue;
X        }
X
X        fflush (outfile);
X        fprintf (outfile, ptr_on);
X        fflush (outfile);
X
X        while ((ch = fgetc (infile)) != EOF)
X        {
X            switch (ch)
X            {
X                case CR :   {
X                                if (!stripcr) fputc (ch, outfile);
X                                break;
X                            }
X                case LF :   {
X                                if ((lastch != CR) && (addcr))
X                                    fputc (CR, outfile);
X                                fputc (ch, outfile);
X                                break;
X                            }
X                default :   {
X                                if ((lastch == CR) && (stripcr))
X                                    fputc (CR, outfile);
X                                fputc (ch, outfile);
X                                break;
X                            }
X            }
X            lastch = ch;
X        }
X
X        fclose (infile);
X        if (ffeed) fputc (FF, outfile);
X        fprintf (outfile, ptr_off);
X        fflush (outfile);
X
X        cnt++;
X
X        if (!quiet)
X        {
X            if (argc == optind)
X                fprintf  (stderr, "%s: Printed <stdin>.\n", basename);
X            else
X            fprintf (stderr, "%s: Printed %s.\n", basename, argv[optind]);
X        }   
X
X        optind++;
X
X    } while (optind < argc);
X
X    if (state_saved) restore_termstate (fileno (outfile), &oldstate);
X
X    if (!quiet) fprintf (stderr,
X        "%s: Successfully printed %d file%s (%d specified).\n",
X        basename, cnt, cnt == 1 ? "" : "s", total);
X
X    return 0;
X}
END_OF_FILE
if test 20600 -ne `wc -c <'vtprint.c'`; then
    echo shar: \"'vtprint.c'\" unpacked with wrong size!
fi
# end of 'vtprint.c'
fi
if test -f 'vtprint.ps' -a "${1}" != "-c" ; then 
  echo shar: Will not clobber existing file \"'vtprint.ps'\"
else
echo shar: Extracting \"'vtprint.ps'\" \(19595 characters\)
sed "s/^X//" >'vtprint.ps' <<'END_OF_FILE'
X%!PS-Adobe-3.0
X%%Creator: groff version 1.09
X%%CreationDate: Sun Jun 19 22:09:21 1994
X%%DocumentNeededResources: font Times-Roman
X%%+ font Times-Bold
X%%+ font Times-Italic
X%%DocumentSuppliedResources: procset grops 1.09 0
X%%Pages: 3
X%%PageOrder: Ascend
X%%Orientation: Portrait
X%%EndComments
X%%BeginProlog
X%%BeginResource: procset grops 1.09 0
X/setpacking where{
Xpop
Xcurrentpacking
Xtrue setpacking
X}if
X/grops 120 dict dup begin
X/SC 32 def
X/A/show load def
X/B{0 SC 3 -1 roll widthshow}bind def
X/C{0 exch ashow}bind def
X/D{0 exch 0 SC 5 2 roll awidthshow}bind def
X/E{0 rmoveto show}bind def
X/F{0 rmoveto 0 SC 3 -1 roll widthshow}bind def
X/G{0 rmoveto 0 exch ashow}bind def
X/H{0 rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
X/I{0 exch rmoveto show}bind def
X/J{0 exch rmoveto 0 SC 3 -1 roll widthshow}bind def
X/K{0 exch rmoveto 0 exch ashow}bind def
X/L{0 exch rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
X/M{rmoveto show}bind def
X/N{rmoveto 0 SC 3 -1 roll widthshow}bind def
X/O{rmoveto 0 exch ashow}bind def
X/P{rmoveto 0 exch 0 SC 5 2 roll awidthshow}bind def
X/Q{moveto show}bind def
X/R{moveto 0 SC 3 -1 roll widthshow}bind def
X/S{moveto 0 exch ashow}bind def
X/T{moveto 0 exch 0 SC 5 2 roll awidthshow}bind def
X/SF{
Xfindfont exch
X[exch dup 0 exch 0 exch neg 0 0]makefont
Xdup setfont
X[exch/setfont cvx]cvx bind def
X}bind def
X/MF{
Xfindfont
X[5 2 roll
X0 3 1 roll 
Xneg 0 0]makefont
Xdup setfont
X[exch/setfont cvx]cvx bind def
X}bind def
X/level0 0 def
X/RES 0 def
X/PL 0 def
X/LS 0 def
X/PLG{
Xgsave newpath clippath pathbbox grestore
Xexch pop add exch pop
X}bind def
X/BP{
X/level0 save def
X1 setlinecap
X1 setlinejoin
X72 RES div dup scale
XLS{
X90 rotate
X}{
X0 PL translate
X}ifelse
X1 -1 scale
X}bind def
X/EP{
Xlevel0 restore
Xshowpage
X}bind def
X/DA{
Xnewpath arcn stroke
X}bind def
X/SN{
Xtransform
X.25 sub exch .25 sub exch
Xround .25 add exch round .25 add exch
Xitransform
X}bind def
X/DL{
XSN
Xmoveto
XSN
Xlineto stroke
X}bind def
X/DC{
Xnewpath 0 360 arc closepath
X}bind def
X/TM matrix def
X/DE{
XTM currentmatrix pop
Xtranslate scale newpath 0 0 .5 0 360 arc closepath
XTM setmatrix
X}bind def
X/RC/rcurveto load def
X/RL/rlineto load def
X/ST/stroke load def
X/MT/moveto load def
X/CL/closepath load def
X/FL{
Xcurrentgray exch setgray fill setgray
X}bind def
X/BL/fill load def
X/LW/setlinewidth load def
X/RE{
Xfindfont
Xdup maxlength 1 index/FontName known not{1 add}if dict begin
X{
X1 index/FID ne{def}{pop pop}ifelse
X}forall
X/Encoding exch def
Xdup/FontName exch def
Xcurrentdict end definefont pop
X}bind def
X/DEFS 0 def
X/EBEGIN{
Xmoveto
XDEFS begin
X}bind def
X/EEND/end load def
X/CNT 0 def
X/level1 0 def
X/PBEGIN{
X/level1 save def
Xtranslate
Xdiv 3 1 roll div exch scale
Xneg exch neg exch translate
X0 setgray
X0 setlinecap
X1 setlinewidth
X0 setlinejoin
X10 setmiterlimit
X[]0 setdash
X/setstrokeadjust where{
Xpop
Xfalse setstrokeadjust
X}if
X/setoverprint where{
Xpop
Xfalse setoverprint
X}if
Xnewpath
X/CNT countdictstack def
Xuserdict begin
X/showpage{}def
X}bind def
X/PEND{
Xclear
Xcountdictstack CNT sub{end}repeat
Xlevel1 restore
X}bind def
Xend def
X/setpacking where{
Xpop
Xsetpacking
X}if
X%%EndResource
X%%IncludeResource: font Times-Roman
X%%IncludeResource: font Times-Bold
X%%IncludeResource: font Times-Italic
Xgrops begin/DEFS 1 dict def DEFS begin/u{.001 mul}bind def end/RES 72
Xdef/PL 792 def/LS false def/ENC0[/asciicircum/asciitilde/Scaron/Zcaron
X/scaron/zcaron/Ydieresis/trademark/quotesingle/.notdef/.notdef/.notdef
X/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
X/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef/.notdef
X/.notdef/.notdef/space/exclam/quotedbl/numbersign/dollar/percent
X/ampersand/quoteright/parenleft/parenright/asterisk/plus/comma/hyphen
X/period/slash/zero/one/two/three/four/five/six/seven/eight/nine/colon
X/semicolon/less/equal/greater/question/at/A/B/C/D/E/F/G/H/I/J/K/L/M/N/O
X/P/Q/R/S/T/U/V/W/X/Y/Z/bracketleft/backslash/bracketright/circumflex
X/underscore/quoteleft/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/s/t/u/v/w/x/y
X/z/braceleft/bar/braceright/tilde/.notdef/quotesinglbase/guillemotleft
X/guillemotright/bullet/florin/fraction/perthousand/dagger/daggerdbl
X/endash/emdash/ff/fi/fl/ffi/ffl/dotlessi/dotlessj/grave/hungarumlaut
X/dotaccent/breve/caron/ring/ogonek/quotedblleft/quotedblright/oe/lslash
X/quotedblbase/OE/Lslash/.notdef/exclamdown/cent/sterling/currency/yen
X/brokenbar/section/dieresis/copyright/ordfeminine/guilsinglleft
X/logicalnot/minus/registered/macron/degree/plusminus/twosuperior
X/threesuperior/acute/mu/paragraph/periodcentered/cedilla/onesuperior
X/ordmasculine/guilsinglright/onequarter/onehalf/threequarters
X/questiondown/Agrave/Aacute/Acircumflex/Atilde/Adieresis/Aring/AE
X/Ccedilla/Egrave/Eacute/Ecircumflex/Edieresis/Igrave/Iacute/Icircumflex
X/Idieresis/Eth/Ntilde/Ograve/Oacute/Ocircumflex/Otilde/Odieresis
X/multiply/Oslash/Ugrave/Uacute/Ucircumflex/Udieresis/Yacute/Thorn
X/germandbls/agrave/aacute/acircumflex/atilde/adieresis/aring/ae/ccedilla
X/egrave/eacute/ecircumflex/edieresis/igrave/iacute/icircumflex/idieresis
X/eth/ntilde/ograve/oacute/ocircumflex/otilde/odieresis/divide/oslash
X/ugrave/uacute/ucircumflex/udieresis/yacute/thorn/ydieresis]def
X/Times-Italic@0 ENC0/Times-Italic RE/Times-Bold@0 ENC0/Times-Bold RE
X/Times-Roman@0 ENC0/Times-Roman RE
X%%EndProlog
X%%Page: 1 1
X%%BeginPageSetup
XBP
X%%EndPageSetup
X/F0 10/Times-Roman@0 SF 134.145(VTPRINT\(1\) USER)72 48 R 134.145
X(COMMANDS VTPRINT\(1\))2.5 F/F1 9/Times-Bold@0 SF -.18(NA)72 84 S(ME).18
XE F0(vtprint \255 print \214les from UNIX host to printer attached to l\
Xocal terminal)108 96 Q F1(SYNOPSIS)72 112.8 Q/F2 10/Times-Bold@0 SF
X(vtprint)108 124.8 Q F0([)2.5 E F2(\255bBcCdDeEfFhlnNqQtvw)2.5 E F0 2.5
X(][)2.5 G F2<ad4c>A/F3 10/Times-Italic@0 SF(vtprintcap)2.5 E F0 2.5(][)
X2.5 G F2<ad54>A F3(termtype)2.5 E F0 2.5(][)2.5 G F2<ad56>A F3(de)2.5 E
X(vice)-.15 E F0 2.5(][)2.5 G F3(\214lename)A(...)-.15 E F0(])5 E F1
X(DESCRIPTION)72 141.6 Q F2(vtprint)108 153.6 Q F0 .334
X(is a simple \214lter that prints ASCII te)2.835 F .334
X(xt to a printer connected to a terminal or terminal emulator)-.15 F
X5.334(.I)-.55 G(t)-5.334 E .495
X(uses terminal escape sequences to print, and can substitute for)108
X165.6 R F2(lpr)2.995 E F0 .495
X(\(1\) in circumstances where the printer is)B
X(not connected directly to the host or a)108 177.6 Q -.25(va)-.2 G
X(ilable via TCP/IP).25 E(.)-1.11 E F1(OPTIONS)72 194.4 Q F2<ad62>108
X206.4 Q F0(Causes)24.74 E F2(vtprint)3 E F0 .499
X(to open the output stream in binary modes, o)3 F -.15(ve)-.15 G .499
X(rriding an).15 F 2.999(ya)-.15 G .499(utomatic postprocess-)-2.999 F
X.461(ing done by the host \(e.g. CR/LF translations\).)144 218.4 R .462
X(This has no ef)5.461 F .462(fect if the output stream is not a tty)-.25
XF(de)144 230.4 Q(vice.)-.25 E F2<ad42>108 247.2 Q F0 .317(Undoes the ef)
X23.63 F .317(fect of the)-.25 F F2<ad62>2.817 E F0 2.816(option. Note)
X2.817 F .316(that this does)2.816 F F3(not)2.816 E F0 .316
X(open the output stream in te)2.816 F .316(xt mode if)-.15 F(it w)144
X259.2 Q(ould not normally be opened in that mode.)-.1 E F2<ad63>108 276
XQ F0(Causes)25.86 E F2(vtprint)3.102 E F0 .603(to append an)3.102 F
X3.103(yl)-.15 G .603
X(inefeeds \(ASCII 0xA\) with carriage returns \(ASCII 0xD\).)-3.103 F
X.603(This is)5.603 F .387(useful for printing data from a UNIX or simil\
Xiar host to an MS-DOS system')144 288 R 2.887(sp)-.55 G .386
X(rinter that e)-2.887 F(xpects)-.15 E(CR/LF line termination.)144 300 Q
XF2<ad43>108 316.8 Q F0(Causes)23.08 E F2(vtprint)2.5 E F0
X(to pass all carriage returns and linefeeds unmodi\214ed.)2.5 E F2<ad64>
X108 333.6 Q F0 .032(Use the tty de)24.74 F .032
X(vice \214le instead of stdout for output.)-.25 F .032
X(This is de\214ned as)5.032 F F2(/de)2.532 E(v/tty)-.15 E F0 .033
X(on this system. \(This)2.533 F .202
X(is operating system speci\214c and may v)144 345.6 R .201
X(ary from system to system.\) This is useful for using)-.25 F F2
X(vtprint)2.701 E F0 .183(as a pipe called by programs that suppress or \
Xredirect the stdout stream of the pipe or printing pro-)144 357.6 R
X(cess.)144 369.6 Q F2<ad44>108 386.4 Q F0
X(Use the stdout stream for output, rather than a tty de)23.08 E
X(vice \214le.)-.25 E F2<ad65>108 403.2 Q F0 -.15(Fo)25.86 G(rces).15 E
XF2(vtprint)2.587 E F0 .087(to ignore the TERM en)2.587 F .086
X(vironment v)-.4 F .086(ariable and use the b)-.25 F .086
X(uiltin control codes instead.)-.2 F F2<ad45>108 420 Q F0 3.298
X(Undoes the ef)23.63 F 3.298(fect of the)-.25 F F2<ad65>5.799 E F0 3.299
X(option, which allo)5.799 F(ws)-.25 E F2(vtprint)5.799 E F0 3.299
X(to attempt to \214nd an entry in)5.799 F F2
X(/usr/local/lib/vtprint/vtprintcap)144 432 Q F0(for the TERM v)2.5 E
X(alue and use the corresponding control codes.)-.25 E F2<ad66>108 448.8
XQ F0(Requests)26.97 E F2(vtprint)3.744 E F0 1.243(to suppress inclusion\
X of formfeeds \(ASCII 0xC\) between multiple \214les.)3.744 F(Note)6.243
XE(that this has no af)144 460.8 Q(fect on an)-.25 E 2.5(yf)-.15 G
X(ormfeeds that may be present in the input \214les already)-2.5 E(.)-.65
XE F2<ad46>108 477.6 Q F0(Requests)24.19 E F2(vtprint)3.235 E F0 .735(to\
X include formfeeds between multiple \214les speci\214ed on the command-\
Xline and)3.235 F(at the end of the last \214le printed.)144 489.6 Q F2
X<ad68>108 506.4 Q F0(Print out a simple usage message.)24.74 E F2<ad6c>
X108 523.2 Q F0(Print out the)27.52 E F2(vtprint)2.5 E F0
X(license agreement.)2.5 E F2<ad4c>108 540 Q F3(vtprintcap)2.5 E F0
X(Speci\214es an alternate \214le to use instead of)144 552 Q F2
X(/usr/local/lib/vtprint/vtprintcap)2.5 E F0(.)A F2<ad6e>108 568.8 Q F0
X(Causes)24.74 E F2(vtprint)3.328 E F0 .828(to strip the CR from an)3.328
XF 3.328(yC)-.15 G .827(R/LF sequences.)-3.328 F .827(This will not af)
X5.827 F .827(fect handling of an)-.25 F(y)-.15 E(CRs present else)144
X580.8 Q(where in the \214le.)-.25 E F2<ad4e>108 597.6 Q F0(Causes)23.08
XE F2(vtprint)2.5 E F0
X(to pass all carriage returns and linefeeds unmodi\214ed.)2.5 E F2<ad71>
X108 614.4 Q F0 1.102(Quiet mode.)24.74 F 1.102(Suppress v)6.102 F 1.103
X(arious status messages from being displayed, useful in situations wher\
Xe)-.25 F F2(vtprint)144 626.4 Q F0
X(is used as part of a shell script, for e)2.5 E(xample.)-.15 E F2<ad51>
X108 643.2 Q F0(Cancels the ef)22.52 E(fect of the)-.25 E F2<ad71>2.5 E
XF0(option, allo)2.5 E(wing normal progress reporting to occur)-.25 E(.)
X-.55 E F2<ad74>108 660 Q F0 -.15(Fo)26.97 G .794
X(rce the use of the TERM v).15 F .794
X(ariable to perform a look up of the control sequences to be used in)
X-.25 F F2(/usr/local/lib/vtprint/vtprintcap)144 672 Q F0 5.105(.I)C
X2.605(fa)-5.105 G 2.605(ne)-2.605 G .105(ntry in that \214le can')-2.605
XF 2.605(tb)-.18 G 2.605(ef)-2.605 G(ound,)-2.605 E F2(vtprint)2.605 E F0
X.105(will abort with an)2.605 F(error)144 684 Q(.)-.55 E F2<ad54>108
X700.8 Q F3(termtype)2.5 E F0 .538(Use the v)144 712.8 R .538(alue of)
X-.25 F F3(termtype)3.038 E F0 .538(instead of the v)3.038 F .538
X(alue of the TERM en)-.25 F .538(vironment v)-.4 F .538
X(ariable when perform-)-.25 F(ing lookups in)144 724.8 Q F2
X(/usr/local/lib/vtprint/vtprintcap)2.5 E F0(.)A(vtprint v2.0)72 768 Q
X(19 June 1994)160.665 E(1)202.335 E EP
X%%Page: 2 2
X%%BeginPageSetup
XBP
X%%EndPageSetup
X/F0 10/Times-Roman@0 SF 134.145(VTPRINT\(1\) USER)72 48 R 134.145
X(COMMANDS VTPRINT\(1\))2.5 F/F1 10/Times-Bold@0 SF<ad76>108 84 Q F0
X(Display v)25.3 E(ersion information.)-.15 E F1<ad56>108 100.8 Q/F2 10
X/Times-Italic@0 SF(de)2.5 E(vice)-.15 E F0(Speci\214es an alternate de)
X144 112.8 Q(vice \214le instead of)-.25 E F1(/de)2.5 E(v/tty)-.15 E F0
X(to use.)2.5 E F1<ad77>108 129.6 Q F0(Display important w)23.08 E
X(arranty w)-.1 E(ai)-.1 E -.15(ve)-.25 G 2.5(ri).15 G 2.5
X(nformation. NO)-2.5 F -1.2(WA)2.5 G(RRANTY!)1.2 E F1<adad>108 146.4 Q
XF0 .422(This option changes no special operational parameters of)24.6 F
XF1(vtprint.)2.922 E F0 .422(But it does indicate to the pro-)5.422 F
X.692(gram that all of the command-line ar)144 158.4 R .692
X(guments which follo)-.18 F 3.192(wa)-.25 G .692
X(re to be parsed as \214lenames, e)-3.192 F -.15(ve)-.25 G 3.191(ni).15
XG(f)-3.191 E(the)144 170.4 Q 2.775(yb)-.15 G -.15(eg)-2.775 G .275
X(in with a dash.).15 F .275
X(Hence to process a single \214le with the name "\214le" you w)5.275 F
X.275(ould call)-.1 F F1(vtprint)2.775 E F0(as ")144 182.4 Q F1(vtprint)
X2.5 E F0 2.5<adad20ad8c6c65222e>5 F/F3 9/Times-Bold@0 SF(ENVIR)72 199.2
XQ(ONMENT)-.27 E F0 5.72(TERM the)108 211.2 R(type of the terminal)2.5 E
XF1(vtprint)2.5 E F0(will assume is being used.)2.5 E(VTPRINT)108 228 Q
X(string of options to be used by)144 240 Q F1(vtprint.)2.5 E F3 -.45(AU)
X72 256.8 S(THOR).45 E F1(vtprint)108 268.8 Q F0 -.1(wa)2.944 G 2.944(sw)
X.1 G .444(ritten by Garrett D'Amore, on December 27, 1993 and last modi\
X\214ed on June 19, 1994.)-2.944 F .443(It is)5.443 F(hea)108 280.8 Q
X.567(vily deri)-.2 F -.15(ve)-.25 G 3.067(df).15 G .567
X(rom a similar program, called)-3.067 F F1(lprint,)3.067 E F0 .567
X(by the same author)3.067 F 5.567(.H)-.55 G 3.067(ec)-5.567 G .567
X(an be reached via Internet)-3.067 F(e-mail at g)108 292.8 Q
X(arrett@sciences.sdsu.edu.)-.05 E F3(DISTRIB)72 309.6 Q(UTION)-.09 E F0
X.737(The latest v)108 321.6 R .737(ersion of)-.15 F F1(vtprint)3.237 E
XF0 .736(can be obtained by anon)3.236 F .736
X(ymous ftp at ftp.sdsu.edu in the)-.15 F F1(/pub/vtprint)3.236 E F0
X(direc-)3.236 E(tory)108 333.6 Q 5(.P)-.65 G(lease read the)-5 E F1
X(INDEX)2.5 E F0(and)2.5 E F1(README)2.5 E F0(\214les before do)2.5 E
X(wnloading.)-.25 E .49(If you do not ha)108 350.4 R .79 -.15(ve f)-.2 H
X.49(tp a).15 F -.25(va)-.2 G(ilability).25 E 2.99(,t)-.65 G .49
X(hen you can request a uuencoded cop)-2.99 F 2.99(yo)-.1 G(f)-2.99 E F1
X(vtprint)2.99 E F0 .49(be sent to you via e-)2.99 F .16
X(mail from the author)108 362.4 R 5.16(.T)-.55 G .16
X(he author is also willing to mak)-5.16 F 2.659(eo)-.1 G .159
X(ther arrangements as needed, within certain limi-)-2.659 F(tations.)108
X374.4 Q F3(MAILING LIST)72 391.2 Q F0 3.003(Am)108 403.2 S .504
X(ailing list for the discussion of topics related to and about)-3.003 F
XF1(vtprint)3.004 E F0 -.15(ex)3.004 G 3.004(ists. T).15 F 3.004(os)-.8 G
X.504(ubscribe to this mailing)-3.004 F .837
X(list, send a message to "vtprint-request@sdsu.edu" with the w)108 415.2
XR .836(ord "subscribe" as the body)-.1 F 5.836(.A)-.65 G 3.336(na)-5.836
XG(utomated)-3.336 E(list serv)108 427.2 Q
X(er will reply with information about the mailing list.)-.15 E F3
X(COPYRIGHT)72 444 Q F1(vtprint)108 456 Q F0 .98(is cop)3.48 F .98
X(yrighted 1994, by Garrett D'Amore.)-.1 F .981
X(It may be freely redistrib)5.981 F .981(uted or modi\214ed, so long as)
X-.2 F 1.656(this and an)108 468 R 4.156(yo)-.15 G 1.656(ther cop)-4.156
XF 1.655
X(yright notices are included in their original form with the program.)
X-.1 F 1.655(The user is)6.655 F
X(granted the right to use this program without limitation.)108 480 Q F3
X(DISCLAIMER)72 496.8 Q F1(vtprint)108 508.8 Q F0 .194(is pro)2.694 F
X.194(vided WITHOUT W)-.15 F(ARRANTY)-1.2 E 5.194(.T)-1.29 G .195
X(he user agrees to indemnify the author from an)-5.194 F 2.695(yc)-.15 G
X.195(laims of)-2.695 F .948(damage or loss arising from the use of or i\
Xnability to use this program.)108 520.8 R .947(In other w)5.947 F .947
X(ords, USE A)-.1 F 3.447(TY)-1.11 G(OUR)-3.747 E -.35(OW)108 532.8 S 2.5
X(NR).35 G(ISK!)-2.5 E F3(CA)72 549.6 Q(VEA)-1.305 E(TS)-.855 E F1
X(vtprint)108 561.6 Q F0 .508(cannot be used to print \214les containing\
X non-printable characters, as these may cause con\215icts with)3.008 F
X(the terminal or emulator used.)108 573.6 Q .445(When used o)108 590.4 R
X-.15(ve)-.15 G 2.945(ras).15 G .445(erial \(modem\) connection,)-2.945 F
XF1(vtprint)2.945 E F0 .445(may not w)2.945 F .445
X(ork properly unless hardw)-.1 F .445(are \(CTS/R)-.1 F(TS\))-.6 E<8d6f>
X108 602.4 Q 2.595(wc)-.25 G .095(ontrol is used.)-2.595 F .095
X(This is due to the f)5.095 F .095(act that most printers are slo)-.1 F
X.096(wer than serial connections in common)-.25 F(use.)108 614.4 Q F1
X(vtprint)108 631.2 Q F0 1.179(uses terminal escape sequences to print, \
Xand not all terminal emulators support these sequences,)3.68 F .506
X(and of those that do, some support it dif)108 643.2 R(ferently)-.25 E
X5.506(.Y)-.65 G .506
X(ou can \214nd a listing of some of the programs kno)-6.606 F .506
X(wn to)-.25 F -.1(wo)108 655.2 S .325(rk and not to w).1 F .325
X(ork with)-.1 F F1(vtprint)2.825 E F0 .325(in the \214le)2.825 F F1
X(COMP)2.825 E -1.5 -.95(AT .)-.74 H F0 .324
X(The best thing to do is try your particular emula-)6.274 F(tor)108
X667.2 Q 4.082(,a)-.4 G 1.582(nd \214nd out if it w)-4.082 F 4.083
X(orks. The)-.1 F 1.583(author w)4.083 F 1.583(ould appreciate an)-.1 F
X4.083(yr)-.15 G 1.583(eports of success or f)-4.083 F 1.583
X(ailure, or strange)-.1 F(beha)108 679.2 Q(vior)-.2 E 6.338(.Y)-.55 G
X1.338(ou can send those to him via Internet e-mail.)-7.438 F 1.338
X(\(See the)6.338 F F1 -.5(AU)3.837 G(THOR).5 E F0 1.337(chapter for ho)
X3.837 F 3.837(wt)-.25 G 3.837(or)-3.837 G(each)-3.837 E(him.\))108 691.2
XQ(The)108 708 Q F1(/usr/local/lib/vtprint/vtprintcap)2.704 E F0 .204
X(\214le is still lar)2.704 F .204(gely incomplete.)-.18 F .204
X(The author w)5.204 F .204(ould v)-.1 F .205(ery much appreci-)-.15 F
X.236(ate it if indi)108 720 R .236(viduals with more information dif)
X-.25 F .236(ferent terminals w)-.25 F .236
X(ould get in contact with him so that support)-.1 F(vtprint v2.0)72 768
XQ(19 June 1994)160.665 E(2)202.335 E EP
X%%Page: 3 3
X%%BeginPageSetup
XBP
X%%EndPageSetup
X/F0 10/Times-Roman@0 SF 134.145(VTPRINT\(1\) USER)72 48 R 134.145
X(COMMANDS VTPRINT\(1\))2.5 F
X(can be added for these terminals in the master archi)108 84 Q -.15(ve)
X-.25 G(.).15 E(Do)108 100.8 Q/F1 10/Times-Italic@0 SF(not)2.984 E F0
X.484(background this program, as it has no w)2.984 F .484(ay of kno)-.1
XF .485(wing when it is in the background and when it is)-.25 F .776
X(in the fore)108 112.8 R 3.276(ground. This)-.15 F .775
X(will result in your fore)3.276 F .775
X(ground process' output being printed as well as the output)-.15 F(from)
X108 124.8 Q/F2 10/Times-Bold@0 SF(vtprint.)2.5 E/F3 9/Times-Bold@0 SF
X(FILES)72 141.6 Q F2(/usr/local/lib/vtprint/vtprintcap)108 153.6 Q F3
X-.162(TO)72 170.4 S(DOS).162 E F0 1.452(Fix an)108 182.4 R 3.952(yb)-.15
XG 1.452(ugs present, clean-up the documentation, continue to b)-4.152 F
X1.452(uild upon entries in the)-.2 F F2(COMP)3.952 E -.95(AT)-.74 G F0
X(and)4.902 E F2(/usr/local/lib/vtprint/vtprintcap)108 194.4 Q F0
X(\214les, and)2.5 E(\214nally)5 E 2.5<2c8c>-.65 G(nish getting a colle)
X-2.5 E(ge education!)-.15 E F3 -.09(BU)72 211.2 S(GS).09 E F2(vtprint)
X108 223.2 Q F0(doesn')3.156 E 3.156(th)-.18 G .656
X(andle some signals properly)-3.156 F 3.155(,e)-.65 G .655
X(specially the SIGKILL and SIGST)-3.155 F .655(OP signals, which can')
X-.18 F(t)-.18 E .06(be caught an)108 235.2 R(yw)-.15 E(ay)-.1 E 5.06(.A)
X-.65 G .06(lso it doesn')-5.06 F 2.56(tc)-.18 G .06
X(heck to see if you ha)-2.56 F .36 -.15(ve b)-.2 H .06
X(ackgrounded the process.).15 F .06(The resulting condi-)5.06 F .101
X(tion may lea)108 247.2 R .401 -.15(ve a)-.2 H .101
X(ll output directed to the printer instead of the screen.).15 F .101
X(The \214x for this condition is to run the)5.101 F(pro)108 259.2 Q
X(vided)-.15 E F2(vtprtoff)3.923 E F0 1.423(program with no ar)3.923 F
X1.423(guments, which will restore normal screen output.)-.18 F(\(Y)6.423
XE 1.424(ou probably)-1.1 F -.1(wo)108 271.2 S(n').1 E 2.5(tb)-.18 G 2.5
X(ea)-2.5 G(ble to see what you')-2.5 E(re typing while you start)-.5 E
XF2(vtprtoff)2.5 E F0(from the shell.\))2.5 E F3(SEE ALSO)72 288 Q F2
X(lpr)108 300 Q F0(\(1\),)A F2(vtprintcap)2.5 E F0(\(5\),)A F2(vtprtoff)
X2.5 E F0(\(1\))A(vtprint v2.0)72 768 Q(19 June 1994)160.665 E(3)202.335
XE EP
X%%Trailer
Xend
X%%EOF
END_OF_FILE
if test 19595 -ne `wc -c <'vtprint.ps'`; then
    echo shar: \"'vtprint.ps'\" unpacked with wrong size!
fi
# end of 'vtprint.ps'
fi
echo shar: End of archive 3 \(of 3\).
cp /dev/null ark3isdone
MISSING=""
for I in 1 2 3 ; do
    if test ! -f ark${I}isdone ; then
	MISSING="${MISSING} ${I}"
    fi
done
if test "${MISSING}" = "" ; then
    echo You have unpacked all 3 archives.
    rm -f ark[1-9]isdone
else
    echo You still need to unpack the following archives:
    echo "        " ${MISSING}
fi
##  End of shell archive.
exit 0
