Newsgroups: comp.sources.unix
From: darkfox@netcom.com (Johnson Michael Earls)
Subject: v28i113: fromwho - an expanded `from' program, V1.7, Patch01
Sender: unix-sources-moderator@gw.home.vix.com
Approved: vixie@gw.home.vix.com

Submitted-By: darkfox@netcom.com (Johnson Michael Earls)
Posting-Number: Volume 28, Issue 113
Archive-Name: fromwho/patch01

FromWho v1.7 PATCH 1 - fixes the configure script

    This patch fixes the broken configure script contained in the
original FromWho v1.7 posting.  It also includes a slight modification
to fromwho.c to match the new configuration script.

- Johnson

#! /bin/sh
# This is a shell archive.  Remove anything before this line, then unpack
# it by saving it into a file and typing "sh file".  To overwrite existing
# files, type "sh file -c".  You can also feed this as standard input via
# unshar, or by typing "sh <file", e.g..  If this archive is complete, you
# will see the following message at the end:
#		"End of shell archive."
# Contents:  fromwho.patch
# Wrapped by darkfox@netcom12 on Sun Jul 24 00:46:18 1994
PATH=/bin:/usr/bin:/usr/ucb ; export PATH
if test -f 'fromwho.patch' -a "${1}" != "-c" ; then 
  echo shar: Will not clobber existing file \"'fromwho.patch'\"
else
echo shar: Extracting \"'fromwho.patch'\" \(44747 characters\)
sed "s/^X//" >'fromwho.patch' <<'END_OF_FILE'
Xdiff -c fromwho.old/configure fromwho/configure
X*** fromwho.old/configure	Sun Jul 24 00:38:07 1994
X--- fromwho/configure	Sun Jul 24 00:34:50 1994
X***************
X*** 1,145 ****
X- 
X- echo ""
X- echo "Checking your system configuration..."
X- echo ""
X- 
X  #!/bin/sh
X  # Guess values for system-dependent variables and create Makefiles.
X! # Generated automatically using autoconf.
X! # Copyright (C) 1991, 1992, 1993 Free Software Foundation, Inc.
X  
X! # This program is free software; you can redistribute it and/or modify
X! # it under the terms of the GNU General Public License as published by
X! # the Free Software Foundation; either version 2, or (at your option)
X  # any later version.
X  
X! # This program is distributed in the hope that it will be useful,
X! # but WITHOUT ANY WARRANTY; without even the implied warranty of
X! # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
X! # GNU General Public License for more details.
X  
X  # You should have received a copy of the GNU General Public License
X  # along with this program; if not, write to the Free Software
X  # Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
X  
X! # Usage: configure [--srcdir=DIR] [--host=HOST] [--gas] [--nfp] [--no-create]
X! #        [--prefix=PREFIX] [--exec-prefix=PREFIX] [--with-PACKAGE] [TARGET]
X! # Ignores all args except --srcdir, --prefix, --exec-prefix, --no-create, and
X! # --with-PACKAGE unless this script has special code to handle it.
X  
X  
X! for arg
X  do
X!   # Handle --exec-prefix with a space before the argument.
X!   if test x$next_exec_prefix = xyes; then exec_prefix=$arg; next_exec_prefix=
X!   # Handle --host with a space before the argument.
X!   elif test x$next_host = xyes; then next_host=
X!   # Handle --prefix with a space before the argument.
X!   elif test x$next_prefix = xyes; then prefix=$arg; next_prefix=
X!   # Handle --srcdir with a space before the argument.
X!   elif test x$next_srcdir = xyes; then srcdir=$arg; next_srcdir=
X!   else
X!     case $arg in
X!      # For backward compatibility, also recognize exact --exec_prefix.
X!      -exec-prefix=* | --exec_prefix=* | --exec-prefix=* | --exec-prefi=* | --exec-pref=* | --exec-pre=* | --exec-pr=* | --exec-p=* | --exec-=* | --exec=* | --exe=* | --ex=* | --e=*)
X! 	exec_prefix=`echo $arg | sed 's/[-a-z_]*=//'` ;;
X!      -exec-prefix | --exec_prefix | --exec-prefix | --exec-prefi | --exec-pref | --exec-pre | --exec-pr | --exec-p | --exec- | --exec | --exe | --ex | --e)
X! 	next_exec_prefix=yes ;;
X! 
X!      -gas | --gas | --ga | --g) ;;
X! 
X!      -host=* | --host=* | --hos=* | --ho=* | --h=*) ;;
X!      -host | --host | --hos | --ho | --h)
X! 	next_host=yes ;;
X! 
X!      -nfp | --nfp | --nf) ;;
X! 
X!      -no-create | --no-create | --no-creat | --no-crea | --no-cre | --no-cr | --no-c | --no- | --no)
X!         no_create=1 ;;
X! 
X!      -prefix=* | --prefix=* | --prefi=* | --pref=* | --pre=* | --pr=* | --p=*)
X! 	prefix=`echo $arg | sed 's/[-a-z_]*=//'` ;;
X!      -prefix | --prefix | --prefi | --pref | --pre | --pr | --p)
X! 	next_prefix=yes ;;
X! 
X!      -srcdir=* | --srcdir=* | --srcdi=* | --srcd=* | --src=* | --sr=* | --s=*)
X! 	srcdir=`echo $arg | sed 's/[-a-z_]*=//'` ;;
X!      -srcdir | --srcdir | --srcdi | --srcd | --src | --sr | --s)
X! 	next_srcdir=yes ;;
X! 
X!      -with-* | --with-*)
X!        package=`echo $arg|sed 's/-*with-//'`
X!        # Delete all the valid chars; see if any are left.
X!        if test -n "`echo $package|sed 's/[-a-zA-Z0-9_]*//g'`"; then
X!          echo "configure: $package: invalid package name" >&2; exit 1
X!        fi
X!        eval "with_`echo $package|sed s/-/_/g`=1" ;;
X  
X!      -v | -verbose | --verbose | --verbos | --verbo | --verb | --ver | --ve | --v)
X!        verbose=yes ;;
X  
X!      *) ;;
X      esac
X!   fi
X! done
X  
X! trap 'rm -f conftest* core; exit 1' 1 3 15
X  
X! # Needed for some versions of `tr' so that character classes in `[]' work.
X! if test "${LANG+set}" = "set" ; then
X!    LANG=C
X  fi
X  
X! rm -f conftest*
X! compile='${CC-cc} $CFLAGS $DEFS conftest.c -o conftest $LIBS >/dev/null 2>&1'
X  
X  # A filename unique to this package, relative to the directory that
X  # configure is in, which we can look for to find out if srcdir is correct.
X! unique_file=test.mmdf.uu
X  
X  # Find the source files, if location was not specified.
X  if test -z "$srcdir"; then
X!   srcdirdefaulted=yes
X    # Try the directory containing this script, then `..'.
X!   prog=$0
X!   confdir=`echo $prog|sed 's%/[^/][^/]*$%%'`
X!   test "X$confdir" = "X$prog" && confdir=.
X!   srcdir=$confdir
X!   if test ! -r $srcdir/$unique_file; then
X      srcdir=..
X    fi
X  fi
X! if test ! -r $srcdir/$unique_file; then
X!   if test x$srcdirdefaulted = xyes; then
X!     echo "configure: Can not find sources in \`${confdir}' or \`..'." 1>&2
X    else
X!     echo "configure: Can not find sources in \`${srcdir}'." 1>&2
X    fi
X-   exit 1
X  fi
X! # Preserve a srcdir of `.' to avoid automounter screwups with pwd.
X! # But we can't avoid them for `..', to make subdirectories work.
X! case $srcdir in
X!   .|/*|~*) ;;
X!   *) srcdir=`cd $srcdir; pwd` ;; # Make relative path absolute.
X! esac
X  
X  if test -z "$CC"; then
X    # Extract the first word of `gcc', so it can be a program name with args.
X!   set dummy gcc; word=$2
X!   echo checking for $word
X!   IFS="${IFS= 	}"; saveifs="$IFS"; IFS="${IFS}:"
X!   for dir in $PATH; do
X!     test -z "$dir" && dir=.
X!     if test -f $dir/$word; then
X        CC="gcc"
X        break
X      fi
X    done
X!   IFS="$saveifs"
X  fi
X  test -z "$CC" && CC="cc"
X! test -n "$CC" -a -n "$verbose" && echo "	setting CC to $CC"
X  
X  # Find out if we are using GNU C, under whatever name.
X  cat > conftest.c <<EOF
X--- 1,342 ----
X  #!/bin/sh
X  # Guess values for system-dependent variables and create Makefiles.
X! # Generated automatically using autoconf version 1.11 
X! # Copyright (C) 1991, 1992, 1993, 1994 Free Software Foundation, Inc.
X  
X! # This configure script is free software; you can redistribute it and/or
X! # modify it under the terms of the GNU General Public License as published
X! # by the Free Software Foundation; either version 2, or (at your option)
X  # any later version.
X  
X! # This script is distributed in the hope that it will be useful, but
X! # WITHOUT ANY WARRANTY; without even the implied warranty of
X! # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General
X! # Public License for more details.
X  
X  # You should have received a copy of the GNU General Public License
X  # along with this program; if not, write to the Free Software
X  # Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
X  
X! # Save the original args to write them into config.status later.
X! configure_args="$*"
X  
X+ # Only options that might do something get documented.
X+ ac_usage="Usage: configure [options] [host]
X+ Options: [defaults in brackets after descriptions]
X+ --build=BUILD		configure for building on BUILD [BUILD=HOST]
X+ --disable-FEATURE	do not include FEATURE (same as --enable-FEATURE=no)
X+ --enable-FEATURE[=ARG]	include FEATURE [ARG=yes]
X+ --exec-prefix=PREFIX	install host dependent files in PREFIX [/usr/local]
X+ --help			print this message
X+ --host=HOST		configure for HOST [guessed]
X+ --prefix=PREFIX		install host independent files in PREFIX [/usr/local]
X+ --quiet, --silent	do not print \`checking for...' messages
X+ --srcdir=DIR		find the sources in DIR [configure dir or ..]
X+ --target=TARGET		configure for TARGET [TARGET=HOST]
X+ --verbose		print results of checks
X+ --version		print the version of autoconf that created configure
X+ --with-PACKAGE[=ARG]	use PACKAGE [ARG=yes]
X+ --without-PACKAGE	do not use PACKAGE (same as --with-PACKAGE=no)
X+ --x-includes=DIR	X include files are in DIR
X+ --x-libraries=DIR	X library files are in DIR"
X+ 
X+ # Initialize some variables set by options.
X+ # The variables have the same names as the options, with
X+ # dashes changed to underlines.
X+ build=NONE
X+ exec_prefix=
X+ host=NONE
X+ no_create=
X+ nonopt=NONE
X+ norecursion=
X+ prefix=
X+ program_prefix=
X+ program_suffix=
X+ program_transform_name=
X+ silent=
X+ srcdir=
X+ target=NONE
X+ verbose=
X+ x_includes=
X+ x_libraries=
X  
X! ac_prev=
X! for ac_option
X  do
X! 
X!   # If the previous option needs an argument, assign it.
X!   if test -n "$ac_prev"; then
X!     eval "$ac_prev=\$ac_option"
X!     ac_prev=
X!     continue
X!   fi
X! 
X!   # Accept (but ignore some of) the important Cygnus configure
X!   # options, so we can diagnose typos.
X  
X!   case "$ac_option" in
X!   -*=*) ac_optarg=`echo "$ac_option" | sed 's/[-_a-zA-Z0-9]*=//'` ;;
X!   *) ac_optarg= ;;
X!   esac
X! 
X!   case "$ac_option" in
X! 
X!   -build | --build | --buil | --bui | --bu | --b)
X!     ac_prev=build ;;
X!   -build=* | --build=* | --buil=* | --bui=* | --bu=* | --b=*)
X!     build="$ac_optarg" ;;
X! 
X!   -disable-* | --disable-*)
X!     ac_feature=`echo $ac_option|sed -e 's/-*disable-//'`
X!     # Reject names that aren't valid shell variable names.
X!     if test -n "`echo $ac_feature| sed 's/[-a-zA-Z0-9_]//g'`"; then
X!       echo "configure: $ac_feature: invalid feature name" >&2; exit 1
X!     fi
X!     ac_feature=`echo $ac_feature| sed 's/-/_/g'`
X!     eval "enable_${ac_feature}=no" ;;
X  
X!   -enable-* | --enable-*)
X!     ac_feature=`echo $ac_option|sed -e 's/-*enable-//' -e 's/=.*//'`
X!     # Reject names that aren't valid shell variable names.
X!     if test -n "`echo $ac_feature| sed 's/[-_a-zA-Z0-9]//g'`"; then
X!       echo "configure: $ac_feature: invalid feature name" >&2; exit 1
X!     fi
X!     ac_feature=`echo $ac_feature| sed 's/-/_/g'`
X!     case "$ac_option" in
X!       *=*) ;;
X!       *) ac_optarg=yes ;;
X      esac
X!     eval "enable_${ac_feature}='$ac_optarg'" ;;
X! 
X!   # For backward compatibility, recognize -exec-prefix and --exec_prefix.
X!   -exec-prefix | --exec_prefix | --exec-prefix | --exec-prefi \
X!   | --exec-pref | --exec-pre | --exec-pr | --exec-p | --exec- \
X!   | --exec | --exe | --ex)
X!     ac_prev=exec_prefix ;;
X!   -exec-prefix=* | --exec_prefix=* | --exec-prefix=* | --exec-prefi=* \
X!   | --exec-pref=* | --exec-pre=* | --exec-pr=* | --exec-p=* | --exec-=* \
X!   | --exec=* | --exe=* | --ex=*)
X!     exec_prefix="$ac_optarg" ;;
X! 
X!   -gas | --gas | --ga | --g)
X!     with_gas=yes ;; # Obsolete; use --with-gas.
X! 
X!   -help | --help | --hel | --he)
X!     cat << EOF
X! $ac_usage
X! EOF
X!     exit 0 ;;
X! 
X!   -host | --host | --hos | --ho)
X!     ac_prev=host ;;
X!   -host=* | --host=* | --hos=* | --ho=*)
X!     host="$ac_optarg" ;;
X! 
X!   -nfp | --nfp | --nf)
X!     with_fp=no ;; # Obsolete; use --without-fp.
X! 
X!   -no-create | --no-create | --no-creat | --no-crea | --no-cre \
X!   | --no-cr | --no-c)
X!     no_create=yes ;;
X! 
X!   -norecursion | --norecursion | --norecursio | --norecursi \
X!   | --norecurs | --norecur | --norecu | --norec | --nore | --nor)
X!     norecursion=yes ;;
X! 
X!   -prefix | --prefix | --prefi | --pref | --pre | --pr | --p)
X!     ac_prev=prefix ;;
X!   -prefix=* | --prefix=* | --prefi=* | --pref=* | --pre=* | --pr=* | --p=*)
X!     prefix="$ac_optarg" ;;
X! 
X!   -program-prefix | --program-prefix | --program-prefi | --program-pref \
X!   | --program-pre | --program-pr | --program-p)
X!     ac_prev=program_prefix ;;
X!   -program-prefix=* | --program-prefix=* | --program-prefi=* \
X!   | --program-pref=* | --program-pre=* | --program-pr=* | --program-p=*)
X!     program_prefix="$ac_optarg" ;;
X! 
X!   -program-suffix | --program-suffix | --program-suffi | --program-suff \
X!   | --program-suf | --program-su | --program-s)
X!     ac_prev=program_suffix ;;
X!   -program-suffix=* | --program-suffix=* | --program-suffi=* \
X!   | --program-suff=* | --program-suf=* | --program-su=* | --program-s=*)
X!     program_suffix="$ac_optarg" ;;
X! 
X!   -program-transform-name | --program-transform-name \
X!   | --program-transform-nam | --program-transform-na \
X!   | --program-transform-n | --program-transform- \
X!   | --program-transform | --program-transfor \
X!   | --program-transfo | --program-transf \
X!   | --program-trans | --program-tran \
X!   | --progr-tra | --program-tr | --program-t)
X!     ac_prev=program_transform_name ;;
X!   -program-transform-name=* | --program-transform-name=* \
X!   | --program-transform-nam=* | --program-transform-na=* \
X!   | --program-transform-n=* | --program-transform-=* \
X!   | --program-transform=* | --program-transfor=* \
X!   | --program-transfo=* | --program-transf=* \
X!   | --program-trans=* | --program-tran=* \
X!   | --progr-tra=* | --program-tr=* | --program-t=*)
X!     program_transform_name="$ac_optarg" ;;
X! 
X!   -q | -quiet | --quiet | --quie | --qui | --qu | --q \
X!   | -silent | --silent | --silen | --sile | --sil)
X!     silent=yes ;;
X! 
X!   -srcdir | --srcdir | --srcdi | --srcd | --src | --sr)
X!     ac_prev=srcdir ;;
X!   -srcdir=* | --srcdir=* | --srcdi=* | --srcd=* | --src=* | --sr=*)
X!     srcdir="$ac_optarg" ;;
X! 
X!   -target | --target | --targe | --targ | --tar | --ta | --t)
X!     ac_prev=target ;;
X!   -target=* | --target=* | --targe=* | --targ=* | --tar=* | --ta=* | --t=*)
X!     target="$ac_optarg" ;;
X! 
X!   -v | -verbose | --verbose | --verbos | --verbo | --verb)
X!     verbose=yes ;;
X! 
X!   -version | --version | --versio | --versi | --vers)
X!     echo "configure generated by autoconf version 1.11"
X!     exit 0 ;;
X! 
X!   -with-* | --with-*)
X!     ac_package=`echo $ac_option|sed -e 's/-*with-//' -e 's/=.*//'`
X!     # Reject names that aren't valid shell variable names.
X!     if test -n "`echo $ac_package| sed 's/[-_a-zA-Z0-9]//g'`"; then
X!       echo "configure: $ac_package: invalid package name" >&2; exit 1
X!     fi
X!     ac_package=`echo $ac_package| sed 's/-/_/g'`
X!     case "$ac_option" in
X!       *=*) ;;
X!       *) ac_optarg=yes ;;
X!     esac
X!     eval "with_${ac_package}='$ac_optarg'" ;;
X! 
X!   -without-* | --without-*)
X!     ac_package=`echo $ac_option|sed -e 's/-*without-//'`
X!     # Reject names that aren't valid shell variable names.
X!     if test -n "`echo $ac_package| sed 's/[-a-zA-Z0-9_]//g'`"; then
X!       echo "configure: $ac_package: invalid package name" >&2; exit 1
X!     fi
X!     ac_package=`echo $ac_package| sed 's/-/_/g'`
X!     eval "with_${ac_package}=no" ;;
X! 
X!   --x) with_x=yes ;; # Obsolete; use --with-x.
X! 
X!   -x-includes | --x-includes | --x-include | --x-includ | --x-inclu \
X!   | --x-incl | --x-inc | --x-in | --x-i)
X!     ac_prev=x_includes ;;
X!   -x-includes=* | --x-includes=* | --x-include=* | --x-includ=* | --x-inclu=* \
X!   | --x-incl=* | --x-inc=* | --x-in=* | --x-i=*)
X!     x_includes="$ac_optarg" ;;
X! 
X!   -x-libraries | --x-libraries | --x-librarie | --x-librari \
X!   | --x-librar | --x-libra | --x-libr | --x-lib | --x-li | --x-l)
X!     ac_prev=x_libraries ;;
X!   -x-libraries=* | --x-libraries=* | --x-librarie=* | --x-librari=* \
X!   | --x-librar=* | --x-libra=* | --x-libr=* | --x-lib=* | --x-li=* | --x-l=*)
X!     x_libraries="$ac_optarg" ;;
X! 
X!   -*) echo "configure: $ac_option: invalid option; use --help to show usage" >&2; exit 1
X!     ;;
X! 
X!   *) 
X!     if test -n "`echo $ac_option| sed 's/[-a-z0-9.]//g'`"; then
X!       echo "configure: warning: $ac_option: invalid host type" >&2
X!     fi
X!     if test "x$nonopt" != xNONE; then
X!       echo "configure: can only configure for one host and one target at a time" >&2; exit 1
X!     fi
X!     nonopt="$ac_option"
X!     ;;
X  
X!   esac
X! done
X  
X! if test -n "$ac_prev"; then
X!   echo "configure: missing argument to --`echo $ac_prev | sed 's/_/-/g'`" >&2; exit 1
X  fi
X  
X! trap 'rm -fr conftest* confdefs* core $ac_clean_files; exit 1' 1 2 15
X! trap 'rm -fr confdefs* $ac_clean_files' 0
X! 
X! # Save the original args if we used an alternate arg parser.
X! ac_configure_temp="${configure_args-$*}"
X! # Strip out --no-create and --norecursion so they don't pile up.
X! configure_args=
X! for ac_arg in $ac_configure_temp; do
X!   case "$ac_arg" in
X!   -no-create | --no-create | --no-creat | --no-crea | --no-cre \
X!   | --no-cr | --no-c) ;;
X!   -norecursion | --norecursion | --norecursio | --norecursi \
X!   | --norecurs | --norecur | --norecu | --norec | --nore | --nor) ;;
X!   *) configure_args="$configure_args $ac_arg" ;;
X!   esac
X! done
X! 
X! # NLS nuisances.
X! # These must not be set unconditionally because not all systems understand
X! # e.g. LANG=C (notably SCO).
X! if test "${LC_ALL+set}" = 'set'; then LC_ALL=C; export LC_ALL; fi
X! if test "${LANG+set}"   = 'set'; then LANG=C;   export LANG;   fi
X! 
X! # confdefs.h avoids OS command line length limits that DEFS can exceed.
X! rm -rf conftest* confdefs.h
X! # AIX cpp loses on an empty file, so make sure it contains at least a newline.
X! echo > confdefs.h
X  
X  # A filename unique to this package, relative to the directory that
X  # configure is in, which we can look for to find out if srcdir is correct.
X! ac_unique_file=test.mmdf.uu
X  
X  # Find the source files, if location was not specified.
X  if test -z "$srcdir"; then
X!   ac_srcdir_defaulted=yes
X    # Try the directory containing this script, then `..'.
X!   ac_prog=$0
X!   ac_confdir=`echo $ac_prog|sed 's%/[^/][^/]*$%%'`
X!   test "x$ac_confdir" = "x$ac_prog" && ac_confdir=.
X!   srcdir=$ac_confdir
X!   if test ! -r $srcdir/$ac_unique_file; then
X      srcdir=..
X    fi
X  fi
X! if test ! -r $srcdir/$ac_unique_file; then
X!   if test x$ac_srcdir_defaulted = xyes; then
X!     echo "configure: can not find sources in ${ac_confdir} or .." >&2; exit 1
X    else
X!     echo "configure: can not find sources in ${srcdir}" >&2; exit 1
X    fi
X  fi
X! ac_ext=c
X! # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
X! ac_cpp='${CPP}'
X! ac_compile='${CC-cc} $CFLAGS $LDFLAGS conftest.${ac_ext} -o conftest $LIBS >/dev/null 2>&1'
X! 
X! 
X! 
X! 
X! echo ""
X! echo "Checking your system configuration..."
X! echo ""
X  
X  if test -z "$CC"; then
X    # Extract the first word of `gcc', so it can be a program name with args.
X!   set ac_dummy gcc; ac_word=$2
X!   test -n "$silent" || echo "checking for $ac_word"
X!   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
X!   for ac_dir in $PATH; do
X!     test -z "$ac_dir" && ac_dir=.
X!     if test -f $ac_dir/$ac_word; then
X        CC="gcc"
X        break
X      fi
X    done
X!   IFS="$ac_save_ifs"
X  fi
X  test -z "$CC" && CC="cc"
X! test -n "$CC" && test -n "$verbose" && echo "	setting CC to $CC"
X  
X  # Find out if we are using GNU C, under whatever name.
X  cat > conftest.c <<EOF
X***************
X*** 153,172 ****
X  fi
X  rm -f conftest*
X  
X! echo checking how to run the C preprocessor
X  if test -z "$CPP"; then
X!   CPP='${CC-cc} -E'
X!   cat > conftest.c <<EOF
X  #include <stdio.h>
X  EOF
X! err=`eval "($CPP \$DEFS conftest.c >/dev/null) 2>&1"`
X! if test -z "$err"; then
X    :
X  else
X    CPP=/lib/cpp
X  fi
X  rm -f conftest*
X  fi
X  
X  # Make sure to not get the incompatible SysV /etc/install and
X  # /usr/sbin/install, which might be in PATH before a BSD-like install,
X--- 350,393 ----
X  fi
X  rm -f conftest*
X  
X! test -n "$silent" || echo "checking how to run the C preprocessor"
X  if test -z "$CPP"; then
X!   # This must be in double quotes, not single quotes, because CPP may get
X!   # substituted into the Makefile and ``${CC-cc}'' will simply confuse
X!   # make.  It must be expanded now.
X!   CPP="${CC-cc} -E"
X!   cat > conftest.${ac_ext} <<EOF
X! #include "confdefs.h"
X! #include <stdio.h>
X! Syntax Error
X! EOF
X! # Some shells (Coherent) do redirections in the wrong order, so need
X! # the parens.
X! ac_err=`eval "($ac_cpp conftest.${ac_ext} >/dev/null) 2>&1"`
X! if test -z "$ac_err"; then
X!   :
X! else
X!   rm -rf conftest*
X!   CPP="${CC-cc} -E -traditional-cpp"
X!   cat > conftest.${ac_ext} <<EOF
X! #include "confdefs.h"
X  #include <stdio.h>
X+ Syntax Error
X  EOF
X! # Some shells (Coherent) do redirections in the wrong order, so need
X! # the parens.
X! ac_err=`eval "($ac_cpp conftest.${ac_ext} >/dev/null) 2>&1"`
X! if test -z "$ac_err"; then
X    :
X  else
X+   rm -rf conftest*
X    CPP=/lib/cpp
X  fi
X  rm -f conftest*
X  fi
X+ rm -f conftest*
X+ fi
X+ test -n "$verbose" && echo "	setting CPP to $CPP"
X  
X  # Make sure to not get the incompatible SysV /etc/install and
X  # /usr/sbin/install, which might be in PATH before a BSD-like install,
X***************
X*** 173,253 ****
X  # or the SunOS /usr/etc/install directory, or the AIX /bin/install,
X  # or the AFS install, which mishandles nonexistent args, or
X  # /usr/ucb/install on SVR4, which tries to use the nonexistent group
X! # `staff'.  On most BSDish systems install is in /usr/bin, not /usr/ucb
X! # anyway.  Sigh.
X! if test "z${INSTALL}" = "z" ; then
X!   echo checking for install
X!   IFS="${IFS= 	}"; saveifs="$IFS"; IFS="${IFS}:"
X!   for dir in $PATH; do
X!     test -z "$dir" && dir=.
X!     case $dir in
X!     /etc|/usr/sbin|/usr/etc|/usr/afsws/bin|/usr/ucb) ;;
X      *)
X!       if test -f $dir/installbsd; then
X! 	INSTALL="$dir/installbsd -c" # OSF1
X! 	INSTALL_PROGRAM='$(INSTALL)'
X! 	INSTALL_DATA='$(INSTALL) -m 644'
X! 	break
X!       fi
X!       if test -f $dir/install; then
X! 	if grep dspmsg $dir/install >/dev/null 2>&1; then
X! 	  : # AIX
X! 	else
X! 	  INSTALL="$dir/install -c"
X! 	  INSTALL_PROGRAM='$(INSTALL)'
X! 	  INSTALL_DATA='$(INSTALL) -m 644'
X! 	  break
X  	fi
X!       fi
X        ;;
X      esac
X    done
X!   IFS="$saveifs"
X  fi
X- INSTALL=${INSTALL-cp}
X- INSTALL_PROGRAM=${INSTALL_PROGRAM-'$(INSTALL)'}
X- INSTALL_DATA=${INSTALL_DATA-'$(INSTALL)'}
X- 
X- echo checking for AIX
X- cat > conftest.c <<EOF
X- #ifdef _AIX
X-   yes
X- #endif
X- 
X- EOF
X- eval "$CPP \$DEFS conftest.c > conftest.out 2>&1"
X- if egrep "yes" conftest.out >/dev/null 2>&1; then
X-   {
X- 
X- }
X  
X  fi
X! rm -f conftest*
X! 
X! 
X! echo checking for DYNIX/ptx libseq
X! cat > conftest.c <<EOF
X! #if defined(_SEQUENT_)
X!   yes
X! #endif
X! 
X! EOF
X! eval "$CPP \$DEFS conftest.c > conftest.out 2>&1"
X! if egrep "yes" conftest.out >/dev/null 2>&1; then
X!   SEQUENT=1
X  fi
X! rm -f conftest*
X  
X! test -n "$SEQUENT" && test -f /usr/lib/libseq.a &&
X!   LIBS="$LIBS -lseq"
X  
X! echo checking for POSIXized ISC
X  if test -d /etc/conf/kconfig.d &&
X    grep _POSIX_VERSION /usr/include/sys/unistd.h >/dev/null 2>&1
X  then
X    ISC=1 # If later tests want to check for ISC.
X!   {
X! 
X  }
X  
X    if test -n "$GCC"; then
X--- 394,469 ----
X  # or the SunOS /usr/etc/install directory, or the AIX /bin/install,
X  # or the AFS install, which mishandles nonexistent args, or
X  # /usr/ucb/install on SVR4, which tries to use the nonexistent group
X! # `staff', or /sbin/install on IRIX which has incompatible command-line
X! # syntax.  Sigh.
X! #
X! #     On most BSDish systems install is in /usr/bin, not /usr/ucb
X! #     anyway.
X! # This turns out not to be true, so the mere pathname isn't an indication
X! # of whether the program works.  What we really need is a set of tests for
X! # the install program to see if it actually works in all the required ways.
X! #
X! # Avoid using ./install, which might have been erroneously created
X! # by make from ./install.sh.
X! if test -z "${INSTALL}"; then
X!   test -n "$silent" || echo "checking for a BSD compatible install"
X!   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
X!   for ac_dir in $PATH; do
X!     case "$ac_dir" in
X!     ''|.|/etc|/sbin|/usr/sbin|/usr/etc|/usr/afsws/bin|/usr/ucb) ;;
X      *)
X!       # OSF1 and SCO ODT 3.0 have their own names for install.
X!       for ac_prog in installbsd scoinst install; do
X!         if test -f $ac_dir/$ac_prog; then
X! 	  if test $ac_prog = install &&
X!             grep dspmsg $ac_dir/$ac_prog >/dev/null 2>&1; then
X! 	    # AIX install.  It has an incompatible calling convention.
X! 	    # OSF/1 installbsd also uses dspmsg, but is usable.
X! 	    :
X! 	  else
X! 	    INSTALL="$ac_dir/$ac_prog -c"
X! 	    break 2
X! 	  fi
X  	fi
X!       done
X        ;;
X      esac
X    done
X!   IFS="$ac_save_ifs"
X  fi
X  
X+ if test -z "$INSTALL"; then
X+   # As a last resort, use the slow shell script.
X+   for ac_dir in ${srcdir} ${srcdir}/.. ${srcdir}/../..; do
X+     if test -f $ac_dir/install.sh; then
X+       INSTALL="$ac_dir/install.sh -c"; break
X+     fi
X+   done
X  fi
X! if test -z "$INSTALL"; then
X!   echo "configure: can not find install.sh in ${srcdir} or ${srcdir}/.. or ${srcdir}/../.." >&2; exit 1
X  fi
X! test -n "$verbose" && echo "	setting INSTALL to $INSTALL"
X! 
X! # Use test -z because SunOS4 sh mishandles ${INSTALL_PROGRAM-'${INSTALL}'}.
X! # It thinks the first close brace ends the variable substitution.
X! test -z "$INSTALL_PROGRAM" && INSTALL_PROGRAM='${INSTALL}'
X! test -n "$verbose" && echo "	setting INSTALL_PROGRAM to $INSTALL_PROGRAM"
X  
X! test -z "$INSTALL_DATA" && INSTALL_DATA='${INSTALL} -m 644'
X! test -n "$verbose" && echo "	setting INSTALL_DATA to $INSTALL_DATA"
X  
X! test -n "$silent" || echo "checking for POSIXized ISC"
X  if test -d /etc/conf/kconfig.d &&
X    grep _POSIX_VERSION /usr/include/sys/unistd.h >/dev/null 2>&1
X  then
X    ISC=1 # If later tests want to check for ISC.
X!   
X! {
X! test -n "$verbose" && \
X! echo "	defining _POSIX_SOURCE"
X! echo "#define" _POSIX_SOURCE "1" >> confdefs.h
X! DEFS="$DEFS -D_POSIX_SOURCE=1"
X  }
X  
X    if test -n "$GCC"; then
X***************
X*** 257,303 ****
X    fi
X  fi
X  
X! echo checking for minix/config.h
X! cat > conftest.c <<EOF
X  #include <minix/config.h>
X  EOF
X! err=`eval "($CPP \$DEFS conftest.c >/dev/null) 2>&1"`
X! if test -z "$err"; then
X    MINIX=1
X  fi
X  rm -f conftest*
X  
X  # The Minix shell can't assign to the same variable on the same line!
X  if test -n "$MINIX"; then
X!   {
X! 
X  }
X  
X!   {
X  
X  }
X  
X!   {
X  
X! }
X  
X  fi
X  
X! echo checking for ANSI C header files
X! cat > conftest.c <<EOF
X  #include <stdlib.h>
X  #include <stdarg.h>
X  #include <string.h>
X  #include <float.h>
X  EOF
X! err=`eval "($CPP \$DEFS conftest.c >/dev/null) 2>&1"`
X! if test -z "$err"; then
X    # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
X! echo '#include <string.h>' > conftest.c
X! eval "$CPP \$DEFS conftest.c > conftest.out 2>&1"
X  if egrep "memchr" conftest.out >/dev/null 2>&1; then
X!   
X! cat > conftest.c <<EOF
X  #include <ctype.h>
X  #define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
X  #define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
X--- 473,567 ----
X    fi
X  fi
X  
X! test -n "$silent" || echo "checking for minix/config.h"
X! cat > conftest.${ac_ext} <<EOF
X! #include "confdefs.h"
X  #include <minix/config.h>
X  EOF
X! # Some shells (Coherent) do redirections in the wrong order, so need
X! # the parens.
X! ac_err=`eval "($ac_cpp conftest.${ac_ext} >/dev/null) 2>&1"`
X! if test -z "$ac_err"; then
X!   rm -rf conftest*
X    MINIX=1
X+ 
X  fi
X  rm -f conftest*
X  
X  # The Minix shell can't assign to the same variable on the same line!
X  if test -n "$MINIX"; then
X!   
X! {
X! test -n "$verbose" && \
X! echo "	defining _POSIX_SOURCE"
X! echo "#define" _POSIX_SOURCE "1" >> confdefs.h
X! DEFS="$DEFS -D_POSIX_SOURCE=1"
X  }
X  
X!   
X! {
X! test -n "$verbose" && \
X! echo "	defining" _POSIX_1_SOURCE to be "2"
X! echo "#define" _POSIX_1_SOURCE "2" >> confdefs.h
X! DEFS="$DEFS -D_POSIX_1_SOURCE=2"
X! }
X  
X+   
X+ {
X+ test -n "$verbose" && \
X+ echo "	defining _MINIX"
X+ echo "#define" _MINIX "1" >> confdefs.h
X+ DEFS="$DEFS -D_MINIX=1"
X  }
X  
X! fi
X  
X! ac_save_LIBS="${LIBS}"
X! LIBS="${LIBS} -lseq"
X! ac_have_lib=""
X! test -n "$silent" || echo "checking for -lseq"
X! cat > conftest.${ac_ext} <<EOF
X! #include "confdefs.h"
X  
X+ int main() { return 0; }
X+ int t() { main();; return 0; }
X+ EOF
X+ if eval $ac_compile; then
X+   rm -rf conftest*
X+   ac_have_lib="1"
X+ 
X+ fi
X+ rm -f conftest*
X+ LIBS="${ac_save_LIBS}"
X+ if test -n "${ac_have_lib}"; then
X+    :; LIBS="$LIBS -lseq"
X+ else
X+    :; 
X  fi
X  
X! 
X! test -n "$silent" || echo "checking for ANSI C header files"
X! cat > conftest.${ac_ext} <<EOF
X! #include "confdefs.h"
X  #include <stdlib.h>
X  #include <stdarg.h>
X  #include <string.h>
X  #include <float.h>
X  EOF
X! # Some shells (Coherent) do redirections in the wrong order, so need
X! # the parens.
X! ac_err=`eval "($ac_cpp conftest.${ac_ext} >/dev/null) 2>&1"`
X! if test -z "$ac_err"; then
X!   rm -rf conftest*
X    # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
X! echo '#include "confdefs.h"
X! #include <string.h>' > conftest.${ac_ext}
X! eval "$ac_cpp conftest.${ac_ext} > conftest.out 2>&1"
X  if egrep "memchr" conftest.out >/dev/null 2>&1; then
X!   rm -rf conftest*
X!   # SGI's /bin/cc from Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
X! cat > conftest.${ac_ext} <<EOF
X! #include "confdefs.h"
X  #include <ctype.h>
X  #define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
X  #define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
X***************
X*** 307,472 ****
X  exit (0); }
X  
X  EOF
X! eval $compile
X  if test -s conftest && (./conftest; exit) 2>/dev/null; then
X!   {
X! 
X  }
X  
X  fi
X  rm -f conftest*
X  fi
X! rm -f conftest*
X  
X  fi
X  rm -f conftest*
X  
X- echo checking for BSD string and memory functions
X- cat > conftest.c <<EOF
X- #include <strings.h>
X- int main() { exit(0); }
X- int t() { rindex(0, 0); bzero(0, 0); }
X- EOF
X- if eval $compile; then
X-   :
X- else
X-   {
X- 
X- }
X  
X  fi
X  rm -f conftest*
X  
X! echo checking for uid_t in sys/types.h
X! echo '#include <sys/types.h>' > conftest.c
X! eval "$CPP \$DEFS conftest.c > conftest.out 2>&1"
X  if egrep "uid_t" conftest.out >/dev/null 2>&1; then
X    :
X  else
X!   {
X! 
X  }
X!  {
X! 
X  }
X  
X  fi
X  rm -f conftest*
X  
X! for func in strdup
X  do
X! echo checking for ${func}
X! cat > conftest.c <<EOF
X! 
X! int main() { exit(0); }
X! int t() { /* The GNU C library defines this for functions which it implements
X      to always fail with ENOSYS.  Some functions are actually named
X      something starting with __ and the normal name is an alias.  */
X! #if defined (__stub_${func}) || defined (__stub___${func})
X  choke me
X  #else
X  /* Override any gcc2 internal prototype to avoid an error.  */
X! extern char ${func}(); ${func}();
X  #endif
X!  }
X  EOF
X! if eval $compile; then
X    :
X  else
X!   LIBOBJS="$LIBOBJS ${func}.o"
X! test -n "$verbose" && echo "	using ${func}.o instead"
X  fi
X  rm -f conftest*
X  
X  done
X  
X! echo "checking for /usr/spool/mail..."
X! test -d /usr/spool/mail && MAILDIR="/usr/spool/mail/"
X  test -z "$MAILDIR" && echo "checking for /usr/mail..." && test -d /usr/mail && MAILDIR="/usr/mail/"
X  test -z "$MAILDIR" && echo "checking for $HOME/.newmail..." && test -d $HOME/.newmail && MAILFILE="~/.newmail"
X  echo "checking for \$MAIL environment variable..."
X! test -n "$MAIL" && MAILVAR="MAIL"
X! test -n "$MAILDIR" && {
X  
X  }
X  
X! test -n "$MAILFILE" && {
X  
X  }
X  
X! test -n "$MAILVAR" && {
X  
X  }
X  
X! echo "checking for sendmail or MMDF..."
X! test `((ps -x 2>&1 > /dev/null && ps -auxww | grep sendmail) || (ps -x 2>&1 > /dev/null && ps -eaf | grep sendmail)) | wc -l` -gt 1 || {
X  
X  }
X  
X  if test -z "$UUDECODE"; then
X    # Extract the first word of `uudecode', so it can be a program name with args.
X!   set dummy uudecode; word=$2
X!   echo checking for $word
X!   IFS="${IFS= 	}"; saveifs="$IFS"; IFS="${IFS}:"
X!   for dir in $PATH; do
X!     test -z "$dir" && dir=.
X!     if test -f $dir/$word; then
X        UUDECODE="$dir/uudecode"
X        break
X      fi
X    done
X!   IFS="$saveifs"
X  fi
X  test -z "$UUDECODE" && UUDECODE="echo "'"'"Can't uudecode MMDF test file; creating empty file."'"'"; touch"
X! test -n "$UUDECODE" -a -n "$verbose" && echo "	setting UUDECODE to $UUDECODE"
X  
X  test -z "$UUDECODE" && echo "Not found, you'll have to uudecode the MMDF test file to test the MMDF fromwho."
X  if test -z "$INSTALL"; then
X    # Extract the first word of `install', so it can be a program name with args.
X!   set dummy install; word=$2
X!   echo checking for $word
X!   IFS="${IFS= 	}"; saveifs="$IFS"; IFS="${IFS}:"
X!   for dir in $PATH; do
X!     test -z "$dir" && dir=.
X!     if test -f $dir/$word; then
X        INSTALL="$dir/install"
X        break
X      fi
X    done
X!   IFS="$saveifs"
X  fi
X  test -z "$INSTALL" && INSTALL="cp"
X! test -n "$INSTALL" -a -n "$verbose" && echo "	setting INSTALL to $INSTALL"
X  
X  if test -z "$MKDIR"; then
X    # Extract the first word of `install', so it can be a program name with args.
X!   set dummy install; word=$2
X!   echo checking for $word
X!   IFS="${IFS= 	}"; saveifs="$IFS"; IFS="${IFS}:"
X!   for dir in $PATH; do
X!     test -z "$dir" && dir=.
X!     if test -f $dir/$word; then
X        MKDIR="install -d"
X        break
X      fi
X    done
X!   IFS="$saveifs"
X  fi
X  test -z "$MKDIR" && MKDIR="mkdir -p"
X! test -n "$MKDIR" -a -n "$verbose" && echo "	setting MKDIR to $MKDIR"
X  
X  if test -n "$prefix"; then
X!   test -z "$exec_prefix" && exec_prefix='${prefix}'
X!   prsub="s%^prefix\\([ 	]*\\)=\\([ 	]*\\).*$%prefix\\1=\\2$prefix%"
X  fi
X  if test -n "$exec_prefix"; then
X!   prsub="$prsub
X! s%^exec_prefix\\([ 	]*\\)=\\([ 	]*\\).*$%\
X! exec_prefix\\1=\\2$exec_prefix%"
X  fi
X- DEFS="`echo \"$DEFS\" | sed 's%[&\\\]%\\\&%g'`"
X  
X! trap 'rm -f config.status; exit 1' 1 3 15
X  echo creating config.status
X  rm -f config.status
X  cat > config.status <<EOF
X--- 571,806 ----
X  exit (0); }
X  
X  EOF
X! eval $ac_compile
X  if test -s conftest && (./conftest; exit) 2>/dev/null; then
X!   # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
X! echo '#include "confdefs.h"
X! #include <stdlib.h>' > conftest.${ac_ext}
X! eval "$ac_cpp conftest.${ac_ext} > conftest.out 2>&1"
X! if egrep "free" conftest.out >/dev/null 2>&1; then
X!   rm -rf conftest*
X!   
X! {
X! test -n "$verbose" && \
X! echo "	defining STDC_HEADERS"
X! echo "#define" STDC_HEADERS "1" >> confdefs.h
X! DEFS="$DEFS -DSTDC_HEADERS=1"
X  }
X  
X+ 
X  fi
X  rm -f conftest*
X+ 
X+ 
X  fi
X! rm -fr conftest*
X  
X  fi
X  rm -f conftest*
X  
X  
X  fi
X  rm -f conftest*
X  
X! test -n "$silent" || echo "checking for uid_t in sys/types.h"
X! echo '#include "confdefs.h"
X! #include <sys/types.h>' > conftest.${ac_ext}
X! eval "$ac_cpp conftest.${ac_ext} > conftest.out 2>&1"
X  if egrep "uid_t" conftest.out >/dev/null 2>&1; then
X    :
X  else
X!   rm -rf conftest*
X!   
X! {
X! test -n "$verbose" && \
X! echo "	defining" uid_t to be "int"
X! echo "#define" uid_t "int" >> confdefs.h
X! DEFS="$DEFS -Duid_t=int"
X  }
X!  
X! {
X! test -n "$verbose" && \
X! echo "	defining" gid_t to be "int"
X! echo "#define" gid_t "int" >> confdefs.h
X! DEFS="$DEFS -Dgid_t=int"
X  }
X  
X  fi
X  rm -f conftest*
X  
X! for ac_func in strdup
X  do
X! test -n "$silent" || echo "checking for ${ac_func}"
X! cat > conftest.${ac_ext} <<EOF
X! #include "confdefs.h"
X! #include <ctype.h>
X! int main() { return 0; }
X! int t() { 
X! /* The GNU C library defines this for functions which it implements
X      to always fail with ENOSYS.  Some functions are actually named
X      something starting with __ and the normal name is an alias.  */
X! #if defined (__stub_${ac_func}) || defined (__stub___${ac_func})
X  choke me
X  #else
X  /* Override any gcc2 internal prototype to avoid an error.  */
X! extern char ${ac_func}(); ${ac_func}();
X  #endif
X! ; return 0; }
X  EOF
X! if eval $ac_compile; then
X    :
X  else
X!   rm -rf conftest*
X!   LIBOBJS="$LIBOBJS ${ac_func}.o"
X! test -n "$verbose" && echo "	using ${ac_func}.o instead"
X  fi
X  rm -f conftest*
X  
X  done
X  
X! 
X! echo "checking for /var/spool/mail..." && test -d /var/spool/mail && MAILDIR="/var/spool/mail/"
X! test -z "$MAILDIR" && echo "checking for /usr/spool/mail..." && test -d /usr/spool/mail && MAILDIR="/usr/spool/mail/"
X! test -z "$MAILDIR" && echo "checking for /var/mail..." && test -d /var/mail && MAILDIR="/var/mail/"
X  test -z "$MAILDIR" && echo "checking for /usr/mail..." && test -d /usr/mail && MAILDIR="/usr/mail/"
X  test -z "$MAILDIR" && echo "checking for $HOME/.newmail..." && test -d $HOME/.newmail && MAILFILE="~/.newmail"
X+ 
X  echo "checking for \$MAIL environment variable..."
X! if test -n "$MAIL"
X! then
X!   MAILVAR="MAIL"
X! fi
X  
X+ if test -n "$MAILDIR"
X+ then
X+   
X+ {
X+ test -n "$verbose" && \
X+ echo "	defining" MAILDIR to be "\"$MAILDIR\""
X+ echo "#define" MAILDIR "\"$MAILDIR\"" >> confdefs.h
X+ DEFS="$DEFS -DMAILDIR=\"$MAILDIR\""
X  }
X  
X! fi
X  
X+ if test -n "$MAILFILE"
X+ then
X+   
X+ {
X+ test -n "$verbose" && \
X+ echo "	defining" MAILFILE to be "\"$MAILFILE\""
X+ echo "#define" MAILFILE "\"$MAILFILE\"" >> confdefs.h
X+ DEFS="$DEFS -DMAILFILE=\"$MAILFILE\""
X  }
X  
X! fi
X  
X+ if test -n "$MAILVAR"
X+ then
X+   
X+ {
X+ test -n "$verbose" && \
X+ echo "	defining" MAILVAR to be "\"$MAILVAR\""
X+ echo "#define" MAILVAR "\"$MAILVAR\"" >> confdefs.h
X+ DEFS="$DEFS -DMAILVAR=\"$MAILVAR\""
X  }
X  
X! fi
X  
X+ echo "checking for sendmail or MMDF..."
X+ test `((ps -x 2>&1 > /dev/null && ps -auxww | grep sendmail) || (ps -x 2>&1 > /dev/null && ps -eaf | grep sendmail)) | wc -l` -gt 1 || 
X+ {
X+ test -n "$verbose" && \
X+ echo "	defining" MMDF to be "1"
X+ echo "#define" MMDF "1" >> confdefs.h
X+ DEFS="$DEFS -DMMDF=1"
X  }
X  
X+ 
X  if test -z "$UUDECODE"; then
X    # Extract the first word of `uudecode', so it can be a program name with args.
X!   set ac_dummy uudecode; ac_word=$2
X!   test -n "$silent" || echo "checking for $ac_word"
X!   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
X!   for ac_dir in $PATH; do
X!     test -z "$ac_dir" && ac_dir=.
X!     if test -f $ac_dir/$ac_word; then
X        UUDECODE="$dir/uudecode"
X        break
X      fi
X    done
X!   IFS="$ac_save_ifs"
X  fi
X  test -z "$UUDECODE" && UUDECODE="echo "'"'"Can't uudecode MMDF test file; creating empty file."'"'"; touch"
X! test -n "$UUDECODE" && test -n "$verbose" && echo "	setting UUDECODE to $UUDECODE"
X  
X  test -z "$UUDECODE" && echo "Not found, you'll have to uudecode the MMDF test file to test the MMDF fromwho."
X  if test -z "$INSTALL"; then
X    # Extract the first word of `install', so it can be a program name with args.
X!   set ac_dummy install; ac_word=$2
X!   test -n "$silent" || echo "checking for $ac_word"
X!   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
X!   for ac_dir in $PATH; do
X!     test -z "$ac_dir" && ac_dir=.
X!     if test -f $ac_dir/$ac_word; then
X        INSTALL="$dir/install"
X        break
X      fi
X    done
X!   IFS="$ac_save_ifs"
X  fi
X  test -z "$INSTALL" && INSTALL="cp"
X! test -n "$INSTALL" && test -n "$verbose" && echo "	setting INSTALL to $INSTALL"
X  
X  if test -z "$MKDIR"; then
X    # Extract the first word of `install', so it can be a program name with args.
X!   set ac_dummy install; ac_word=$2
X!   test -n "$silent" || echo "checking for $ac_word"
X!   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
X!   for ac_dir in $PATH; do
X!     test -z "$ac_dir" && ac_dir=.
X!     if test -f $ac_dir/$ac_word; then
X        MKDIR="install -d"
X        break
X      fi
X    done
X!   IFS="$ac_save_ifs"
X  fi
X  test -z "$MKDIR" && MKDIR="mkdir -p"
X! test -n "$MKDIR" && test -n "$verbose" && echo "	setting MKDIR to $MKDIR"
X! 
X  
X+ 
X+ # The preferred way to propogate these variables is regular @ substitutions.
X  if test -n "$prefix"; then
X!   ac_prsub="s%^prefix\\([ 	]*\\)=\\([ 	]*\\).*$%prefix\\1=\\2$prefix%"
X! else
X!   prefix=/usr/local
X  fi
X  if test -n "$exec_prefix"; then
X!   ac_prsub="$ac_prsub
X! s%^exec_prefix\\([ 	]*\\)=\\([ 	]*\\).*$%exec_prefix\\1=\\2$exec_prefix%"
X! else
X!   exec_prefix='${prefix}' # Let make expand it.
X! fi
X! 
X! # Any assignment to VPATH causes Sun make to only execute
X! # the first set of double-colon rules, so remove it if not needed.
X! # If there is a colon in the path, we need to keep it.
X! if test "x$srcdir" = x.; then
X!   ac_vpsub='/^[ 	]*VPATH[ 	]*=[^:]*$/d'
X  fi
X  
X! # Quote sed substitution magic chars in DEFS.
X! cat >conftest.def <<EOF
X! $DEFS
X! EOF
X! ac_escape_ampersand_and_backslash='s%[&\\]%\\&%g'
X! DEFS=`sed "$ac_escape_ampersand_and_backslash" <conftest.def`
X! rm -f conftest.def
X! # Substitute for predefined variables.
X! 
X! trap 'rm -f config.status; exit 1' 1 2 15
X  echo creating config.status
X  rm -f config.status
X  cat > config.status <<EOF
X***************
X*** 476,493 ****
X  # This directory was configured as follows,
X  # on host `(hostname || uname -n) 2>/dev/null | sed 1q`:
X  #
X! # $0 $*
X  
X! for arg
X  do
X!   case "\$arg" in
X!     -recheck | --recheck | --rechec | --reche | --rech | --rec | --re | --r)
X!     exec /bin/sh $0 $* ;;
X!     *) echo "Usage: config.status --recheck" 2>&1; exit 1 ;;
X    esac
X  done
X  
X! trap 'rm -f Makefile; exit 1' 1 3 15
X  CC='$CC'
X  CPP='$CPP'
X  INSTALL='$INSTALL'
X--- 810,834 ----
X  # This directory was configured as follows,
X  # on host `(hostname || uname -n) 2>/dev/null | sed 1q`:
X  #
X! # $0 $configure_args
X  
X! ac_cs_usage="Usage: config.status [--recheck] [--version] [--help]"
X! for ac_option
X  do
X!   case "\$ac_option" in
X!   -recheck | --recheck | --rechec | --reche | --rech | --rec | --re | --r)
X!     echo running \${CONFIG_SHELL-/bin/sh} $0 $configure_args --no-create
X!     exec \${CONFIG_SHELL-/bin/sh} $0 $configure_args --no-create ;;
X!   -version | --version | --versio | --versi | --vers | --ver | --ve | --v)
X!     echo "config.status generated by autoconf version 1.11"
X!     exit 0 ;;
X!   -help | --help | --hel | --he | --h)
X!     echo "\$ac_cs_usage"; exit 0 ;;
X!   *) echo "\$ac_cs_usage"; exit 1 ;;
X    esac
X  done
X  
X! trap 'rm -f Makefile; exit 1' 1 2 15
X  CC='$CC'
X  CPP='$CPP'
X  INSTALL='$INSTALL'
X***************
X*** 498,528 ****
X  MKDIR='$MKDIR'
X  LIBS='$LIBS'
X  srcdir='$srcdir'
X! DEFS='$DEFS'
X  prefix='$prefix'
X  exec_prefix='$exec_prefix'
X! prsub='$prsub'
X  EOF
X  cat >> config.status <<\EOF
X  
X! top_srcdir=$srcdir
X  
X! # Allow make-time overrides of the generated file list.
X! test -n "$gen_files" || gen_files="Makefile"
X! 
X! for file in .. $gen_files; do if [ "x$file" != "x.." ]; then
X!   srcdir=$top_srcdir
X    # Remove last slash and all that follows it.  Not all systems have dirname.
X!   dir=`echo $file|sed 's%/[^/][^/]*$%%'`
X!   if test "$dir" != "$file"; then
X!     test "$top_srcdir" != . && srcdir=$top_srcdir/$dir
X!     test ! -d $dir && mkdir $dir
X    fi
X!   echo creating $file
X!   rm -f $file
X!   echo "# Generated automatically from `echo $file|sed 's|.*/||'`.in by configure." > $file
X    sed -e "
X! $prsub
X  s%@CC@%$CC%g
X  s%@CPP@%$CPP%g
X  s%@INSTALL@%$INSTALL%g
X--- 839,891 ----
X  MKDIR='$MKDIR'
X  LIBS='$LIBS'
X  srcdir='$srcdir'
X! top_srcdir='$top_srcdir'
X  prefix='$prefix'
X  exec_prefix='$exec_prefix'
X! DEFS='$DEFS'
X! ac_prsub='$ac_prsub'
X! ac_vpsub='$ac_vpsub'
X! extrasub='$extrasub'
X  EOF
X  cat >> config.status <<\EOF
X  
X! ac_given_srcdir=$srcdir
X  
X! CONFIG_FILES=${CONFIG_FILES-"Makefile"}
X! for ac_file in .. ${CONFIG_FILES}; do if test "x$ac_file" != x..; then
X    # Remove last slash and all that follows it.  Not all systems have dirname.
X!   ac_dir=`echo $ac_file|sed 's%/[^/][^/]*$%%'`
X!   if test "$ac_dir" != "$ac_file" && test "$ac_dir" != .; then
X!     # The file is in a subdirectory.
X!     test ! -d "$ac_dir" && mkdir "$ac_dir"
X!     ac_dir_suffix="/$ac_dir"
X!   else
X!     ac_dir_suffix=
X    fi
X! 
X!   # A "../" for each directory in $ac_dir_suffix.
X!   ac_dots=`echo $ac_dir_suffix|sed 's%/[^/]*%../%g'`
X!   case "$ac_given_srcdir" in
X!   .)  srcdir=.
X!       if test -z "$ac_dir_suffix"; then top_srcdir=.
X!       else top_srcdir=`echo $ac_dots|sed 's%/$%%'`; fi ;;
X!   /*) srcdir="$ac_given_srcdir$ac_dir_suffix"; top_srcdir="$ac_given_srcdir" ;;
X!   *) # Relative path.
X!     srcdir="$ac_dots$ac_given_srcdir$ac_dir_suffix"
X!     top_srcdir="$ac_dots$ac_given_srcdir" ;;
X!   esac
X! 
X!   echo creating "$ac_file"
X!   rm -f "$ac_file"
X!   comment_str="Generated automatically from `echo $ac_file|sed 's|.*/||'`.in by configure."
X!   case "$ac_file" in
X!     *.c | *.h | *.C | *.cc | *.m )  echo "/* $comment_str */" > "$ac_file" ;;
X!     * )          echo "# $comment_str"     > "$ac_file" ;;
X!   esac
X    sed -e "
X! $ac_prsub
X! $ac_vpsub
X! $extrasub
X  s%@CC@%$CC%g
X  s%@CPP@%$CPP%g
X  s%@INSTALL@%$INSTALL%g
X***************
X*** 533,546 ****
X  s%@MKDIR@%$MKDIR%g
X  s%@LIBS@%$LIBS%g
X  s%@srcdir@%$srcdir%g
X  s%@DEFS@%$DEFS%
X! " $top_srcdir/${file}.in >> $file
X  fi; done
X  
X  exit 0
X  EOF
X  chmod +x config.status
X! test -n "$no_create" || ./config.status
X  
X  echo ""
X  echo "Now check the generated Makefile for the C compiler & options, and"
X--- 896,915 ----
X  s%@MKDIR@%$MKDIR%g
X  s%@LIBS@%$LIBS%g
X  s%@srcdir@%$srcdir%g
X+ s%@top_srcdir@%$top_srcdir%g
X+ s%@prefix@%$prefix%g
X+ s%@exec_prefix@%$exec_prefix%g
X  s%@DEFS@%$DEFS%
X! " $ac_given_srcdir/${ac_file}.in >> $ac_file
X  fi; done
X  
X+ 
X  exit 0
X  EOF
X  chmod +x config.status
X! # Some shells look in PATH for config.status without the "./".
X! test -n "$no_create" || ${CONFIG_SHELL-/bin/sh} ./config.status
X! 
X  
X  echo ""
X  echo "Now check the generated Makefile for the C compiler & options, and"
Xdiff -c fromwho.old/fromwho.c fromwho/fromwho.c
X*** fromwho.old/fromwho.c	Sun Jul 24 00:38:11 1994
X--- fromwho/fromwho.c	Sun Jul 24 00:35:01 1994
X***************
X*** 87,98 ****
X  #include <stdio.h>
X  #include <pwd.h>
X  
X! #if USG || STDC_HEADERS
X  #include <string.h>
X! #else /* USG || STDC_HEADERS */
X  #include <strings.h>
X  #define HAS_INDEX
X! #endif /* USG || STDC_HEADERS */
X  
X  #include <parseargs.h>
X  
X--- 87,98 ----
X  #include <stdio.h>
X  #include <pwd.h>
X  
X! #if STDC_HEADERS
X  #include <string.h>
X! #else /* STDC_HEADERS */
X  #include <strings.h>
X  #define HAS_INDEX
X! #endif /* STDC_HEADERS */
X  
X  #include <parseargs.h>
X  
XCommon subdirectories: fromwho.old/parseargs and fromwho/parseargs
END_OF_FILE
if test 44747 -ne `wc -c <'fromwho.patch'`; then
    echo shar: \"'fromwho.patch'\" unpacked with wrong size!
fi
# end of 'fromwho.patch'
fi
echo shar: End of shell archive.
exit 0



