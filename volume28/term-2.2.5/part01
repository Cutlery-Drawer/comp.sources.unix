Newsgroups: comp.sources.unix
From: bcr@physics.purdue.edu (Bill C. Riemers)
Subject: v28i164: term-2.2.5 - SLIP-like functionality between two *IX hosts (REPOST), Part01/09
Message-id: <1.784237938.15304@gw.home.vix.com>
Sender: unix-sources-moderator@gw.home.vix.com
Approved: vixie@gw.home.vix.com

Submitted-By: bcr@physics.purdue.edu (Bill C. Riemers)
Posting-Number: Volume 28, Issue 164
Archive-Name: term-2.2.5/part01

[ Moderator's note: i will be using GNU shar 4.1 from now on, due in large
  part to the failure of the previous posting of "term".  Sorry, Bill. --vix ]

  "term" is a program written by Michael O'Reilly which simulates many
  SLIP like features through an ordinary user's account.  At this time
  Michael is quite busy and doesn't have time to work on "term" or to 
  answer your questions, so please direct questions to me: 

    bcr@physics.purdue.edu (Bill C. Riemers)

#!/bin/sh
# This is a shell archive (produced by GNU sharutils 4.1).
# To extract the files from this archive, save it to some FILE, remove
# everything before the `!/bin/sh' line above, then type `sh FILE'.
#
# Made on 1994-11-07 11:23 PST by <vixie@gw.home.vix.com>.
# Source directory was `/a3/proj/CSU/New'.
#
# Existing files will *not* be overwritten unless `-c' is specified.
#
# This is part 1 of a multipart archive.                                   
# Do not concatenate these parts, unpack them in order with `/bin/sh'.     
#
# This shar contains:
# length mode       name
# ------ ---------- ------------------------------------------
#   1002 -rw-r--r-- term-2.2.5/BUGS
#   1072 -rw-r--r-- term-2.2.5/BUGS-PROBLEM-REPORTS
#  54189 -rw-r--r-- term-2.2.5/CHANGES
#  12488 -rw-r--r-- term-2.2.5/COPYING
#   2909 -rw-r--r-- term-2.2.5/CREDITS
#   5264 -rw-r--r-- term-2.2.5/FAQ
#   8690 -rw-r--r-- term-2.2.5/INSTALL
#  22461 -rw-r--r-- term-2.2.5/Makefile.in
#  15124 -rw-r--r-- term-2.2.5/README
#   2437 -rw-r--r-- term-2.2.5/README.porting
#   5783 -rw-r--r-- term-2.2.5/README.security
#   2844 -rw-r--r-- term-2.2.5/SCO.CHANGES
#   6577 -rw-r--r-- term-2.2.5/TERMRC
#   4781 -rw-r--r-- term-2.2.5/TODO
#  55220 -rw-r--r-- term-2.2.5/Term.HOWTO
#   4561 -rw-r--r-- term-2.2.5/checksum.c
#  11682 -rw-r--r-- term-2.2.5/client.c
#   5917 -rw-r--r-- term-2.2.5/client.h
#  12112 -rw-r--r-- term-2.2.5/compress.c
#   6479 -rw-r--r-- term-2.2.5/config.h
#  13521 -rwxr-xr-x term-2.2.5/configure
#    780 -rw-r--r-- term-2.2.5/debug.h
#   4594 -rw-r--r-- term-2.2.5/do_connect.c
#  52519 -rw-r--r-- term-2.2.5/do_link.c
#   2076 -rw-r--r-- term-2.2.5/do_select.c
#  17164 -rw-r--r-- term-2.2.5/download.c
#   4867 -rw-r--r-- term-2.2.5/host_lookup.c
#   5645 -rw-r--r-- term-2.2.5/includes.h
#   1499 -rw-r--r-- term-2.2.5/jump/README.jump-updating
#   4326 -rw-r--r-- term-2.2.5/jump/jump.funcs
#    111 -rw-r--r-- term-2.2.5/jump/jump.ignore
#     93 -rw-r--r-- term-2.2.5/jump/jump.params
#     33 -rw-r--r-- term-2.2.5/jump/jump.undefs
#   1089 -rw-r--r-- term-2.2.5/jump/jump.vars
#    505 -rw-r--r-- term-2.2.5/jump/size.nm
#   4334 -rw-r--r-- term-2.2.5/linecheck.1
#   8804 -rw-r--r-- term-2.2.5/linecheck.c
#  37822 -rw-r--r-- term-2.2.5/main.c
#    659 -rw-r--r-- term-2.2.5/meta.c
#   3454 -rw-r--r-- term-2.2.5/misc.c
#   7095 -rw-r--r-- term-2.2.5/old/Blurb
#   2313 -rw-r--r-- term-2.2.5/old/INTERNALS
#    652 -rw-r--r-- term-2.2.5/old/PROTOCOL.seria
#   8113 -rw-r--r-- term-2.2.5/old/PROTOCOL.unix
#    146 -rw-r--r-- term-2.2.5/patches/README.patches
#   1941 -rw-r--r-- term-2.2.5/patches/term-2.2.1.patch.gz
#    631 -rw-r--r-- term-2.2.5/patches/term-2.2.2.patch.gz
#   4859 -rw-r--r-- term-2.2.5/patches/term-2.2.3.patch.gz
#   1120 -rw-r--r-- term-2.2.5/patches/term-2.2.4.patch.gz
#  12695 -rw-r--r-- term-2.2.5/pty.c
#   1829 -rw-r--r-- term-2.2.5/redir.c
#    219 -rw-r--r-- term-2.2.5/samples/termrc-14.4k-1
#    245 -rw-r--r-- term-2.2.5/samples/termrc-14.4k-2
#    213 -rw-r--r-- term-2.2.5/samples/termrc-2400-1
#    648 -rw-r--r-- term-2.2.5/samples/termrc-2400-2
#  17163 -rw-r--r-- term-2.2.5/serial.c
#     85 -rw-r--r-- term-2.2.5/server.c
#    731 -rw-r--r-- term-2.2.5/sevenbit.c
#    984 -rw-r--r-- term-2.2.5/shutdown.c
#   8755 -rw-r--r-- term-2.2.5/sockets.c
#   8206 -rw-r--r-- term-2.2.5/spipe.c
#   1736 -rw-r--r-- term-2.2.5/statistics.c
#    704 -rw-r--r-- term-2.2.5/tclient.c
#  16226 -rw-r--r-- term-2.2.5/term.1
#  13612 -rw-r--r-- term-2.2.5/term_clients.1
#   1304 -rw-r--r-- term-2.2.5/term_clients.c
#   5500 -rw-r--r-- term-2.2.5/term_getopt.c
#   6165 -rw-r--r-- term-2.2.5/term_main.h
#   1982 -rw-r--r-- term-2.2.5/term_herror.c
#   4684 -rw-r--r-- term-2.2.5/term_putenv.c
#    773 -rw-r--r-- term-2.2.5/term_setup.1
#   2127 -rw-r--r-- term-2.2.5/term_spair.c
#   6614 -rw-r--r-- term-2.2.5/terminal.c
#    163 -rw-r--r-- term-2.2.5/terminal.h
#  45278 -rw-r--r-- term-2.2.5/termnet.c
#    947 -rw-r--r-- term-2.2.5/termnet.h
#   2506 -rw-r--r-- term-2.2.5/termtest.1
#   3619 -rw-r--r-- term-2.2.5/termtest.c
#   8032 -rw-r--r-- term-2.2.5/tmon.c
#   2253 -rw-r--r-- term-2.2.5/trdate.c
#   3530 -rw-r--r-- term-2.2.5/trshell.c
#   3897 -rw-r--r-- term-2.2.5/udpredir.c
#  18550 -rw-r--r-- term-2.2.5/upload.c
#  26891 -rw-r--r-- term-2.2.5/utils.c
#   4197 -rw-r--r-- term-2.2.5/xconn.c
#
touch -am 1231235999 $$.touch >/dev/null 2>&1
if test ! -f 1231235999 && test -f $$.touch; then
  shar_touch=touch
else
  shar_touch=:
  echo
  echo 'WARNING: not restoring timestamps.  Consider getting and'
  echo "installing GNU \`touch', distributed in GNU File Utilities..."
  echo
fi
rm -f 1231235999 $$.touch
#
if test -r _sharseq.tmp; then
  echo 'Must unpack archives in sequence!'
  echo Please unpack part `cat _sharseq.tmp` next
  exit 1
fi
# ============= term-2.2.5/BUGS ==============
if test ! -d 'term-2.2.5'; then
  echo 'x - creating directory term-2.2.5'
  mkdir 'term-2.2.5'
fi
if test -f 'term-2.2.5/BUGS' && test X"$1" != X"-c"; then
  echo 'x - skipping term-2.2.5/BUGS (file already exists)'
  rm -f _sharnew.tmp
else
  > _sharnew.tmp
  echo 'x - extracting term-2.2.5/BUGS (text)'
  sed 's/^X//' << 'SHAR_EOF' > 'term-2.2.5/BUGS' &&
X
XOK, here are the known bugs in the current release:
X
X  1.  There is no clean way to abort tdownload.  (Not likely
X      to be solved for quite some time.)
X
X  2.  UDP traffic to localhost, will often go to remotehost
X      instead, or not work at all.  (Doesn't seem to be 100%
X      solvable, but at least some cases should be solvable.)
X
X  3.  "linecheck" does not properly test flow control characters
X      17 and 19.  (This will take someone ambitious to solve.)
X
X  4.  "term_read()" and "term_write()" is needed for programs like "xpilot".
X      (Studying the problem.)
X
X  5.  "linuxxdoom+term" runs much slower than "linuxxdoom" runs over SLIP.
X      (I've currently set this problem aside, since even over SLIP 
X      "linuxxdoom" is too slow to play...)
X
X  6.  Under Linux, ./termtest will send the data from the first upload to
X      the wrong stream.  This is probably caused by a libc bug, kernel bug,
X      or an unallocated/mis-allocated variable.
X
X
X                                Bill
X
SHAR_EOF
  $shar_touch -am 1028144694 'term-2.2.5/BUGS' &&
  chmod 0644 'term-2.2.5/BUGS' ||
  echo 'restore of term-2.2.5/BUGS failed'
  shar_count="`wc -c < 'term-2.2.5/BUGS'`"
  test 1002 -eq "$shar_count" ||
    echo "term-2.2.5/BUGS: original size 1002, current size $shar_count"
  rm -f _sharnew.tmp
fi
# ============= term-2.2.5/BUGS-PROBLEM-REPORTS ==============
if test -f 'term-2.2.5/BUGS-PROBLEM-REPORTS' && test X"$1" != X"-c"; then
  echo 'x - skipping term-2.2.5/BUGS-PROBLEM-REPORTS (file already exists)'
  rm -f _sharnew.tmp
else
  > _sharnew.tmp
  echo 'x - extracting term-2.2.5/BUGS-PROBLEM-REPORTS (text)'
  sed 's/^X//' << 'SHAR_EOF' > 'term-2.2.5/BUGS-PROBLEM-REPORTS' &&
X
XOK.  Befor mailing me, or posting on the net, be sure to read the following:
X
X  FAQ
X  Term.HOWTO
X  Any relevent README file.
X
XAt this point I recommend posting to comp.misc.protocols.  I will read these
Xmessages, and be just as likely to help you as with private e-mail.   The
Xmain advantage of posting is that other people can offer there assistance
Xas well!!!  Please include any of the following relavent information:
X
X1. Remote TERM version.
X2. Local TERM version.
X3. Remote unix version.
X4. Local unix version.
X5. Modem type(s).
X6. How the connection was formed.  i.e. seyon, kermit, rsh, telnet, ...
X6. A fairly complete description of the problem you are experiencing.
X7. Things that you've tried to correct it.
X
X
X
X                               Bill
X
X<A HREF="    http://physics.purdue.edu/~bcr/homepage.html                  ">
X<EM><ADDRESS>  Bill C. Riemers,  bcr@physics.purdue.edu   </ADDRESS></EM></A>
X<A HREF="           http://www.physics.purdue.edu/                         ">
X<EM>          Department of Physics,   Purdue University            </EM></A>
SHAR_EOF
  $shar_touch -am 1028144694 'term-2.2.5/BUGS-PROBLEM-REPORTS' &&
  chmod 0644 'term-2.2.5/BUGS-PROBLEM-REPORTS' ||
  echo 'restore of term-2.2.5/BUGS-PROBLEM-REPORTS failed'
  shar_count="`wc -c < 'term-2.2.5/BUGS-PROBLEM-REPORTS'`"
  test 1072 -eq "$shar_count" ||
    echo "term-2.2.5/BUGS-PROBLEM-REPORTS: original size 1072, current size $shar_count"
  rm -f _sharnew.tmp
fi
# ============= term-2.2.5/CHANGES ==============
if test -f 'term-2.2.5/CHANGES' && test X"$1" != X"-c"; then
  echo 'x - skipping term-2.2.5/CHANGES (file already exists)'
  rm -f _sharnew.tmp
else
  > _sharnew.tmp
  echo 'x - extracting term-2.2.5/CHANGES (text)'
  sed 's/^X//' << 'SHAR_EOF' > 'term-2.2.5/CHANGES' &&
XFixes to 2.2
X  - Illegal instruction found for host_lookup.c
X  - SVR4 warnings cleaned up.
X  - Corrected problems caused by the FUDGE_FACTOR when using old termrc files.
X  - Corrected termtest compile problem
X  - Fixed SVR4 bug introduced with UNIX_SV patch
X  - Linux seems to be having real problems with unix sockets now, so I switched
X    tupload to use a tcpip socket.
X  - Corrected host_lookup realloc error.  Pointed out by  Ossi A Tulonen.
X  - Corrected a problem with NULL host_lookup addr values.
X
X2.1 -> 2.2
X  - Changed conflicting file names.
X  - Added 'killall' to termtest.
X  - Added '-1' and '-2' options to termtest.
X  - term_socket split into term_socket and term_udpsocket so that at least to
X    some extent the udp support can be patched to work without term
X  - Added Danny Gasparovski's patch for support of inetd.  I think inetd
X    is supposed to be patched as well.
X  - Added C_SETPEERNAME, so termified clients can know where the connection
X    comes from when tredir was used.
X  - Separated listen() from C_BIND and created C_LISTEN.  However, I
X    created lots of errors in the process, so I left my debugging statements
X    in...   But now termified in.ftpd will work in Danny Gasparovski's inetd
X    modifications in remotehost type mode.  Unfortunately, it will get confused
X    if you use the "localhost" or "remotehost" in the ftp open command.
X  - Updated old/PROTOCOL.unix to reflect current do_link.c options.
X  - Added duplicate_socket() options, so term clients may continue working
X    after a chroot() command.  Also added term_chroot() so we can make sure
X    term has a socket before doing the chroot().
X  - Optimized away most C_GETSOCKNAME calls
X  - Made C_LISTEN a no-return command
X  - Removed a sleep(10) I accidently left in
X  - Added "Achim Bursian" <achim@skyjump.nbg.sub.org> 's patch for EP/IX-OS
X  - Made Makefile.in and configure changes to support termify-0.2
X  - I decided termtest sounds better than termtest.  It is also most consistent
X    with the naming convention used by other term developers.
X  - Changed the hangup stuff just to set the baudrate to 0.
X  - If compression fails, the next packet from the same client will not be
X    skipped, then if it fails again, the next two will be skipped, ...,
X    At most 16 packets will be skipped.
X  - Changed tupload and tdownload to default with or without compression like
X    everything else.
X  - Fixed a problem that caused the termrc "shell" output to be lost.
X  - Speeded up "baudrate 0" by removing the select() delay.
X  - termtest now prints the executed command in the logfile.
X  - A few fixes with the -1 and -2 options in termtest.
X  - Added patches from uknf@rz.uni-karlsruhe.de for:
X	- Check-summing in upload/download
X	- Makefile.in and configure patches to allow static and 
X	  shared library clients to be compiled without a repeat of
X	  the ./configure command
X	- tmon cleanup.
X	- I used his TERMDEBUG environmental variable idea, but in a
X	  completely different implimentation.
X  - Added "mark (m.s.) lord" <mlord@bnr.ca>'s hpux txconn fix.
X  - Tupload and tdownload will autoresume with '-f' when possable.
X  - Added term_strerror and term_perror for outputing errors.
X  - Added host_lookup to speed things up slightly.
X  - Fixed it so if a socket is closed with fclose() or some other manner
X    unknown method to termnet, termnet will close the old socket when the
X    new one is created.
X  - Added "Paul Kronenwetter" <kronenpj@e7sa.epi.syr.ge.com> patches for DGUX
X  - Restored original hangup code.
X  - Fixed file_crc to return an unsigned short, with 0 == failure.
X
XFixes to 2.1
X  - Various tdownload fixes submitted by Chris Metcalf.
X  - Fixed "term_rcmd()" security bug...
X  - Fix to make tdownload sound more sane.  (Chris Metcalf)
X  - Fix to HCX/UX that reduces data losses.
X  - Fixed problems with FATAL returns in non-fatal situations
X 
X2.0 -> 2.1
X  - Added Chris Metcalf's tdownload
X  - Applied Olaf's tmon "patch"
X  - Switched to UNIXLIKE priority by default  (we'll find out if this is
X    reasonable)  If things are sluggish this release, we'll have to switch
X    back.
X  - Gave higher priority to small packets.
X  - Corrected client # used in term_connect() with udp sockets
X  - More error messages, clean-up.  term_herror() split to include
X    a term_strherror()
X  - Added hostname passing with the version #'s to help reduce client startup
X    times.
X  - Made term_send() call term_sendto() so udp messages are always handled
X    correctly.
X  - Hopefully fixed trsh not to have Broken pipe errors, and early closings.
X  - Tupload will now copy file permissions and time stamps.  While uploading
X    a now file, it will have permissions 000 to keep others from trying to
X    read the file.
X  - C_OPEN, C_UPLOAD, and C_DOWNLOAD have been merged...  
X  - C_DOWNLOAD will now return C_STAT information, and then proceed to dump
X    the file.  Since in many case C_DOWNLOAD was closing early, it will 
X    no longer close at the EOF.
X  - TERMCLIENTS is created to pass sockinfo to term children.
X  - Added 2.0.5 and 2.0.6 fixes
X  - Added Chris Metcalf's tupload and tdownload patches
X  - Modified configure to work with rcs version control
X  - Added Ami Fischman's patch for ISC support (SVR3.2 clone)
X  - Added Chris Metcalf's patches for:
X     -floating stopbits
X     -new dll path
X     -tshutdown hangup feature
X  - Fixed term_connect() problem with udp connections
X  - Changed static clients to the same binary to help with disk quotas
X  - Automated my version updating procedure in Makefile.in
X  - Added a check for ERR_BLOCK for non-blocking connect.  I know this is
X    needed for TitanOS and suspect it is needed for a few other OS's too.
X  - Tdownload patched to use mode 0 for while downloading
X
X2.0 -> fixes
X  - "<= 20000" corrected to "< 20000" and printing of version # corrected
X  - Several minor Makefile.in fixes.
X  - reading of DISPLAY corrected in txconn
X  - Corrected putenv to be term_putenv to avoid malloc() problems
X  - Eliminated the compiler warning at the end of udpredir.c
X  - jump-update doesn't seem to work, so I've commented it out.
X  - put escape checking back in do_ignore
X  - To avoid prototype problems, I explicitly changed the getopt stuff to
X    term_getopt.
X  - Explicitly changed all free(x) commands to if(x)free(x) to avoid SunOS
X    problems with NULL pointers
X  - Minor makefile patch to handle non-existent directories properly
X  - Removed "strcasecmp()" commands I accidently left in.
X  - CPU fix for trdated, and minor fix to sendto_from_buff() 
X  - Another attempt to fix the breakout_string to work with a shift value
X  - Fixed term_connect udp problem
X  - Limited PIPE_BUF to 30k to avoid AIX problems, thanks to Joerg Passenberg
X 
Xpre-2.0 -> 2.0 changes:
X	- tmon's priority raise to 15
X	- baudrate checking added for bsd systems
X	- RC_OPTIONS was too large
X	- The sockinfo array is now always initialized first in termnet 
X	  functions.
X	- Very large "udp" messages may be truncated if necessary.  This
X	  should speed things up a bit.
X	- hpux config fix, end seteuid setegid replaced to setuid and setgid.
X
X1.19	This is really 1.18pl07 renamed.  This should be considered Gamma, and
X	is the final release of the version 1 series.
X
XNOTE:	Just to really confuse things, pre-1.19 will now become
X	pre-2.00, and what would have been 1.18pl07 will be 1.19.
X	As an undesired side-effect all previous alpha versions will now
X        be broken.
X
Xpre-1.19 fixes:
X	- version # fix
X	- C_PORT fixed
X	- fixed QNX implementation
X	- included MachTen config options
X	- patch to pty.c to fix SCO and hopefully sol2
X	- recvfrom patch to prevent problems when multiple messages arrive
X	  at the same time.
X	- Problems installing static libs fixed
X	- Problems with missing initializations in recvfrom, sendto and link.c
X          fixed
X	- Corrected "terminate" to work with a shift value
X	- Corrected a core dump problem in link.c from gethostbyname() failures
X	- More pty.c fixes from Chris Metcalf
X	- Minor patch so udp doesn't bomb when term_bind() fails, but the
X	  program continues anyways.  (Or term_bind() is never called.)
X	- Corrected most of the clients to report an error when they can't
X	  connect to a socket.
X	- Two minor SCO fixes.
X	- Another minor udp fix, and a rewind_buffer fix.
X	- Fix to share/non-share support so things should work correctly
X	  without TERMMODE in most cases.
X	- Added convex c-series supercomputer patch thanks to
X          daveg <gillam@zeppelin.convex.com>.
X	- Added Chris Metcalf's tupload patch
X	- Added Danny Gasparovski's tudpredir with a small patch
X	- Final documentation changes and upload fix, "termnet" fix.
X
X1.18 -> pre-1.19
X - UDP support added thanks to:
X 	 Danny Gasparovski <u923168@student.canberra.edu.au>
X - Shared library support:
X	Davor  Jadrijevic <davor%emard.uucp@ds5000.irb.h> wrote the original
X	shared library support.  Most of his code was replaced when we switched
X	from a Makefile to a Makefile.in format, but he is still the one who
X	got things started.
X
X	Shared library Support for:
X		Linux	==> Chris Metcalf, and Davor Jadrijevic
X		SunOS	==> Chris Metcalf
X        	NetBSD	==> Sorry I lost your name & address.
X
X - New configure script and Makefile.in thanks to Chris Metcalf
X - New functions:
X	term_herror	==> Chris Metcalf
X        udp related stuff ==> Danny Gasparovski 
X - New OS support:
X 	QNX 		==> Brian Campbell <brianc@qnx.com> 
X - Termrc options/changes:
X	o "quiet", "packetsize" thanks to Chris Metcalf
X	o Added "blocksize", "increment", "shell", "stopbits" 
X	o Eliminated "retrain" and "nonblock"
X - Client changes:
X	o Patches to improve the accuracy of tupload's progress report and
X	  transmission speed thanks to Chris Metcalf
X	o More information added to "tmon" 's output.
X	o Exit status fixes
X	o txconn now accepts the default display as an argument
X	o txconn now returns the full display name.
X - Config options/macros changes:
X	SHAREDIR	==> Should always be defined
X        USERSHARE	==> Eliminated
X	PRIVILEGED_MODE	==> Eliminated
X	PUBLIC_MODE	==> Eliminated
X	NON_CONNBLOCK	==> Replaced with the reverse USE_CONNBLOCK
X - Serial changes:
X	o Use the detected the serial baudrate on non-BSD systems instead of
X          2400 as the default.
X	o Default stop_bits value changed from 2 to 1 which is really now
X	  treated as a half stop bit.
X	o New blocksize variables to help keep term from creating serial
X	  overruns when writing too much to the modem at once.
X	o Maximum packet size option for those who need it.
X	o Collisions option added for those who have problems sending and
X	  receiving at the same time.
X - Transmission protocol fixes:
X	o Rewind buffer added so term can recover better from errors.
X	o More meaningful transmission error messages.
X        o The breakout string will no longer be echo-ed or sent in a packet
X	  un-escaped until term has accepted it as a legitimate shutdown
X	  command.  Also uppercase letters are not echoed as lowercase on the
X	  remote.
X	o A breakout string instead of a breakout character is used so you
X	  can set something like 'NO CARRIER' to terminate your term server.
X	o The maximum packet size has been increased from 253 to 256
X - Command protocol fixes/changes:
X	o Several functions corrected to return a status or not to return
X	  a status.
X	o Commands like C_CLOSE now accept a client #.
X	o send_command() will no longer wait for commands that previously
X	  always returned I_OK
X	o send_command() will switch from non-blocking IO to blocking IO and
X	  back again when necessary.
X 	o Added C_PUTENV so C_EXEC clients can inherit "txconn"'s redirected
X          display.
X - Internal fixes/changes:
X        o The 1/20th of a second update time is changeable with the increments
X	  rc option.
X	o Changed to a primary variable of max_cps instead of baudrate
X	  and changed baudrate to an unsigned long.
X	o Eliminated some of the arbitrary sizes by introducing I_LIMITS
X	o Switch back to using INADDR_ANY when binding to ports.
X	o read_into_buff will now do reallocations, so BUFF_INC_SIZE was 
X	  replaced with PIPE_BUF
X	o Added a MAX_BUFF size of 32727 to help prevent allocation errors.
X	o Round-robin priority between -20 and 20 is now used for term clients.
X	o Default to use non-blocking connections.
X	o General clean-up of the ring buffer code.
X 	o Thanks to neumann@watson.ibm.com (Gustaf Neumann) who found the txconn
X	  tredir bug was that cons[] elements were not being initialized.
X	o pty.c re-organized and modified with QNX support
X - Termnet fixes:
X	o termnet will test for the file "/etc/termnet" or the environment
X	  variable "TERMMODE" before trying to use full term support.
X	o security bug fixed in term_rcmd()
X	o several new functions added, and atexit() is used to insure term
X	  clients are closed.
X 	o New addressing:  127.0.0.254 == "remotehost"
X
X1.18 Fixes
X - str_version modified to allow patch level releases like this.
X - replaced #include with #define for the first three lines in linecheck.c
X - added 'A' to the argument list for getopt in main.c
X - fixed term_rcmd to use "remotehost"
X - At Stephen J. Roznowski's prompting fixed upload.c and C_STAT to use
X   correct variable types for file sizes and permissions.
X - Following fixes by Chris Metcalf:
X    o separate ULTRIX target for INSTALL="install -c"; and ULTRIX for magic
X      uname-based auto install.
X    o next definition change to use putenv.o not putenv.c as an object
X    o else true; added to Makefile
X    o link.c --> some (char *) casts to keep next happy
X    o lib.c --> changed %.2lu to %02lu
X    o various manual page fixes
X - Hopefully fixed bind_tcp not to fail even if /etc/hosts is wrong.    
X - cleaned up tupload's final report.
X - correct a bug in termnet.c that occasionally caused loss of data during
X   connections.
X - Same fix for term_rcmd, and a security problem fix in term_rcmd
X - Added IRIX definition  (I know this is new, not a fix...)
X - Fixed a problem with USERSHARE causing segmentation faults. again
X - Added Chris Metcalf's fix to fix a buffer overflow problem.
X - Fixed TERMSHARE and TERMDIR path parsing.
X - Added BOONE BARRY EDWARDS for for Dynix/ptx 
X - Split open_pty in an attempt to make it more readable
X - A little more cleaning of include files.
X - Added 'terminate' to the termrc options, so I can specify 'NO CARRIER' to
X   terminate my term connection instead of '00000'.
X
X1.17 - 1.18 (bcr@physics.purdue.edu)
X - Fixed "aix"'s Makefile definition.
X - Fixed a serious problem with "trsh".
X - Extensively cleaned up the include files, and eliminated seteuid and
X   references to USE_SETGID
X - Modified build_args() and term_rcmd() to pass terminal type.
X - Changed BUFF_INC_SIZE to 2048 from 1024.  This seems to speedup tupload.
X - Changed TR: to ETA: in upload.c
X o Applied patches:
X    DYNIX/PTX support	BOONE BARRY EDWARD <boone@a.cs.okstate.edu>
X    NetBSD patches	Stephen J. Roznowski <sjr@zombie.ncsc.mil>
X
X o Added the following termrc options:
X    "login on/off"	default "on"	replaces -DLOGIN_SHELL
X    "delay #"		default 20000	reduces CPU usage
X    "stopbits #"	default 2	allows correct computation of
X					transmission speed
X    "nonblock on/off"	default on	allows users to deactivate
X					non-blocking IO
X    "retrain on/off"	default off	Tells term to try to adjust timeout
X					and window size values.  Takes about	
X					50k-100k to reach optimal values.
X 
X o Added the following files:
X    putenv.c		Only need if your system libraries doesn't have it.
X    term_getopt.c	Always used so options are parsed the same for all OS's.
X    trdate.c		Allows trdate and trdated (thanks to Kevin Lentin) to pass
X			remote system time.
X
X o Rewrote:
X    read_rc()		It's now easier to add new options, and inline comments
X			always work.  
X    term_getsockname()		Now uses C_GETSOCKNAME
X    term_gethostbyname()	Now uses C_GETHOSTNAME
X
X o Fixed:
X    C_GETSOCKNAME	Didn't work with term117
X    C_GETPEERNAME	Didn't work with term117
X    shared versions	If you have _POSIX_SAVED_IDS, term will be much more
X			secure now.
X
X o Added define options:
X    TERM_NFS_DIR	for those using term directory's on NFS mounted
X			directories.
X    N_PACKETS		adjust if you need window sizes greater than 16.
X
X o Added features:
X    Environmental variable passing 	Modified: C_EXEC and C_PTYEXEC
X    Version # passing.			Pre-term117o versions are assumed
X					to be term108.
X    "remotehost"			Short for the other machine's name.
X					i.e. "telnet remotehost"
X 
X1.16 - 1.17 (bcr@physics.purdue.edu)
X - More changes to the TERMIOS stuff
X - Added socket address passing with C_ACCEPT.
X - Added patches suggested by chengb@craft.camp.clarkson.edu (Bruce) for AIX
X - Added the patch by Chris Metcalf to:
X  o  support for both "universe" models under HCX/UX; this allowed me to
X     bag the "universe ucb" I put in the Makefile, and take out the 
X     restrictive comment in config.h under hcx.  Term seems to compile
X     fine under both versions.  I ifdef'ed out the initial "Remote: term"
X     message under hcx since this makes it hang when running under "test".
X
X  o  Portability to NeXT 2.1, which doesn't have S_IXUSR and S_IXGRP.
X
X  o  reworked support for the hideous terminal_new() crock (all my fault).
X     The whole static struct termios thing is a tremendous lose.
X     Different  disagree about field placement (e.g. c_line, and
X     the VFOO fields of c_cc) and name of symbolic constants to use
X     (e.g. values for c_line).  The right thing to do is to pull in
X     the oldterm as the default, then update the fields you actually
X     know about to good values.  I also finally did the right thing
X     and added the equivalent support for the BSD model.  Note that I
X     also change ECHOCTL to be 0 if it's undefined, since some other
X     random hex value is likely to correspond to some unwanted tty mode.
X     (The #ifdef Next stuff disappeared, but I don't think "Next" is
X     defined on the NeXT anyway, just "NeXT".)
X
X  o  I added an ultrix target in the Makefile (just like OSF/1 or SGI).
X     I also changed SHAREDIR to be under /usr/local, along with the rest
X     of the default directories; although people will probably change
X     these to match their local structure anyway, it ought to be consistent.
X
X  o  A bunch of changes to make the -Wall compile cleanly under Linux.
X     These include %d vs. %ld to match argument size, variable
X     initialization where gcc doesn't realize the variable can't really
X     be used uninitialized, adding parentheses around && and ||, removing
X     variables and function calls that aren't used, and adding includes
X     (either explicitly or by forcing I_IOCTL) to prototype functions.
X     It turns out you don't want to include <sys/ioctl.h> as well as
X     the termios stuff on SunOS 4.x, so I explicitly checked for that.
X
X  o  Changes to allow term to compile with the HCX/UX C compiler.  
X     Constructs like "=-" and "=+" used to be synonymous with "-="
X     and "+=", and the HCX/UX compiler warns about them and then does
X     the wrong thing.  So I added whitespace around the "=" to fix it.
X     (I also did two other minor portability mods:  I changed "index"
X     to "strchr" in termnet.c for consistency, and replaced "strdup"
X     with "malloc/strcpy" to avoid requiring it to be in the library.)
X
X  - Added Derek Atkins patch for C_GETHOSTNAME, C_GETSOCKNAME, and
X    C_GETPEERNAME
X  - wrote translation functions str_to_sockaddr(), str_to_hostent(),
X    hostent_to_str(), sockaddr_to_str() and modified routines to use
X    these.
X  - Modified term_gethostname() to use C_GETHOSTNAME
X  - Modified term_connect() not to expect special address #'s for 
X    remote hosts. 
X  - Added term_gethostbyaddr()
X  - Corrected term_accept() to do C_DUMB...  
X
X1.15 - 1.16 (bcr@physics.purdue.edu)
X - added the NO_PTYEXEC option so trsh now works without the '-s' option
X   when connecting to TitanOS
X - Modified Makefile to include TitanOS.
X - Modified Makefile to have the rule "installshare" and other minor
X   changes needed for shared support.
X - Modified main.c and client.c to handle shared mode
X - Modified anyplace I saw an exec or a open to swap userid (if possible).
X - Modified clients for setuid and setgid security.
X - term_gethostbyname, term_connect, and term_rcmd added to client.c
X - modified client.h to reflect these changes.
X - fixed trshell.c to default to "rlogin localhost".
X - Added additional functions term_bind, term_accept, term_close, term_shutdown
X - Added the command C_BINDS to allow AF_INET sockets to connect to a UNIX
X   domain socket.
X - Modified C_BINDN to work for non-zero port #'s.
X - Moved the new networking stuff into termnet.h and termnet.c
X - Renamed the global "debug" to "term_debug" to avoid conflicts.
X - Fixed? N_FTP problem.
X - Added BSDI support.
X - Raised the default MAX_CLIENTS to 64
X
X1.14 --> 1.15
X	
X	Non-blocking connections. Now only the one client hangs when
X	doing a slow TCP connect, instead of all of them. Thanks to
X	Steven Grimm (koreth@hyperion.com)
X
X	Finally got SCO support in. Many thanks to Tom Kelly (tom@ancilla.uucp)
X		for patches, and considerable patience.
X	This introduces a major protocol change, that will break txconn
X	if both ends are not upgraded. xconn will now send C_X_SERVER instead
X	of C_SOCKET. So unless you term server understands this, it will
X	break.
X
X	added Term.HOWTO. Thanks to Bill Reynolds
X
X	added tmon fixes. thanks to The Crouton Man
X		 (crunchy!croutons@dartmouth.edu)
X
X	Fixed cast in pty.c for AIX and other sensitive compilers.
X
X	Fixed bug in BSD pty handling. If master was available, and slave
X	wasn't, term went into infinite loop.
X
X	Removed various warnings from pty.c
X	Removed some automatic initialization because it seems
X	there are a lot of brain-dead of compilers out there still.
X	
X	Lots of nice stuff from Chris Metcalf <metcalf@catfish.lcs.mit.edu>
X	among them:
X		support for HCX/UX 5.1
X		removed various warnings.
X		changed open_pty() to use preset default, not terms
X		initial settings. This will cure termios problems when
X		term was run from seyon or some such.
X		various fixes to docs.
X
X	
X1.13 --> 1.14
X
XHopefully fixed compile errors for NeXTSTEP on intel..
X
XChdir fixed. Thanks to Tom May (ftom@netcom.com)
X
XCompiles mostly clean on suns again. Thanks to lot of people telling me
X	it was broken. :)
X
XMore osf1 support from Craig I Hagen. (hagen%opine@cs.umass.edu)
X
XMacro correct. This fixes problems with tredir + termftp. Thanks
X	to Rick Sladkey (jrs@world.std.com)
X
XFixed login_shell. thanks again to Rick Sladkey.
X
XPlease send me a postcard.. (read README) :)
X
X1.12 --> 1.13
X
XBug in tredir w.r.t. buffering fixed. Was causing segv's. Thanks to
X	Glenn (glenn@physics.su.oz.au)
X
X1.11 --> 1.12
X
XBug in pty handling fixed. If opening a master pty succeeded, but opening
Xthe slave failed, then term wouldn't search the rest of the bank, and would
Xjust skip to the beginning of the next bank. Only applies to BSD style
Xptys.
X
XBugfix for hpux support. thanks Carlo Kid <carlo@sg.tn.tudelft.nl>
X
XNetBSD support from "Stephen J. Roznowski" <sjr@zombie.ncsc.mil>.
X
XSol23 support improved. Thanks to
X	Michael.Bender@Eng.Sun.COM (Duke of Canterbury).
X
XTitanOS support added. Fixed baudrate = 0 problem.
Xadded amount of data transmitted into tmon report.
Xcorrected baudrate=0 problem with tmon by introducing variable scale.
X	Above all thanks to "Bill C. Riemers" <bcr@physics.purdue.edu>
X
XUpdated README file. Major change is:
X	Don't send me E-mail to say you liked term!
X	It's nice, but my mailbox is pretty full.
X	Send me a postcard instead. That's MUCH nicer, and it will
X	impress my girlfriend! ;-) See README for address.
X
X1.10 --> 1.11
X
XNew linecheck!. Many many thanks to Jeff.
XTake a look at the beginning of linecheck.c for instructions.
X
XSome more stats added to upload. Thanks to platt@coos.dartmouth.edu
X
Xfixed tredir, txconn. They were broken by the new(ish) dynamic buffers.
X
Xsupport for AIX. thanks to Scott logan (silogan@vnet.ibm.com)
X	1.10  --> 1.10-sil
X	Added USE_TIOCNOTTY to AIX defs in config.h.
X	Added real AIX-style pty handling in pty.c.
X	Fixed redir.c and xconn.c to pay attention to command line
X	options like -t. 
X	Fixed test.c to run one side of the test pair with "-r".
X	If you compile with -DLOGIN_SHELL, trsh starts a login shell
X	by default. 
X
XBug w.r.t unixware select() fixed.
X
XRe-wrote makefile to get rid of all the system specific makefiles.
X
X1.0.9 --> 1.10
X
Xfixed realloc() for suns. *sigh*. realloc(0, n) fails on a sun.
X
Xreplaced fprintf() with debug_ll().
X
Xfixed language in a few places.
X
Xcorrection: alpha/osf1 support is by Craig I. Hagen, not marius hancu.
XMy mistake. apologies.
X
XBug introduced into upload fixed. Was causing all transfers to fail
Xleaving zero length files.
X
XDelay that was inadvertently left in removed. There was a 1/10th of
Xsecond delay in the main loop, resulting is awful thruput on v.high
Xspeed lines.
X
XIf the baudrate is set to 0 (i.e. -s0 ) then rate limit is not done.
XThis is useful on higher speed links. The normal window/timeout
Xmechanism is more than good enough on links > 9600.
X
XPs. This is not a version of term. See 109 release notes. I'm not sure
Xquite what it IS, but is definitely isn't a version. :-)
X
XAdded the delay back in, but made it smaller. It drops the CPU time used
Xby an order of magnitude....
X
X1.0.8 --> 1.0.9
X	
X3 fixes by Kay Roemer. Term will now close some files that it wasn't
Xbefore, read buffered data from a child that has exited, and close the
Xright sockets for children.
X
XAlpha/osf1 support from Marius Hancu
X
XPrevent compressing more than 2K of data into a single packet.
X
XThe biggy. Preventing data overruns. People using TCP connections that
Xhave very compressible data can now work in peace. Term previously used
Xfixed size buffers. Now it uses dynamic buffers. This means that if a
Xclient is a bit slow in reading data from term, term will increase the
Xbuffer size instead of throwing away data. On the down size, term's
Xmemory usage is now theoretically unlimited. This should fix most if
Xnot all of the problems people had with X over term. I finally got
Xbitten by this once too often.
X
XTHIS is DEFINITELY the last version of term. I hope.
X
X1.0.7 --> 1.0.8
X
XWell, I did what I swore not to. Here's a new version of term.
X
XFixed a bug relating to overflow on a timer variable. Caused term to
Xstop working sometime on Oct 26th.... *blush*. Jeff and I found this
Xat the same time (probably along with a LOT of other people.. :), and
XI used jeff's patch. (cleaner than mine).
X
XMerged in olaf's patches. Olaf, I've managed to delete your email.
XPlease mail me again.
X
XSee 'Blurb' for olaf's changes.
X
XI suppose I'll have to support this bloody version too! argh!!!!. :)
X
X--------------------------------------------------
X
X
X
X
XAt this point, you start at the end of the file and read backwards..
XI started adding new information to the top, instead of the bottom.
X
X---------------------------------------------------
X0.3--> 0.4
X	Fixed upload to make the optional arg really optional.
X	Fixed main.c to NOT cat the file arg to the socket name.
X0.4--> 0.5
X	Added baudrate option + env variable.
X	Xconn now checks the DISPLAY variable to know what display
X	to use.
X
X	Fixed bug in xconn relating to printf.
X	Fixed main.c. Was using wrong lower bound for baudrate.
X		Thanks to Someone who's name escapes me. mail me again
X		please.
X0.5--> 0.5.1
X	Silly bug in strncmp() in main.c
X0.5.1.--> 0.5.2
X	Fixed a few out of date docs.
X0.5.2.--> 0.5.3
X	The argument parsing got improved a lot.
X	Thanks to M. Saggaf.
X0.5.3 --> 0.6
X	Xconn got modified to use an INET socket instead of a UNIX
X	socket. This means you can run term on one machine, and use x apps on
X	another.
X	
X0.6 --> 0.6.1
X	I wrote a Q&D hack to see how the serial line performs.
X	
X	Consists of checkline.c and linerem.c (for local and remote
X	ends). See readme for details.
X0.6.1-->0.6.2
X	Fixed up pty.c a bit more. Hopefully it should the child proc
X	should be able to lose the controlling term on a sun now. :(
X	There was a damned silly bug. I had forgotten to #include config.h
X
X	Fixed xconn to properly print the display it was connecting to.
X	Fixed xconn to look at DISPLAY if it existed and use that for the
X		display number.
X	Fixed up sun stuff a bit (EAGAIN instead of EWOULDBLOCK).
X
X	Fixed up terminal.c to set VMIN and VTIME
X0.6.2 -> 0.6.3
X	Added a ~/.term/termrc 
X	Should be able to set everything from the termrc file, including
X	escaped characters. See TERMRC for format.
X
X	Beware, it isn't tested. :) Also, at the moment, it assumes that
X	adding 32 to an escaped character, won't produce another escaped 
X	character.
X
X	Two new features. a -f option tell term to generate control-Q's 
X	( in case line noise generates a control-S ).
X
X	In a termrc you can specify a 'shift'. This simply get XOR'ed with
X	all character before they are sent, and after they are received. The
X	purpose being to map a lesser used range on characters down to 0-32
X	(which are all escaped). I use 224 (0xE0). Haven't measured the 
X	speed up. But histogram of characters received shows a drop in the
X	number of escapes sent.
X0.6.3 --> 0.6.4
X	I was forgetting to close the file descriptor used to read the termrc
X	file.
X0.6.4 --> 0.6.5
X	A goddam silly bug. was doing if(strcmp) instead of if (!strcmp)
X	SIGH!!!!!!!!!
X0.6.5 --> 0.6.6
X	Another silly one. Wasn't escaping characters properly.
X0.6.6 --> 0.6.7
X	Changes the way the input window was worked out. Hopefully it
X	fixed some bugs reported by some ppl.
X0.6.7 --> 0.7.0
X	Re-wrote the compression tree handling. Hopefully a lot clearer, 
X	and understandable. Hopefully less bugs too. 
X
X	Fixed a few of the include files to remove warnings.
X	Fixed a a bug in upload.c Was doing i == 0, instead of i =0.
X	Fixed a bug in test.c had arguments in wrong order. Thanks to 
X	fjh?? for pointing this out.
X	
X	Fixed serial.c so that five 0's will exit term regard less of what
X	the byte_shift is set to.
X	
X0.7.0 --> 0.7.1
X	Added support for SGI. Thanks to 'warwick' harvey.
X
X	Fixed xconn to properly look at DISPLAY, search for the first
X	unused display. The way to run it now is...
X	"setenv DISPLAY=`xconn`"
X
X	Reduced window size to 2. Don't THINK it will adversely affect
X	throughput but haven't extensively tested it.
X
X0.7.1 --> 0.7.2
X	Added options to configure both the window size, and the packet
X	timeout values. Changed the default window size up to 3. A size of
X	2 at 2400 baud introduces too much latency into keystrokes.
X
X	Added an option to toggle transmit forcing. Forcing is now off by
X	default. Not tested properly.
X	
X	Added the -w , -t flags.
X0.7.2 --> 0.7.3
X	Fixed bug in xconn relating to searching for unused display.
X	Added the -n flag. See OPTION, and TERMRC for details. See also	
X	the source. :)
X
X	Cleaned up some more prototypes. Compiles are now cleaner.
X0.7.3 --> 0.7.4
X	Added handling of escaped characters that produce another char
X	that should be escaped.
X0.7.4 --> 0.7.5
X	Fixed noise echoing to remove byte shifting.
X	Tried to write some BSD terminal handling. Someone who has BSD want
X	to test this??
X
X	The famous compression bug found!!!! The all-singing-all-dancing-
X	wonder is gone! Many many thanks to Janne Sinkkonen (sinkkone@
X	cc.helsinki.fi) for this. I was clearing 300 bytes , on a 256 byte
X	buffer. :(
X0.7.5 --> 0.7.6
X	More prototype fixes.
X	Removed the call to abs() in link.c (convex does have it apparently)
X	
X	Fixed checkline.c to send an XON after every character (so it doesn't
X	'freeze'), and increased rate to 16 characters per second instead of 
X	1.
X
X	There is a new client 'redir'. Usage is 'redir <server port> <remote
X	port>'. So you can do 'redir 23 4000' and then everyone who
X	telnet's to port 4000 on your remote machine, will get connected
X	to telnetd on your local machine.
X0.7.6 --> 0.7.7
X	Fixed a bug in main.c. Fudge_flow was supposed to be a counter
X	limit, not a flag.
X0.7.7 --> 0.7.8
X	Fixed makefile. 'make test' make the wrong file.
X
X	Changed the way error handling was done. Added in LL
X	read/write debugging.
X	
X	Added support for ranges in termrc. i.e. 'escape 0-32' should
X	work. Not extensively tested.
X	
X	Lots of structural changes internal to term.
X
X	Missing break; in main.c -n was broken. fixed now.
X	
X	An incredibly stupid bug in serial.c fixed. I was using && instead of 
X	||. Resulted in the retransmission being brain-dead. *SIGH!!!!!*
X	Resulted in the packet window being as full as possible instead of
X	the reverse.
X
X	Changed the algorithm used to decide re-transmission. Now it will
X	never timeout a packet before the 'timeout' value.
X
X	Will not write out an error message for any line of the ~/.term/termrc
X	file that it doesn't recognize.
X
X	Redir can now redirect to a host. I.e.
X	'redir 119 my.news.server:119' on the linux box, lets you treat your
X	linux box as an NNTP server. Thanks to Rick Sladkey.
X
X	Renamed all the clients to get a 't' in front.
X	term --> term
X	rsh --> trshell
X	upload --> tupload
X	xconn --> txconn
X	rsystem --> trcmd
X	redir --> tredir
X
X0.7.8 --> 0.8.0
X	
X	Replaced waitpid() with wait3().
X
X	Added support for NeXT
X	Added support for AIX
X	Added (partial) support for BSD
X	
X	Thanks to crunchy!croutons@dartmouth.edu we have support
X	for individually compressed streams. I.e. you can be uploading
X	a file with no compression, while running a shell who's output does
X	get compressed. 
X
X	Added priorities for streams.
X
X	Vastly improved response time with multiple streams (I hope.. ).
X	Achieved by checking for new clients ready more often. The old scheme
X	was to take data from a client until it had none left before looking
X	for a new client. Now it looks for a new client at the beginning of
X	every packet. This is what it should have been doing anyway. 
X
X	
X	Re-wrote the client option handling. Now all clients take 4 arguments
X	-t <server> 	Tries to connect to the socket ~/.term/socket<server>
X		Default is "". Useful only if you are running multiple
X		terms (over multiple serial connections).
X
X	-r	Turns off compression for this link.
X	-c	Turns on compression for this link. 
X		the above two options affect compression both ways. The
X		capacity is there to only compress one-way. Tell me if you
X		want this?
X
X	-p <number> Changes the priority of the link to <number>. Default
X		is zero. tshell has a default of 2.
X		tupload has a default of -2.
X
X	The priority is currently absolute. i.e. if a there is a client with 
X	a high priority with data to send, then no client with a lower priority
X	will send until the higher has finished. This probably needs improve-
X	ing.
X
X0.8.0 --> 0.8.1
X	Redid all the #include files. Simplified (hopefully), and consider-
X	ably easier to port.
X
X	Fixed a bug in link.c. Was very silly. It could end up switching
X	channels in the middle of a control sequence.
X
X	Added signal handling for kill signals and segv's.
X
X0.8.1 --> 0.8.2
X
X	Fixed another silly bug in 'tredir' client. Was introduced in version
X	0.8.0
X
X	Fixed bug in makefile. Had missed a few places that were using
X	the old names of the clients.
X
X	Fixed bug in xconn.c Was using wrong filename for the X-window
X	unix-domain socket.
X
X	Added some more debugging calls. -d64 should be fairly informative
X	for control information now.
X
X	Added quick+dirty 7 bit support. run term with '-a' on both ends to 
X	use it (a == seven. maybe.). Or put "sevenbit" in your 
X	~/.term/termrc file.
X	WARNING!!!!!! It is very rudimentary. In particular, unless you send 
X	everything compressed, then it will strip the top bit of it. i.e. 
X	uploading file when not using compression with corrupt them.
X	WARNING 2!!!!!. It is in no way tested. Mail me how it goes..
X
X	Makefile got extensively re-written. Thanks to croutons (again :).
X
X0.8.2 --> 0.8.3
X	0.8.2 was basically pretty stuffed try again.
X
X	Fixed bug in compress.c (introduced in 0.8.2).
X	Fixed a few minor bugs in link.c relating to put_client_data being
X	called with an uninitialized structure.
X
X	Hopefully fixed the bug with things not exiting when they quit.
X	Really fixed the above bug. Telnet through a redir will now exit
X	properly. (was a bug related to the changed format for control 
X	sequences. Read PROTOCOL.unix for details).
X	
X	Brought PROTOCOL.unix up to date. 
X
X0.8.3 --> 0.8.4
X	Fixed prototype spelling error in link.c
X
X	Tried to fix trcmd. Does anyone use this??
X	
X	Fixed a few race conditions WRT control messages. Was clearing
X	buffers at some in-appropriate points. Should fix the multiple
X	upload bugs.
X	
X	Fixed get_next_client so that clients with the same priority share
X	the line equally.
X
X0.8.4 --> 0.8.5
X	Fixed the bug that was corrupting X windows streams.
X
X	Fixed a (potential) bug in redir.c (Same one as xconn.c).
X
X	Removed the trcmd client.
X
X	Renamed the trshell client to be 'trsh'.
X0.8.5 --> 0.8.6
X	Removed the C_SYSTEM command, and associated files.
X	
X	Fixed a bug in xconn.c WRT searching for an unused display.
X
X	Thanks to croutons again, trsh now takes multiple arguments happily.
X	commands like 'echo this is a multiple argument command' should work
X	just fine.
X
X	Wrote a CREDITS file. Anyone I have missed please mail me.
X
X	Applied Rick Sladkey's changes so that C_SOCKET will work with
X	a dotted decimal address.
X0.8.6 --> 0.9.0
X	Removed 7 occurrences of dubious language.
X
X	Fixed pty.c to test for more ptys. Thanks to Rick sladkey for
X	pointing this out. It now tests pty{p,q,r,s,t,u,v,w,x,y,z} if this
X	isn't enough, let me know, and I will fix it for more.
X
X	Went and implemented return codes for all commands. This means that
X	you shouldn't get any 'hangs' when attempting to use non-existent
X	ports and other such oddities. This also changes the command protocol
X	which means you have to upgrade both ends, and all your clients to use
X	it.
X
X	tupload will now do recovery. If you try to upload a file that
X	already exists on the remote end, then term will seek to then end of
X	the file, and to the equivalent position on the remote file, and start
X	uploading from there. Not fully tested.
X	
X	
X	
X0.9.0 --> 0.9.1
X	Write a minimal 'tstat' client. It currently just tells the
X	compression ratio's that the local and remote ends have achieved.
X
X	
X	Write a Q&D strerror() for sun's. It is in lib.c
X
X	
X	Fixed a small bug in lib.c. Was doing if t<0 && !t ...
X
X	
X0.9.1 --> 0.9.2	
X	We finally have some genuine man pages! Thanks very much to gtaylor
X	(see CREDITS file).
X
X	Added support for HPUX.
X
X	Added in a new checksum routine. This one is a genuine CRC.
X	
X	Started to merge checkline into term proper.
X
X	Changed most things to use unsigned chars. Should fix a few problems
X	on sun's.
X
X	Eliminated a race condition in pty.c
X0.9.2 --> 0.9.3
X	Fixed a small bug in man pages.
X
X	Updated the README file.
X
X0.9.3 --> 0.9.4
X	Updated the escaping mechanism. It is now dependent on the direction
X	of the link. There are 3 new termrc commands.
X	
X	"escape" now simply tells term never to transmit that character.
X	"ignore" tells term to silently strip that character from the
X		input stream. I.e. if your modem uses software flow control
X		use "ignore 17" and "ignore 19".
X	"seven_in" tells term that the remote end is seven 7 bit tokens.
X	"seven_out" tells term to transmit seven bit tokens.
X
X
X	So in the unlikely event that you have a seven bit link TO to remote 
X	host, and an 8 bit link FROM the host. Lets say that it chews all
X	control characters and 126. The 8 bit link is clean. No characters
X	get chewed.
X	Your local termrc should look
X	like..
X		seven_out
X		escape 0-31
X		escape 126
X	and the remote termrc.
X		seven_in
X		ignore 0-31
X		ignore 126
X		
X
X	"sevenbit" now is the same as doing both "seven_in" and "seven_out".
X	
X0.9.4 --> 0.9.5
X	Fixed silly bug WRT seven bit mode. Was sending packet that
X	were too long.
X
X	Added (a little) more into to tstat client.
X
X0.9.5 --> 0.9.6
X	Added an error check to tredir, to check for errors in binding the
X	local socket.
X
X	Fixed the sevenbit support a bit. It was still possible for
X	term to try to generate packets longer than 127 bytes.
X0.9.6 --> 0.9.7
X	Fixed compression for seven bit mode.
X	
X0.9.7 --> 0.9.8
X	Added more information to C_STATS
X	
X	Change client.c to include varargs.h for a sun. Mail me if this is
X	wrong.
X
X	Changed 'server' to be 'term_server' to avoid (potential) conflict
X	when linked with other programs.
X
X	Fixed a problem in client.h whereby un_char might not have been 
X	defined.
X
X	Fixed the man pages WRT tredir %d %s:%d.
X	
X	Added tmon client. Fixed a few minor bugs in the same.
X	
X	Extensive internal changes. Everything now uses the Buffer struct,
X	and all the oddball buffer routines have been cleaned up. Also,
X	partial support for bound sockets has been added.
X
X	Added support for SIGWINCH. Written by Teemu Rantanen, cleaned
X	up slightly by me. Doesn't (yet) handle on-the-fly resizes.
X
X	
X0.9.8 --> 0.9.9
X	Fixed an include file bug in trshell.c Wasn't #include'ing signal.h
X
X	Implemented a remote bind protocol. See the two new sever commands 
X	C_BIND, and C_ACCEPT. 
X
X	Fixed some more char/un_char conflicts.
X
X	Fixed tmon.c (wasn't including sys/time.h).
X
X	A new and improved version of tmon is included. This one is
X	much more accurate.
X	
X0.9.9 --> 0.9.9a
X	Fixed a HZ in tmon. Should compile most places now.
X
X	Half fixed a bug relating tmon.c. It works, but there is still a 
X	race condition. The problem is if two clients start at opposite ends
X	at the same time, they will get the same number. This is bad.
X
X	(Hopefully) fixed SGI support.
X
X	Tried to fix a condition relating to EWOULDBLOCK. (Could people
X	please try and let me know how to reproduce a bug if they see it!?)
X
X
X99b
X	
X	Fixed all the check_client() stuff. Should exit more cleanly now.
X	*cross fingers*.
X99c
X	Improved the Makefile, so there is only one reference to the compiler.
X
X	Fixed the select(). It now passed the number of fd's to check, not
X	just 64.
X
X	Added support for varargs.h. varargs is used instead of stdargs
X	if the #define USE_VARARGS is defined.
X
X	Fixed spelling of 'compiling' in README file. (Thanks to 
X	cfs@nir.gatech.edu [Charles Stevens]).
X
X	Changed xconn.c to do a little more error checking.
X
X	Improved the README to be a little clearer.
X099d
X	Documented the commands in client.h
X
X	Added a C_DUMP command. usage is C_DUMP %d, meaning to go dumb for
X	the next %d bytes. See protocol.unix.
X
X	Removed the C_CLIENTNUM, and replace it with a C_STATS sub-function.
X
X	Documented all the new commands in PROTOCOL.unix. Happy now 
X	Quarters? :)
X
X	Added in Jeff Grills new upload.
X
X	Fixed tmon to remove all references to termio{s} from it.
X	Added calls to terminal_raw() so that any key will immediately exit
X	it. Read the key before exiting to ensure it doesn't get read 
X	by the shell.
X
X	Fixed JG's new upload so that it uses C_DUMP, instead of opening
X	a new connection for each file. Added a C_STAT at the end to ensure
X	that tupload doesn't exit before the entire file is there.
X	
X	Fixed read_into_buff to take the size. (needed for new upload).
X	
X099e
X	Fixed a few bugs in upload.
X	
X099f
X
X	various bug fixes and code clean-up. (read: I can't remember what
X	I changed. :)
X	
X	Added a bit of sanity checking in link.c:get_client_data();
X099g
X	More sanity checking in read_into_buff/write_from_buff();
X	Added a bit more information to tmon.
X
X	Extended C_STAT to read file types and permissions.
X	
X	Re-wrote much of xconn.c to be more robust, and smaller.
X
X	Re-wrote xconn a bit more, and redir as well. Moves the bulk
X	of the (common) code to connect.c.
X099h
X	Updated PROTOCOL.unix
X
X	Added S_IFREG, and S_IFDIR to link.c for those machines
X	that don't have them. (i.e. F****** suns!).
X
X	Changed the dependencies to NOT include the system header files.
X
X	Tried to get term to compile nicely on a 386BSD. 
X	Fixed Makefile.{sun,sgi} to include connect.c
X
X	Fixed xconn to print out the display number it is using.
X	export DISPLAY=`txconn` should now work.
X
X	Made tredir move itself into the background automatically. No longer
X	need to invoke it with 'tredir ... &'.
X
X	Replaced a few 'char' with 'un_char's. There was one in serial.c
X	that was screwing compilers that used signed chars.
X
X	Upgraded upload to match Jeff Grills. The new upload
X	has lots of features that aren't yet documented. 
X
X	Improved pty.c and general hpux support. Thanks to H.J. Lu
X
X	Re-wrote bits and pieces of upload to suit myself. Made gratuitous
X	changes to the formatting on the way.
X099i
X
X	Removed the automatic escaping of characters < 32.
X	Now escapes NO characters be default. BEWARE!!!!!!
X	If this causes you problems, a quick fix is to add
X	'escape 0-31' to your ~/.term/termrc file. This improved
X	my CPS rate by some 12% just up escape 30 instead of 32 characters.
X
X	Added a signal() to ignore SIGPIPE's. This was what was killing
X	term at in-opportune times.
X
X	Fixed a bug in C_STAT relating to permissions.
X
X	Made tupload use no compression by default. If you want to 
X	upload something and have it be compressed over the link, you
X	will have to use 'upload -c ...'. Term can't handle compressing
X	stuff that is already compressed.
X
X	Txconn, and Tredir will now only run when term is running, and will
X	exit when term exits. Tell me how you feel about this change.
X
X099j
X
X	Tried to clean up shell exiting.
X
X	Fixed up the pty.c code. It was checking for the wrong ptys
X	first. The patches hpux had broken ptys for other machines.
X
X099k
X
X	Prevented term from sending five '0' itself accidently, and
X	killing the remote term as a result.  	Moved the detection
X
X	Fixed S_ISREG's in link.c for machines that are missing them.
X	Was defining the wrong thing.
X
X	Ripped out the prevention of term sending five zeros. I had 
X	made a mistake. Term only interprets the five zeros if they
X	are line noise. Instead, add a 'breakout' option to termrc.
X	This sets the character to watch for.
X
X	Fixed the sig_child handling a bit more. Shells should exit
X	cleanly now...
X
X	Improved the sigwinch handling for sun's. Sun's are broken.
X	I am getting a VERY low opinion of suns....
X
X099l
X
X	Fixed a minor bug in link.c that caused upload to hang. It only
X	showed up when there was a '@' in a byte, on a 2047 byte
X	boundary.
X099m
X	
X	Changed the sample TERMRC to be a real sample.
X
X	Fixed tmon to not core-dump is there is no compression.
X
X	Changed checkline to start from 0 instead of 32 (to fit in
X	with removing the automatic escaping of 0-31)
X
X	Jeff Grills improved upload some more. Added a progress indicator.
X	Now to write download.......
X
X	Default timeout is now 3.5 seconds instead of 2.5 (i.e. timeout 70)
X	This is to make it work by default with slower modems.
X
X	Added lots of support for people with multiple term's on the 
X	same machine. Now if you run 'term home' it will try and read
X	~/.term/termrc and then ~/.term/termrc.home. It is ok for one
X	or both of them not to exist.
X
X	If the TERMSERVER environment variable is set, then clients will
X	act as if they had been invoked with '-t $TERMSERVER' and try to
X	connect to that server. i.e. if you run 'term home', then doing
X	"export TERMSERVER=home" will cause all clients to use the 'home'
X	server.
X
X	Added the 'chdir' option to termrc. 'chdir <directory>' will cause
X	term to try and chdir to that directory on startup. This will 
X	cause all relative file references to be relative to that directory.
X
X	Fixed PROTOCOL.unix. Removed the C_EXEC entry as it is obsolete.
X
X	Had a go at improving the robustness of checkline/linerem. Made them
X	work asymmetrically.
X
X	Improved the pty handling. It now checks to make sure both the
X	master and slave can be opened before committing itself. This lets 
X	it handle ptys that are left in a dud state.
X	
X	Fixed a bug in serial.c. The byte_shift was resulting in corrupted
X	bytes in seven_bit mode if byte_shift was > 127.
X
X	Implemented byte stuffing. In seven_bit mode, term now stuffs
X	7 eight bit bytes into 8 seven bit bytes. It doesn't check if
X	the stuffing is needed tho. :( It should only stuff if the top
X	bit is being used, but it stuffs all raw characters. Ppl can
X	live with this for now.
X
X	Added a CPS to the upload -vv display.
X
X	Fixed a minor bug in upload.c relating to -vv display. (CPS was
X	-ve and too high ).
X
X	Added a few patches to support AIX. Minor stuff.
X
X	Fixed a bug with response which resulted in results being sent to
X	the wrong end.
X
X099n
X
X	Updated the CREDITS file. Re-wrote the introduction blurb.
X
X	Added sevenbit.o to Makefile.{sun,sgi}. An oversight.
X
X	Fixed a little bit of AIX support.
X
X	Fixed the sevenbit byte stuffing.
X
X	upload has a few bug fixes. The CPS bug is fixed. There is 	
X	a '-u' flag. This will erase the file after a successful upload. 
X	source file pathnames are now truncated. use '-as' to override this.
X	Note that you need to use a '--' before the first filename if
X	you want to use -as. i.e. 'tupload -f -r -vv -- local.file -as
X		remote.file'.
X
X	Extensively revised the man pages.
X
X	Checkline/linerem got re-written by Jeff Grills. Try them and see
X	what they say about your line.
X
X099o
X
X	checkline/linerem replaced by linecheck. MANY thanks to Jeff Grills.
X
X	Got rid of the 'Clearing Dict table' messages.
X
X	Fixed a bug relating to connections getting closed before the buffers
X	were flushed. 
X
X	Deleted the checkline/linerem programs and associated man pages.
X	
X	Fixed a few minor bits in linecheck. Stuffed up all the formatting
X	to suit me and my editor.
X
X	Placed term under Gnu Copyleft. Changed README to suit. Added
X	a copy of the GNU copyleft.
X
X	Removed some more debugging information from main.c the 'client gave this:..'
X	and 'select: ..' warnings are now gone.
X
X	Make tredir/txconn ignore SIGPIPE signals. These were causing it
X	to exit when clients exited in a hurry without letting tredir
X	know about it.
X
X	Changed redir, and xconn to have the capability to redir multiple
X	ports in the one redir. If anyone wants to play with writing 
X	a user interface, feel free. :). do_connect() now takes an
X	array of ports to watch.
X
X	Re-wrote the checkline/linerem section of the README to be about
X	linecheck. Edited the information jeff sent to be more readable for novices.
X099p
X
X	There was a race condition that occurred when a remote client, and
X	a local client started up at the same time. To fix, edit your
X	~/.term/termrc file on ONE end, and add the line 'remote' to it.
X	This should ensure lines like 'trsh -- tupload -f -c -v o' will work.
X	
X	Makefile fixed to generate 'linecheck' not 'check'.
X
X	More debugging information got lost. This time the perror("accept");
X
X	Installed a new(er) version of linecheck. Thanks again to Jeff.
X	Fixed the dependencies in the Makefile for linecheck.
X	
X099q
X
X	Fixed a bug in upload. It wasn't closing files after it had
X	uploaded them.
X
X	Added -l option. Does the same as redirecting stderr. Just for ppl
X	with braindead shells.
X
X	Made term use only stdin, instead of stdin/out. I.e. term will try
X	to write to stdin to write to the modem. This should normally be ok.
X
X	Added the -1 option. If used, term will use stdout as the
X	modem, instead of stdin.
X
X	Added -v option. Usage is '-v<filename>'. Set the modem device.
X	i.e. run as 'term -v/dev/ttys1' to use /dev/ttys1 as the modem.
X	Warning!!! For forward compatibility do NOT use more than one
X	-v.
X	
X	Properly fixed upload, and added a C_CLCLOSE command for clients.
X	Interested ppl can see link.c.
X
X	Fixed a bug in send_command() that was resulting in dud command_result 
X	returns.
X
X	Re-wrote the error reporting in link.c. Replace do_return with the two
X	routines ret_ok(), and ret_fail().
X
Xterm 1.0.0.
X
X	YES!!!! at last!
X
X	Patched in Jeff's linecheck patches.
X
X	Fixed 2 bugs relating to upload.
X
X	released 1.0.0
X
X	NOTE!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
X	ALL FUTURE RELEASED WILL BE NAMED "SLAP"
X
X	There will not be another version of term. It has been re-named
X	"slap" (for serial line access protocol).
X
Xterm 1.0.1
X
X	Re-wrote the stdin/out handling as it was causing problems
X	on the NeXT.
X
X	Fixed a small bug in upload relating to uploading a file
X	from stdin.
X
X	Note! The above implies there will be no work done on term.
X	This is just to say that bugs will be fixed as they appear, but
X	term will get no new features. All my efforts will now go into
X	Slap.
X1.0.2
X	Fixed a mistype in terminal.c Had in mypid; instead of int.
X	Thanks to warwick for this.
X
X	Added code to define STDIN_FILENO in linecheck.c if it wasn't
X	already defined.
X
X	Fixed the Makefile.sun for linecheck. Oversight.
X
X1.0.3
X	Fixed the problems with term hanging on Sun's. Turns out it
X	is a dogey sun select(), and a missing continue in my source.
X	Thanks VERY much to one David E Wexelblat.
X
X1.0.4
X	Changed the way term worked for non-vhangup cases.
X
X	Merged in Hugh Secker-Walker's patches to support NeXT boxes.
X	
X	Merged in support for SGI machines.
X
X	Added makefiles for mips, and next machines. Thanks again to Hugh.
X1.0.5
X	Added SVR4 support.
X
X	Tried to fix up a bug in xconn and tredir
X
X1.0.5.a 
X	[ by Hugh Secker-Walker, for NeXTstep, not part of Michael's release ]
X	
X	At Michael's suggestion to fix a bug with high-speed links, changed
X	link.c line 94 from  'if (p_in[.... '  to  'while (p_in[....'.
X
X	Added README.NeXT, README.MIPS, select.c.mips, upload.c.mips.
X
X1.0.5.b
X	[ by Felix A. Lugo, E-mail: Felix_A_Lugo@ATT.COM ]
X
X	Added Solaris 2.1 support.
X
X	Fixed problems with do_resize (misc.c) and added support for pixel
X	window sizing (misc.c, link.c, trshell.c).
X
X	Fixed problem with restoring tty settings after abnormal exits and
X	re-enabled SIGINT and SIGQUIT.
X
X1.0.6
X	Merged in changes as per above, and released as 1.0.6
X
X1.0.6.a
X	[ by Hugh Secker-Walker, hugh@mit.edu ]
X	
X	Trsh accepts -s option for a simple connection, i.e. no pty on
X	remote end using C_EXEC.  Also, trsh restores terminal when killed.
X
X	In link.c, support for C_EXEC, to run a command using /bin/sh -c, 
X	and no pty.  This for the -s option of trsh.
X
X	In pty.c, fixed use of pipe used to confirm that child exec'ed.
X	Unresolved problems remain (on NeXT) with printf in child
X	hanging.  (This latter was not a problem until the pipe bug
X	was fixed so that the parent (term) really waits.)
X	Also, added open_socket() for support of C_EXEC.
X
X	In term.1, term_clients.1, and term_setup.1, numerous editorial
X	changes and additions.
X	Merged in changes as per above, and released as 1.0.6
X
X
X1.0.7
X	Fixed Makefile.sun to look for linecheck.c instead of checkline.c
X	
X	Fixed misc.c to NOT put out literal bell's (dunno about you but I 
X	hate the noise). 
X
X	(all above due to jeff grills.)
X	
X	See above list of change by Hugh as 1.0.6a
SHAR_EOF
  $shar_touch -am 1028144694 'term-2.2.5/CHANGES' &&
  chmod 0644 'term-2.2.5/CHANGES' ||
  echo 'restore of term-2.2.5/CHANGES failed'
  shar_count="`wc -c < 'term-2.2.5/CHANGES'`"
  test 54189 -eq "$shar_count" ||
    echo "term-2.2.5/CHANGES: original size 54189, current size $shar_count"
  rm -f _sharnew.tmp
fi
# ============= term-2.2.5/COPYING ==============
if test -f 'term-2.2.5/COPYING' && test X"$1" != X"-c"; then
  echo 'x - skipping term-2.2.5/COPYING (file already exists)'
  rm -f _sharnew.tmp
else
  > _sharnew.tmp
  echo 'x - extracting term-2.2.5/COPYING (text)'
  sed 's/^X//' << 'SHAR_EOF' > 'term-2.2.5/COPYING' &&
X
X		    GNU GENERAL PUBLIC LICENSE
X		     Version 1, February 1989
X
X Copyright (C) 1989 Free Software Foundation, Inc.
X                    675 Mass Ave, Cambridge, MA 02139, USA
X Everyone is permitted to copy and distribute verbatim copies
X of this license document, but changing it is not allowed.
X
X			    Preamble
X
X  The license agreements of most software companies try to keep users
Xat the mercy of those companies.  By contrast, our General Public
XLicense is intended to guarantee your freedom to share and change free
Xsoftware--to make sure the software is free for all its users.  The
XGeneral Public License applies to the Free Software Foundation's
Xsoftware and to any other program whose authors commit to using it.
XYou can use it for your programs, too.
X
X  When we speak of free software, we are referring to freedom, not
Xprice.  Specifically, the General Public License is designed to make
Xsure that you have the freedom to give away or sell copies of free
Xsoftware, that you receive source code or can get it if you want it,
Xthat you can change the software or use pieces of it in new free
Xprograms; and that you know you can do these things.
X
X  To protect your rights, we need to make restrictions that forbid
Xanyone to deny you these rights or to ask you to surrender the rights.
XThese restrictions translate to certain responsibilities for you if you
Xdistribute copies of the software, or if you modify it.
X
X  For example, if you distribute copies of a such a program, whether
Xgratis or for a fee, you must give the recipients all the rights that
Xyou have.  You must make sure that they, too, receive or can get the
Xsource code.  And you must tell them their rights.
X
X  We protect your rights with two steps: (1) copyright the software, and
X(2) offer you this license which gives you legal permission to copy,
Xdistribute and/or modify the software.
X
X  Also, for each author's protection and ours, we want to make certain
Xthat everyone understands that there is no warranty for this free
Xsoftware.  If the software is modified by someone else and passed on, we
Xwant its recipients to know that what they have is not the original, so
Xthat any problems introduced by others will not reflect on the original
Xauthors' reputations.
X
X  The precise terms and conditions for copying, distribution and
Xmodification follow.
X
X		    GNU GENERAL PUBLIC LICENSE
X   TERMS AND CONDITIONS FOR COPYING, DISTRIBUTION AND MODIFICATION
X
X  0. This License Agreement applies to any program or other work which
Xcontains a notice placed by the copyright holder saying it may be
Xdistributed under the terms of this General Public License.  The
X"Program", below, refers to any such program or work, and a "work based
Xon the Program" means either the Program or any work containing the
XProgram or a portion of it, either verbatim or with modifications.  Each
Xlicensee is addressed as "you".
X
X  1. You may copy and distribute verbatim copies of the Program's source
Xcode as you receive it, in any medium, provided that you conspicuously and
Xappropriately publish on each copy an appropriate copyright notice and
Xdisclaimer of warranty; keep intact all the notices that refer to this
XGeneral Public License and to the absence of any warranty; and give any
Xother recipients of the Program a copy of this General Public License
Xalong with the Program.  You may charge a fee for the physical act of
Xtransferring a copy.
X
X  2. You may modify your copy or copies of the Program or any portion of
Xit, and copy and distribute such modifications under the terms of Paragraph
X1 above, provided that you also do the following:
X
X    a) cause the modified files to carry prominent notices stating that
X    you changed the files and the date of any change; and
X
X    b) cause the whole of any work that you distribute or publish, that
X    in whole or in part contains the Program or any part thereof, either
X    with or without modifications, to be licensed at no charge to all
X    third parties under the terms of this General Public License (except
X    that you may choose to grant warranty protection to some or all
X    third parties, at your option).
X
X    c) If the modified program normally reads commands interactively when
X    run, you must cause it, when started running for such interactive use
X    in the simplest and most usual way, to print or display an
X    announcement including an appropriate copyright notice and a notice
X    that there is no warranty (or else, saying that you provide a
X    warranty) and that users may redistribute the program under these
X    conditions, and telling the user how to view a copy of this General
X    Public License.
X
X    d) You may charge a fee for the physical act of transferring a
X    copy, and you may at your option offer warranty protection in
X    exchange for a fee.
X
XMere aggregation of another independent work with the Program (or its
Xderivative) on a volume of a storage or distribution medium does not bring
Xthe other work under the scope of these terms.
X
X  3. You may copy and distribute the Program (or a portion or derivative of
Xit, under Paragraph 2) in object code or executable form under the terms of
XParagraphs 1 and 2 above provided that you also do one of the following:
X
X    a) accompany it with the complete corresponding machine-readable
X    source code, which must be distributed under the terms of
X    Paragraphs 1 and 2 above; or,
X
X    b) accompany it with a written offer, valid for at least three
X    years, to give any third party free (except for a nominal charge
X    for the cost of distribution) a complete machine-readable copy of the
X    corresponding source code, to be distributed under the terms of
X    Paragraphs 1 and 2 above; or,
X
X    c) accompany it with the information you received as to where the
X    corresponding source code may be obtained.  (This alternative is
X    allowed only for noncommercial distribution and only if you
X    received the program in object code or executable form alone.)
X
XSource code for a work means the preferred form of the work for making
Xmodifications to it.  For an executable file, complete source code means
Xall the source code for all modules it contains; but, as a special
Xexception, it need not include source code for modules which are standard
Xlibraries that accompany the operating system on which the executable
Xfile runs, or for standard header files or definitions files that
Xaccompany that operating system.
X
X  4. You may not copy, modify, sublicense, distribute or transfer the
XProgram except as expressly provided under this General Public License.
XAny attempt otherwise to copy, modify, sublicense, distribute or transfer
Xthe Program is void, and will automatically terminate your rights to use
Xthe Program under this License.  However, parties who have received
Xcopies, or rights to use copies, from you under this General Public
XLicense will not have their licenses terminated so long as such parties
Xremain in full compliance.
X
X  5. By copying, distributing or modifying the Program (or any work based
Xon the Program) you indicate your acceptance of this license to do so,
Xand all its terms and conditions.
X
X  6. Each time you redistribute the Program (or any work based on the
XProgram), the recipient automatically receives a license from the original
Xlicensor to copy, distribute or modify the Program subject to these
Xterms and conditions.  You may not impose any further restrictions on the
Xrecipients' exercise of the rights granted herein.
X
X  7. The Free Software Foundation may publish revised and/or new versions
Xof the General Public License from time to time.  Such new versions will
Xbe similar in spirit to the present version, but may differ in detail to
Xaddress new problems or concerns.
X
XEach version is given a distinguishing version number.  If the Program
Xspecifies a version number of the license which applies to it and "any
Xlater version", you have the option of following the terms and conditions
Xeither of that version or of any later version published by the Free
XSoftware Foundation.  If the Program does not specify a version number of
Xthe license, you may choose any version ever published by the Free Software
XFoundation.
X
X  8. If you wish to incorporate parts of the Program into other free
Xprograms whose distribution conditions are different, write to the author
Xto ask for permission.  For software which is copyrighted by the Free
XSoftware Foundation, write to the Free Software Foundation; we sometimes
Xmake exceptions for this.  Our decision will be guided by the two goals
Xof preserving the free status of all derivatives of our free software and
Xof promoting the sharing and reuse of software generally.
X
X			    NO WARRANTY
X
X  9. BECAUSE THE PROGRAM IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY
XFOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE LAW.  EXCEPT WHEN
XOTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER PARTIES
XPROVIDE THE PROGRAM "AS IS" WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED
XOR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
XMERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.  THE ENTIRE RISK AS
XTO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH YOU.  SHOULD THE
XPROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING,
XREPAIR OR CORRECTION.
X
X  10. IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING
XWILL ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MAY MODIFY AND/OR
XREDISTRIBUTE THE PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES,
XINCLUDING ANY GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING
XOUT OF THE USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED
XTO LOSS OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY
XYOU OR THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER
XPROGRAMS), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE
XPOSSIBILITY OF SUCH DAMAGES.
X
X		     END OF TERMS AND CONDITIONS
X
X	Appendix: How to Apply These Terms to Your New Programs
X
X  If you develop a new program, and you want it to be of the greatest
Xpossible use to humanity, the best way to achieve this is to make it
Xfree software which everyone can redistribute and change under these
Xterms.
X
X  To do so, attach the following notices to the program.  It is safest to
Xattach them to the start of each source file to most effectively convey
Xthe exclusion of warranty; and each file should have at least the
X"copyright" line and a pointer to where the full notice is found.
X
X    <one line to give the program's name and a brief idea of what it does.>
X    Copyright (C) 19yy  <name of author>
X
X    This program is free software; you can redistribute it and/or modify
X    it under the terms of the GNU General Public License as published by
X    the Free Software Foundation; either version 1, or (at your option)
X    any later version.
X
X    This program is distributed in the hope that it will be useful,
X    but WITHOUT ANY WARRANTY; without even the implied warranty of
X    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
X    GNU General Public License for more details.
X
X    You should have received a copy of the GNU General Public License
X    along with this program; if not, write to the Free Software
X    Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
X
XAlso add information on how to contact you by electronic and paper mail.
X
XIf the program is interactive, make it output a short notice like this
Xwhen it starts in an interactive mode:
X
X    Gnomovision version 69, Copyright (C) 19xx name of author
X    Gnomovision comes with ABSOLUTELY NO WARRANTY; for details type `show w'.
X    This is free software, and you are welcome to redistribute it
X    under certain conditions; type `show c' for details.
X
XThe hypothetical commands `show w' and `show c' should show the
Xappropriate parts of the General Public License.  Of course, the
Xcommands you use may be called something other than `show w' and `show
Xc'; they could even be mouse-clicks or menu items--whatever suits your
Xprogram.
X
XYou should also get your employer (if you work as a programmer) or your
Xschool, if any, to sign a "copyright disclaimer" for the program, if
Xnecessary.  Here a sample; alter the names:
X
X  Yoyodyne, Inc., hereby disclaims all copyright interest in the
X  program `Gnomovision' (a program to direct compilers to make passes
X  at assemblers) written by James Hacker.
X
X  <signature of Ty Coon>, 1 April 1989
X  Ty Coon, President of Vice
X
XThat's all there is to it!
SHAR_EOF
  $shar_touch -am 1028144694 'term-2.2.5/COPYING' &&
  chmod 0644 'term-2.2.5/COPYING' ||
  echo 'restore of term-2.2.5/COPYING failed'
  shar_count="`wc -c < 'term-2.2.5/COPYING'`"
  test 12488 -eq "$shar_count" ||
    echo "term-2.2.5/COPYING: original size 12488, current size $shar_count"
  rm -f _sharnew.tmp
fi
# ============= term-2.2.5/CREDITS ==============
if test -f 'term-2.2.5/CREDITS' && test X"$1" != X"-c"; then
  echo 'x - skipping term-2.2.5/CREDITS (file already exists)'
  rm -f _sharnew.tmp
else
  > _sharnew.tmp
  echo 'x - extracting term-2.2.5/CREDITS (text)'
  sed 's/^X//' << 'SHAR_EOF' > 'term-2.2.5/CREDITS' &&
XI hope you like the program. It couldn't have been written without the
Xsupport and feed-back from a rather large number of ppl. 
X
XI tried the patience of my girlfriend sorely, and am very grateful
Xfor the support provided by the following ppl. This is by no means a
Xcomplete list, just the highlights. If I have missed someone, please
Xlet me know.
X
X	Michael. (oreillym@tartarus.uwa.edu.au).
X	(now michael@iinet.com.au)
X
XBill C. Riemers (bcr@physics.purdue.edu)
X	Stuck my fingers in everywhere and hacked term all to pieces.
X	You are using the remains of it right now.
X	Also added TitanOS support and termnet.
X
XDavid Wexelblat (dwex@mtgzfs3.att.com)
X	Write the extensive mods for SYSV support.
X
XDavid Dawes (dawes@physics.su.oz.au)
X	Debugged the above. 
X
XHugh Secker-Walker (hugh@ear.mit.edu)
X	Wrote NeXT support.
X
XWerner Almesberger (almesber@nessie.cs.id.ethz.ch)
X	Wrote SGI support
X
XJohn Hendrickson (hendrick@andrews.edu)
X	Wrote the original tredir client!
X	Write the tmon client too.
X	
XCroutons (crunchy!croutons@dartmouth.edu)
X	Most of the makefile.
X	The argument handling for trsh
X	The compression-per-channel as opposed to global.
X
XJeff Grills (jefftep@cs.utexas.edu)
X	Wrote the new upload. Also had many valuable ideas for
X	term internals. Also pushed me into cleaning up a lot of
X	things I had been too lazy to do.
X
XRick Sladkey (jsr@world.std.com)
X	Write termftp.
X	Fixed C_SOCKET to work with dotted decimal addresses.
X
Xgtaylor (gtaylor@Jade.Tufts.EDU)
X	Wrote the bulk of the manual pages.
X
Xssd@nevets.oau.org (Steven S. Dick)
X	Sent me the CRC routine in checksum.c
X
X<tema@snakemail.hut.fi>
X	Wrote the HPUX support.
X
Xhlu@eecs.wsu.edu (H.J. Lu)
X	Improved and extended the HPUX support.
X
Xjohnsonm@stolaf.edu (Michael K Johnson)
X	Edited the TERMRC file to work.
X
XTeemu Rantanen <tvr@cs.hut.fi>
X	Wrote the code to handle re-sizing of trsh windows.
X	
Xarumble@extro.ucc.su.oz.au
Xjason@sorokin.anu.edu.au
X	General support and suggestions and lots of little things
X	too numerous to mention.
X	
Xdlogue@Starbase.NeoSoft.COM (Dan Logue)
X	Added BSDI support.
X
Xuknf@rz.uni-karlsruhe.de (Olaf Titz)
X	Wrote tshutdown.c, and other stuff.  See old/Blurb for more details
X
XDerek Atkins <warlord@MIT.EDU>
X	C_GETHOSTNAME
X	C_GETPEERNAME
X	C_GETSOCKNAME
X
XStephen J. Roznowski <sjr@zombie.ncsc.mil>
X	Added NetBSD support.
X
XBOONE BARRY EDWARD <boone@a.cs.okstate.edu>
X	Added Dynix/ptx support
X
XChris Metcalf <metcalf@lcs.mit.edu>
X	Too many patches to even keep track, configure, Makefile.in, 
X        term_herror, ...  Oh yea, and lots of spilling corrections. :-)
X
XDavor Jadrijevic <davor%emard.uucp@ds5000.irb.hr>
X	Original shared library.
X
XDanny Gasparovski <u923168@student.canberra.edu.au>
X	Added UDP support.
X
XBrian Campbell <brianc@qnx.com>
X	Added QNX support.
X
XAmi Fischman <a540ami@pic.ucla.edu>
X	Added ISC (SVR3.2 clone) support
X
XAnyone I have left out (and there will be a fair few), please mail me,
Xand tell me.
X
SHAR_EOF
  $shar_touch -am 1028144694 'term-2.2.5/CREDITS' &&
  chmod 0644 'term-2.2.5/CREDITS' ||
  echo 'restore of term-2.2.5/CREDITS failed'
  shar_count="`wc -c < 'term-2.2.5/CREDITS'`"
  test 2909 -eq "$shar_count" ||
    echo "term-2.2.5/CREDITS: original size 2909, current size $shar_count"
  rm -f _sharnew.tmp
fi
# ============= term-2.2.5/FAQ ==============
if test -f 'term-2.2.5/FAQ' && test X"$1" != X"-c"; then
  echo 'x - skipping term-2.2.5/FAQ (file already exists)'
  rm -f _sharnew.tmp
else
  > _sharnew.tmp
  echo 'x - extracting term-2.2.5/FAQ (text)'
  sed 's/^X//' << 'SHAR_EOF' > 'term-2.2.5/FAQ' &&
X1) Term doesn't work! Why not??!!
X
X	This is one of the most tremendously useful questions I have
Xever been asked. You will notice that it contains all the pertinent
Xinformation I might want to know, like what version of term they are
Xusing, and exactly what the symptoms are, and what machine they are
Xrunning it on, and what they have tried, etc etc. However here are a
Xfew things to try before mailing me with details. :)
X
X	a) Create a ~/.term/termrc file at both ends with the two
Xlines "escape 0-31" and "escape 128-159" in it. Then try term. If this
Xworks, try shortening the ranges as much as possible. Experience
Xindicates that most people will be able to get away with either
Xnothing, or "escape 17" and "escape 19", or escaping 17, 19, 145 and
X147. 
X
X	b) If 'a' doesn't work, it's possible that you have a
Xseven-bit line. Try using a termrc with the two lines "sevenbit"
Xand "escape 0-31" in it. It is important to know that the termrc at
Xeach end must have 'sevenbit' in it.
X	
X	If you do need to mail me please include as much of the following
Xlist as is relevant:
X		Term version(s):
X		Remote system:
X		Local system:
X		Local modem type & UART type:
X		Remote modem type & UART type, if known:
X		A detailed description of the problem.
X		A description of what you have tried.
X		A transcript of the problem, if possible.
X		Code that produces the problem, if possible.
X		A patch to fix it, if you know the solution.
X
X2) Term doesn't run as fast as it should. Why not??
X
X	Several ways to speed up term. Here are the most common...
X	a) Escape as few characters as possible. Escaping 32 characters will
Xcut thru-put by about 12-15%.
X
X	b) If you escape a character on one end, add a corresponding 'ignore'
Xon the other. I.e. if you 'escape 17' on the remote end, put a 'ignore 17'
Xon the local end.
X
X	c) Sevenbit mode will completely block all compression.  This means
Xterm won't compress and neither will your modem.  However this is still
Xmore effiecent than escape 128-255.  This will probably be fixed with a
Xfuture release.
X
X	d) There is still alittle black magic involved in getter term to run
Xat full speed.  By this I mean, I can't describe a step by step procedure
Xfor all situations, but normally with enough playing with termrc options,
Xmodem settings, and stty settings you can get 99% performance.  Usually,
Xthe best way to learn how to optomize speed, is to try it first with no
Xhardware problems.  To do this, try running termtest as:
X
X	'./termtest -s <your baudrate>',
X
Xand optomize the speed to better than <your baudrate>/9 cps with the termrc
Xfile.  Then putting in your serial line's restrictions such as escape
Xcharacters, sevenbits, stop bits, etc.  Now at any time you should be
Xable to use ./termtest to determine what is the maximum speed you should
Xbe obtaining for compressed data.
X
X3) 'txconn' doesn't seem to work.
X
X	a) Make sure you have 'xhost +' on both machines.
X
X	b) X windows take awhile to open; be patient.
X
X	c) Make sure you are running txconn on your remote machine, not your
Xlocal machine.
X
X	d) The syntax of txconn for term 2.X is slightly different than 
Xfrom term 1.X.  Be sure to read the manual page.
X
X        e) Try instead "tredir 6009 6000"
X
X4) X windows take a long time to open, and then run very slowly.
X
X	a) Try picking up a copy of sxpc from sunsite.unc.edu.  Don't ask
Xme how to install it; I've never used it.  Expect about 20% speed
Ximprovement.
X
X	b) Try compiling your favorite X applications on your home machine.
XFor applications like xarchie, this is a big win.
X
X5) Trsh just hangs when I execute it.
X
X	Trsh is an endless source of problems.
X
X	a) Try using something simple like:
X
X	       	trsh -s echo trsh works in simple mode
X
X	If this works, then you can use "trsh" with the "-s" option.  Try
Xdefining NO_PTYEXEC in config.h and recompile.
X
X	b) Try using telnet instead.  i.e. Do once "tredir 4023 23".  Then
Xyou should be able to connect with the command "telnet localhost 4023".  If
Xthis works, you may wish to recompile telnet with the instructions in 
XREADME.porting, so you don't have to do the tredir command every time you
Xestablish a term connection.  Also, you can compile rlogin, so you don't have
Xto login every time.
X
X6) Is there a term mailing list? 
X
X	 Yes there is; it is a channel of the linux-activists stuff.  Try
Xmailing:
X
X  echo X-Mn-Admin: join term | mail linux-activists-request@niksula.hut.fi
X
XA help file is available upon request from the same address.
X
X7) Is there a term internet news group?
X
X	No, but please use comp.protocols.misc.  If the traffic gets large
Xenough, someone can propose a split for term.
X
X8) I get a : gethostbyname: ...  error when term starts.  Why?
X
X	This means that your `hostname` is not set properly set.  Term will
Xstill work despite this error, but won't automatically recognize your hostname.
X
X9) I did tredir 4021 21, but people still can't ftp my machine.
X
X	You need inetd.term.tar.gz  There is a copy on physics.purdue.edu.
XIt should appear at other sites sometime.  Also, in.ftpd needs to be compiled
Xwith term support.
X
X10) Is there an easier way to port software than recompiling?
X
X	Under Linux, you can use "termify", also available on
Xphysics.purdue.edu.  Eventually "termify" may be ported to other
XOS's that use shared libraries.
X
X
X
SHAR_EOF
  $shar_touch -am 1028144694 'term-2.2.5/FAQ' &&
  chmod 0644 'term-2.2.5/FAQ' ||
  echo 'restore of term-2.2.5/FAQ failed'
  shar_count="`wc -c < 'term-2.2.5/FAQ'`"
  test 5264 -eq "$shar_count" ||
    echo "term-2.2.5/FAQ: original size 5264, current size $shar_count"
  rm -f _sharnew.tmp
fi
# ============= term-2.2.5/INSTALL ==============
if test -f 'term-2.2.5/INSTALL' && test X"$1" != X"-c"; then
  echo 'x - skipping term-2.2.5/INSTALL (file already exists)'
  rm -f _sharnew.tmp
else
  > _sharnew.tmp
  echo 'x - extracting term-2.2.5/INSTALL (text)'
  sed 's/^X//' << 'SHAR_EOF' > 'term-2.2.5/INSTALL' &&
XInstallation Guide to Term
X==========================
X
XThe quick way to install term is as follows:
X
X   If you have access to root:
X	% ./configure --root
X	% make
X	% su -c 'make install installman'
X   otherwise,
X        % ./configure --user
X	% make install installman
X
XFor group-shared or user-shared, replace "install" with "share" in the 
X"make install installman" command.  If term is your only network connection
Xthen also add "installnet" to your make command.  Here is the command I run:
X
X	% ./configure --root;make;su -c 'make installnet installman'
X
X
XFor more detailed information, read on.
X
X
XConfigure
X---------
X
XThe "configure" tool is responsible for generating a Makefile from the
Xsupplied Makefile.in.  In theory, you shouldn't have to modify either 
Xone to support most standard installations.
X
X"configure" attempts to autodetect the type of system it is running on,
Xby examining the output of "uname", "arch", or tcsh's $HOSTTYPE, or by
Xperforming other OS-specific tests.  If this doesn't work for you for
Xsome reason, you will need to specify the name of the OS on the command
Xline to "configure".  Currently configurable systems are:
X
X      aix            IBM AIX
X      bsdi           BSDi
X     *convex         C220 ConvexOS 11.0
X      dynixptx       Dynix/PTX
X     *hcx            HCX/UX 5.1
X      hpux           HP/UX
X      irix           Irix
X     *linux          Linux 1.0, 1.1
X     *machten        MachTen
X      mips           MIPS
X      netbsd         NetBSD
X     *next           NeXT 2.1, 3.0
X     *osf1           OSF/1
X      sco            SCO Unix
X      sgi            SGI
X     *sol2           Solaris 2.x aka SunOS 5.x
X     *sun            Solaris 1.x aka SunOS 4.x
X      svr4           SVR4
X     *titan          Titan/OS
X     *ultrix         Ultrix 4.x
X
XSystems known to autodetect are marked with a *.  If your system does not
Xautodetect, and you can come up with some unique way of identifying it,
Xplease send in a patch.  Systems that have at least successfully run
Xterm via "./termtest" are listed below along with the version of term:
X
X     MIPS Ultrix 4.4, gcc 2.5.8 (term 2.1.0)
X     SunOS 4.1.3, gcc 2.5.8 (term 2.1.0)
X     SunOS 5.3, gcc 2.5.6 (term 2.1.0)
X     Linux 1.1.x, gcc 2.5.8 (term 2.1.0)
X     NeXT 2.1, cc (term 2.1.0)
X     Alpha OSF/1 V2.0, gcc 2.5.8 (term 2.1.0)
X     HCX/UX 5.1, cc (term 2.1.0)
X
Xconfigure can be used to build the binary in a directory separate from
Xthe source.  The easiest way to do this is to cd to the build directory
Xand invoke configure with the full path to the source directory, e.g.
X/usr/src/local/term/configure.  configure will generate a Makefile
Xthat looks for the source in that directory using the VPATH mechanism
X(supported by GNU make and various commercial makes).  If for some reason
Xyou need to explicitly specify the source directory, you may use the
X--srcdir option of configure.
X
Xconfigure by default will ask you if you can install as root.  If so,
Xit will default to installing into /usr/local (and using group sharing
Xif you select shared mode).  If not, configure will generate a default
XMakefile that will install term into your home directory and configure
Xit for user sharing (if you select shared mode).  You may specify 
X--root or --user on the command line to avoid the question.
SHAR_EOF
  : || echo 'restore of term-2.2.5/INSTALL failed'
fi
echo 'End of archive part 1'
echo 'File term-2.2.5/INSTALL is continued in part 2'
echo 2 > _sharseq.tmp
exit 0
